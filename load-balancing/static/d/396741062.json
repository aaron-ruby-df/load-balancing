{"data":{"allMdx":{"edges":[{"node":{"fields":{"slug":"/"},"frontmatter":{"order":1,"title":"Welcome","summary":null,"demo":null,"tags":null},"headings":[{"value":"Cloudflare Load Balancing docs"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Cloudflare Load Balancing docs","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":33,"offset":33},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":33,"offset":33},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Overused or geographically distant servers add unnecessary latency and degrade the user experience. Unreliable or misconfigured servers can drop user requests completely, preventing access to websites, web apps, and APIs. Poor user experiences like these have a direct impact on revenue, reputation, and customer loyalty.","position":{"start":{"line":4,"column":1,"offset":35},"end":{"line":4,"column":322,"offset":356},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":35},"end":{"line":4,"column":322,"offset":356},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare Load Balancing provides DNS-based load balancing and active health checks against origin servers and pools. It expands on Cloudflare's existing Anycast DNS network to provide resilience against distributed denial of service (DDoS) attacks by steering away from unhealthy origin servers. Users can also enable Geo Steering, which directs traffic to specific origin pools based on the client’s region.","position":{"start":{"line":6,"column":1,"offset":358},"end":{"line":6,"column":411,"offset":768},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":358},"end":{"line":6,"column":411,"offset":768},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare Load Balancing delivers three key features:","position":{"start":{"line":8,"column":1,"offset":770},"end":{"line":8,"column":55,"offset":824},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":770},"end":{"line":8,"column":55,"offset":824},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Load balancing and failover","position":{"start":{"line":10,"column":5,"offset":830},"end":{"line":10,"column":32,"offset":857},"indent":[]}}],"position":{"start":{"line":10,"column":3,"offset":828},"end":{"line":10,"column":34,"offset":859},"indent":[]}},{"type":"text","value":": Deliver traffic evenly across healthy servers, automatically failing over when a server is unhealthy or not responsive.","position":{"start":{"line":10,"column":34,"offset":859},"end":{"line":10,"column":155,"offset":980},"indent":[]}}],"position":{"start":{"line":10,"column":3,"offset":828},"end":{"line":10,"column":155,"offset":980},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":826},"end":{"line":10,"column":155,"offset":980},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Active health checks","position":{"start":{"line":11,"column":5,"offset":985},"end":{"line":11,"column":25,"offset":1005},"indent":[]}}],"position":{"start":{"line":11,"column":3,"offset":983},"end":{"line":11,"column":27,"offset":1007},"indent":[]}},{"type":"text","value":": Set up health checks to monitor your servers at configurable intervals and look for specific status codes, response text, and/or timeouts. Cloudflare monitors your servers from each of our data centers.","position":{"start":{"line":11,"column":27,"offset":1007},"end":{"line":11,"column":231,"offset":1211},"indent":[]}}],"position":{"start":{"line":11,"column":3,"offset":983},"end":{"line":11,"column":231,"offset":1211},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":981},"end":{"line":11,"column":231,"offset":1211},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Geographic control","position":{"start":{"line":12,"column":5,"offset":1216},"end":{"line":12,"column":23,"offset":1234},"indent":[]}}],"position":{"start":{"line":12,"column":3,"offset":1214},"end":{"line":12,"column":25,"offset":1236},"indent":[]}},{"type":"text","value":": Direct visitors in Europe to your European data center, US visitors to your North American data center, or dive deeper and configure traffic at a regional level.","position":{"start":{"line":12,"column":25,"offset":1236},"end":{"line":12,"column":188,"offset":1399},"indent":[]}}],"position":{"start":{"line":12,"column":3,"offset":1214},"end":{"line":12,"column":188,"offset":1399},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":1212},"end":{"line":12,"column":188,"offset":1399},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":826},"end":{"line":12,"column":188,"offset":1399},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Note that load balancing is enabled at the Cloudflare account level. A single account can create many load balancers.","position":{"start":{"line":14,"column":1,"offset":1401},"end":{"line":14,"column":118,"offset":1518},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":1401},"end":{"line":14,"column":118,"offset":1518},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can set up a load balancer from the Cloudflare Traffic app or via the Cloudflare API.","position":{"start":{"line":16,"column":1,"offset":1520},"end":{"line":16,"column":90,"offset":1609},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":1520},"end":{"line":16,"column":90,"offset":1609},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Load Balancing components","position":{"start":{"line":18,"column":4,"offset":1614},"end":{"line":18,"column":29,"offset":1639},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1611},"end":{"line":18,"column":29,"offset":1639},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare Load Balancing has three major components:","position":{"start":{"line":20,"column":1,"offset":1641},"end":{"line":20,"column":54,"offset":1694},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1641},"end":{"line":20,"column":54,"offset":1694},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A Cloudflare ","position":{"start":{"line":22,"column":3,"offset":1698},"end":{"line":22,"column":16,"offset":1711},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Load Balancer","position":{"start":{"line":22,"column":18,"offset":1713},"end":{"line":22,"column":31,"offset":1726},"indent":[]}}],"position":{"start":{"line":22,"column":16,"offset":1711},"end":{"line":22,"column":33,"offset":1728},"indent":[]}},{"type":"text","value":" is identified by a DNS hostname (","position":{"start":{"line":22,"column":33,"offset":1728},"end":{"line":22,"column":67,"offset":1762},"indent":[]}},{"type":"link","title":null,"url":"http://www.example.com","children":[{"type":"text","value":"www.example.com","position":{"start":{"line":22,"column":67,"offset":1762},"end":{"line":22,"column":82,"offset":1777},"indent":[]}}],"position":{"start":{"line":22,"column":67,"offset":1762},"end":{"line":22,"column":82,"offset":1777},"indent":[]}},{"type":"text","value":", for example) for which you want to balance traffic. A load balancer defines which origin-server pools to use, the order in which they should be used, and how to geographically distribute traffic to different pools.","position":{"start":{"line":22,"column":82,"offset":1777},"end":{"line":22,"column":298,"offset":1993},"indent":[]}}],"position":{"start":{"line":22,"column":3,"offset":1698},"end":{"line":22,"column":298,"offset":1993},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1696},"end":{"line":22,"column":298,"offset":1993},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Pools","position":{"start":{"line":23,"column":5,"offset":1998},"end":{"line":23,"column":10,"offset":2003},"indent":[]}}],"position":{"start":{"line":23,"column":3,"offset":1996},"end":{"line":23,"column":12,"offset":2005},"indent":[]}},{"type":"text","value":" represent a group of origin servers (or endpoints), each identified by its IP address or hostname. You can configure multiple pools, as well as failover priority (Pool A-> Pool B-> Pool C). If you're familiar with DNS terminology, think of a pool as a “record set,” except we only return addresses of origins that are considered healthy. You can attach health checks to individual pools to tailor monitoring to collections of servers.","position":{"start":{"line":23,"column":12,"offset":2005},"end":{"line":23,"column":447,"offset":2440},"indent":[]}}],"position":{"start":{"line":23,"column":3,"offset":1996},"end":{"line":23,"column":447,"offset":2440},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1994},"end":{"line":23,"column":447,"offset":2440},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Monitors","position":{"start":{"line":24,"column":5,"offset":2445},"end":{"line":24,"column":13,"offset":2453},"indent":[]}}],"position":{"start":{"line":24,"column":3,"offset":2443},"end":{"line":24,"column":15,"offset":2455},"indent":[]}},{"type":"text","value":" configure availability monitoring. When a monitor is attached to a pool, Cloudflare will run health checks on that pool’s origin servers from our data centers around the world. You can customize monitoring for specific URLs by using periodic HTTP/HTTPS requests, which allow you to set request intervals, timeouts, and status codes.","position":{"start":{"line":24,"column":15,"offset":2455},"end":{"line":24,"column":348,"offset":2788},"indent":[]}}],"position":{"start":{"line":24,"column":3,"offset":2443},"end":{"line":24,"column":348,"offset":2788},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":2441},"end":{"line":24,"column":348,"offset":2788},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1696},"end":{"line":24,"column":348,"offset":2788},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You can reuse monitors and pools across many load balancers. For example, your ","position":{"start":{"line":26,"column":1,"offset":2790},"end":{"line":26,"column":80,"offset":2869},"indent":[]}},{"type":"inlineCode","value":".co.uk","position":{"start":{"line":26,"column":80,"offset":2869},"end":{"line":26,"column":88,"offset":2877},"indent":[]}},{"type":"text","value":" domain might use a different ordering of pools (favoring your London servers, for instance) than your ","position":{"start":{"line":26,"column":88,"offset":2877},"end":{"line":26,"column":191,"offset":2980},"indent":[]}},{"type":"inlineCode","value":".com.au","position":{"start":{"line":26,"column":191,"offset":2980},"end":{"line":26,"column":200,"offset":2989},"indent":[]}},{"type":"text","value":" domain.","position":{"start":{"line":26,"column":200,"offset":2989},"end":{"line":26,"column":208,"offset":2997},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":2790},"end":{"line":26,"column":208,"offset":2997},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Welcome\",\"order\":1}","position":{"start":{"line":29,"column":1,"offset":3000},"end":{"line":29,"column":58,"offset":3057},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":29,"column":58,"offset":3057}}}}},{"node":{"fields":{"slug":"/understand-basics"},"frontmatter":{"order":10,"title":"","summary":null,"demo":null,"tags":null},"headings":[{"value":"Understand the basics"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Understand the basics","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":24,"offset":24},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":24,"offset":24},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This sections comprises a set of concepts and functionalities to help you understand the power of Cloudflare Load Balancing in planning your traffic management. Click on the links below to learn more:","position":{"start":{"line":4,"column":1,"offset":26},"end":{"line":4,"column":201,"offset":226},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":26},"end":{"line":4,"column":201,"offset":226},"indent":[]}},{"type":"jsx","value":"<DirectoryListing path=\"/understand-basics\"/>","position":{"start":{"line":6,"column":1,"offset":228},"end":{"line":6,"column":46,"offset":273},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"order\":10}","position":{"start":{"line":9,"column":1,"offset":276},"end":{"line":9,"column":41,"offset":316},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":9,"column":41,"offset":316}}}}},{"node":{"fields":{"slug":"/understand-basics/load-balancers"},"frontmatter":{"order":11,"title":"","summary":null,"demo":null,"tags":null},"headings":[{"value":"Load balancers"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Load balancers","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":17,"offset":17},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":17,"offset":17},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":4,"column":4,"offset":22},"end":{"line":4,"column":12,"offset":30},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":19},"end":{"line":4,"column":12,"offset":30},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A Cloudflare load balancer is identified by the DNS hostname whose traffic you want to balance (","position":{"start":{"line":6,"column":1,"offset":32},"end":{"line":6,"column":97,"offset":128},"indent":[]}},{"type":"link","title":null,"url":"http://www.example.com","children":[{"type":"text","value":"www.example.com","position":{"start":{"line":6,"column":97,"offset":128},"end":{"line":6,"column":112,"offset":143},"indent":[]}}],"position":{"start":{"line":6,"column":97,"offset":128},"end":{"line":6,"column":112,"offset":143},"indent":[]}},{"type":"text","value":", for example). The load balancer defines which origin server pools to use, the order in which they should be used, and how to geographically distribute traffic among pools.","position":{"start":{"line":6,"column":112,"offset":143},"end":{"line":6,"column":285,"offset":316},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":32},"end":{"line":6,"column":285,"offset":316},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":8,"column":1,"offset":318},"end":{"line":8,"column":4,"offset":321},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Important notes","position":{"start":{"line":10,"column":4,"offset":326},"end":{"line":10,"column":19,"offset":341},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":323},"end":{"line":10,"column":19,"offset":341},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Load balancing and existing DNS records","position":{"start":{"line":12,"column":5,"offset":347},"end":{"line":12,"column":44,"offset":386},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":343},"end":{"line":12,"column":44,"offset":386},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Adding a Load Balancer does not create a DNS record or SSL certificate.","position":{"start":{"line":14,"column":3,"offset":390},"end":{"line":14,"column":74,"offset":461},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":388},"end":{"line":14,"column":76,"offset":463},"indent":[]}},{"type":"text","value":"  To generate an SSL certificate, create a proxied DNS record for the Load Balancer. The Load Balancer record takes precedence over a DNS record for the same host name.","position":{"start":{"line":14,"column":76,"offset":463},"end":{"line":14,"column":244,"offset":631},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":388},"end":{"line":14,"column":244,"offset":631},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"When you create a load balancer on Cloudflare","position":{"start":{"line":16,"column":3,"offset":635},"end":{"line":16,"column":48,"offset":680},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":633},"end":{"line":16,"column":50,"offset":682},"indent":[]}},{"type":"text","value":", you can either:","position":{"start":{"line":16,"column":50,"offset":682},"end":{"line":16,"column":67,"offset":699},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":633},"end":{"line":16,"column":67,"offset":699},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Use a unique hostname with no existing DNS record, or","position":{"start":{"line":18,"column":3,"offset":703},"end":{"line":18,"column":56,"offset":756},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":703},"end":{"line":18,"column":56,"offset":756},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":701},"end":{"line":18,"column":56,"offset":756},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Use a hostname that has an existing DNS record, either as an A, AAAA, or CNAME record.","position":{"start":{"line":19,"column":3,"offset":759},"end":{"line":19,"column":89,"offset":845},"indent":[]}}],"position":{"start":{"line":19,"column":3,"offset":759},"end":{"line":19,"column":89,"offset":845},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":757},"end":{"line":19,"column":89,"offset":845},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":701},"end":{"line":19,"column":89,"offset":845},"indent":[1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"If a chosen hostname has an existing DNS record","position":{"start":{"line":21,"column":3,"offset":849},"end":{"line":21,"column":50,"offset":896},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":847},"end":{"line":21,"column":52,"offset":898},"indent":[]}},{"type":"text","value":", the load balancer will supersede the DNS record if the DNS record is an A, AAAA, or canonical name (CNAME) record. It will not supersede other record types.","position":{"start":{"line":21,"column":52,"offset":898},"end":{"line":21,"column":210,"offset":1056},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":847},"end":{"line":21,"column":210,"offset":1056},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"If the load balancer is disabled","position":{"start":{"line":23,"column":3,"offset":1060},"end":{"line":23,"column":35,"offset":1092},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1058},"end":{"line":23,"column":37,"offset":1094},"indent":[]}},{"type":"text","value":", preexisting DNS records will be served.","position":{"start":{"line":23,"column":37,"offset":1094},"end":{"line":23,"column":78,"offset":1135},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1058},"end":{"line":23,"column":78,"offset":1135},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"If there is no preexisting DNS record with the same name","position":{"start":{"line":25,"column":3,"offset":1139},"end":{"line":25,"column":59,"offset":1195},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1137},"end":{"line":25,"column":61,"offset":1197},"indent":[]}},{"type":"text","value":", disabling the load balancer will prevent clients from resolving the host, and requests will fail.","position":{"start":{"line":25,"column":61,"offset":1197},"end":{"line":25,"column":160,"offset":1296},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1137},"end":{"line":25,"column":160,"offset":1296},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"If a Load Balancer is manually disabled","position":{"start":{"line":27,"column":3,"offset":1300},"end":{"line":27,"column":42,"offset":1339},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1298},"end":{"line":27,"column":44,"offset":1341},"indent":[]}},{"type":"text","value":", traffic is not served to the associated origins or the fallback.  If all pools in a Load Balancer are manually disabled, the fallback origin is used unless the fallback is also disabled.  If the fallback is also disabled, the SOA record is served.  Otherwise, if there is one pool in the Load Balancer and the pool is unhealthy, Cloudflare sends traffic to the fallback pool regardless of the fallback pool's health.","position":{"start":{"line":27,"column":44,"offset":1341},"end":{"line":27,"column":462,"offset":1759},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1298},"end":{"line":27,"column":462,"offset":1759},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"HTTP keep-alive (persistent HTTP connection)","position":{"start":{"line":29,"column":4,"offset":1764},"end":{"line":29,"column":48,"offset":1808},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1761},"end":{"line":29,"column":48,"offset":1808},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare maintains keep-alive connections to improve performance and reduce cost of recurring TCP connects in the request transaction as Cloudflare proxies customer traffic from its edge network to the site's origin.","position":{"start":{"line":31,"column":1,"offset":1810},"end":{"line":31,"column":219,"offset":2028},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":1810},"end":{"line":31,"column":219,"offset":2028},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Ensure HTTP Keep-Alive connections are enabled on your origin. Cloudflare reuses open TCP connections for up to 15 minutes (900 seconds) after the last HTTP request. Origin web servers close TCP connections if too many are open. HTTP Keep-Alive helps avoid premature reset of connections for requests proxied by Cloudflare.","position":{"start":{"line":33,"column":1,"offset":2030},"end":{"line":33,"column":324,"offset":2353},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":2030},"end":{"line":33,"column":324,"offset":2353},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Session cookies","position":{"start":{"line":35,"column":5,"offset":2359},"end":{"line":35,"column":20,"offset":2374},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":2355},"end":{"line":35,"column":20,"offset":2374},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"When using HTTP cookies to track and bind user sessions to a specific server","position":{"start":{"line":37,"column":3,"offset":2378},"end":{"line":37,"column":79,"offset":2454},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":2376},"end":{"line":37,"column":81,"offset":2456},"indent":[]}},{"type":"text","value":", configure Session Affinity to parse HTTP requests by cookie header. Doing so directs each request to the correct application server even when HTTP requests share the same TCP connection due to keep-alive.","position":{"start":{"line":37,"column":81,"offset":2456},"end":{"line":37,"column":287,"offset":2662},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":2376},"end":{"line":37,"column":287,"offset":2662},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"For example, F5 BIG-IP load balancers set a session cookie at the beginning of a TCP connection","position":{"start":{"line":39,"column":3,"offset":2666},"end":{"line":39,"column":98,"offset":2761},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":2664},"end":{"line":39,"column":100,"offset":2763},"indent":[]}},{"type":"text","value":" (if none exists) and then ignore all cookies from subsequent HTTP requests on the same TCP connection. This tends to break session affinity because Cloudflare sends multiple HTTP sessions on the same TCP connection. Configuring the load balancer to parse HTTP requests by cookie headers avoids this issue.","position":{"start":{"line":39,"column":100,"offset":2763},"end":{"line":39,"column":406,"offset":3069},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":2664},"end":{"line":39,"column":406,"offset":3069},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Railgun (wide area network optimization)","position":{"start":{"line":41,"column":5,"offset":3075},"end":{"line":41,"column":45,"offset":3115},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":3071},"end":{"line":41,"column":45,"offset":3115},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Railgun is a web proxy system built for Cloudflare","position":{"start":{"line":43,"column":3,"offset":3119},"end":{"line":43,"column":53,"offset":3169},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":3117},"end":{"line":43,"column":55,"offset":3171},"indent":[]}},{"type":"text","value":", that allows dynamic content for a website to be cached while also allowing changes to the site to take effect almost instantly. Railgun is currently available to customers with a Business or Enterprise plan, or via one of Cloudflare’s Optimised Partners.","position":{"start":{"line":43,"column":55,"offset":3171},"end":{"line":43,"column":311,"offset":3427},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":3117},"end":{"line":43,"column":311,"offset":3427},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Railgun compresses web objects, even rapidly changing pages like news sites or personalized content","position":{"start":{"line":45,"column":3,"offset":3431},"end":{"line":45,"column":102,"offset":3530},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":3429},"end":{"line":45,"column":104,"offset":3532},"indent":[]}},{"type":"text","value":". Using Railgun in conjunction with Cloudflare Load Balancing speeds up connections between Cloudflare datacenters and DNS origin servers so that uncacheable requests have minimal latency.","position":{"start":{"line":45,"column":104,"offset":3532},"end":{"line":45,"column":292,"offset":3720},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":3429},"end":{"line":45,"column":292,"offset":3720},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/load-balancer-1.png","alt":null,"position":{"start":{"line":47,"column":1,"offset":3722},"end":{"line":47,"column":42,"offset":3763},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":3722},"end":{"line":47,"column":42,"offset":3763},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Set up a Railgun listener in front of the load balancer","position":{"start":{"line":49,"column":3,"offset":3767},"end":{"line":49,"column":58,"offset":3822},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":3765},"end":{"line":49,"column":60,"offset":3824},"indent":[]}},{"type":"text","value":" so that the load balancer can handle HTTP connections normally. Load balancing long-lived TLS connections between the sender and listener is very difficult.","position":{"start":{"line":49,"column":60,"offset":3824},"end":{"line":49,"column":217,"offset":3981},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":3765},"end":{"line":49,"column":217,"offset":3981},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Use the same load balancer settings as if Railgun were not in place","position":{"start":{"line":51,"column":3,"offset":3985},"end":{"line":51,"column":70,"offset":4052},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":3983},"end":{"line":51,"column":72,"offset":4054},"indent":[]}},{"type":"text","value":" — for example, HTTP keep-alive connections should be enabled and set to a 90-second timeout, since Railgun is working as an HTTP reverse proxy.","position":{"start":{"line":51,"column":72,"offset":4054},"end":{"line":51,"column":216,"offset":4198},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":3983},"end":{"line":51,"column":216,"offset":4198},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"If Railgun is placed behind the load balancer","position":{"start":{"line":53,"column":3,"offset":4202},"end":{"line":53,"column":48,"offset":4247},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":4200},"end":{"line":53,"column":50,"offset":4249},"indent":[]}},{"type":"text","value":", observe the following guidelines to avoid interruptions with site traffic:","position":{"start":{"line":53,"column":50,"offset":4249},"end":{"line":53,"column":126,"offset":4325},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":4200},"end":{"line":53,"column":126,"offset":4325},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Use the ","position":{"start":{"line":55,"column":4,"offset":4330},"end":{"line":55,"column":12,"offset":4338},"indent":[]}},{"type":"inlineCode","value":"railgun-nat.conf","position":{"start":{"line":55,"column":12,"offset":4338},"end":{"line":55,"column":30,"offset":4356},"indent":[]}},{"type":"text","value":" configuration file to set the ","position":{"start":{"line":55,"column":30,"offset":4356},"end":{"line":55,"column":61,"offset":4387},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"internal","position":{"start":{"line":55,"column":63,"offset":4389},"end":{"line":55,"column":71,"offset":4397},"indent":[]}}],"position":{"start":{"line":55,"column":61,"offset":4387},"end":{"line":55,"column":73,"offset":4399},"indent":[]}},{"type":"text","value":" addresses of the hosts Railgun will be optimizing (","position":{"start":{"line":55,"column":73,"offset":4399},"end":{"line":55,"column":125,"offset":4451},"indent":[]}},{"type":"inlineCode","value":"localhost:8080","position":{"start":{"line":55,"column":125,"offset":4451},"end":{"line":55,"column":141,"offset":4467},"indent":[]}},{"type":"text","value":", for example). This is important to avoid looping the request outbound to the internet and back to the load balancer only to be forwarded to the origin.","position":{"start":{"line":55,"column":141,"offset":4467},"end":{"line":55,"column":294,"offset":4620},"indent":[]}}],"position":{"start":{"line":55,"column":4,"offset":4330},"end":{"line":55,"column":294,"offset":4620},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":4327},"end":{"line":55,"column":294,"offset":4620},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Ensure no firewall rules are in place that will interfere with traffic between the listener and the origin server.","position":{"start":{"line":56,"column":4,"offset":4624},"end":{"line":56,"column":118,"offset":4738},"indent":[]}}],"position":{"start":{"line":56,"column":4,"offset":4624},"end":{"line":56,"column":118,"offset":4738},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":4621},"end":{"line":56,"column":118,"offset":4738},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Ensure port 2408 is open and passed through the load balancer so that it does not interfere with the TLS connection between the listener and sender.","position":{"start":{"line":57,"column":4,"offset":4742},"end":{"line":57,"column":152,"offset":4890},"indent":[]}}],"position":{"start":{"line":57,"column":4,"offset":4742},"end":{"line":57,"column":152,"offset":4890},"indent":[]}}],"position":{"start":{"line":57,"column":1,"offset":4739},"end":{"line":57,"column":152,"offset":4890},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":4327},"end":{"line":57,"column":152,"offset":4890},"indent":[1,1]}},{"type":"thematicBreak","position":{"start":{"line":59,"column":1,"offset":4892},"end":{"line":59,"column":4,"offset":4895},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Properties","position":{"start":{"line":61,"column":4,"offset":4900},"end":{"line":61,"column":14,"offset":4910},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":4897},"end":{"line":61,"column":14,"offset":4910},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare Load Balancer objects have the following properties:","position":{"start":{"line":63,"column":1,"offset":4912},"end":{"line":63,"column":64,"offset":4975},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":4912},"end":{"line":63,"column":64,"offset":4975},"indent":[]}},{"type":"jsx","value":"<TableWrap>","position":{"start":{"line":65,"column":1,"offset":4977},"end":{"line":65,"column":12,"offset":4988},"indent":[]}},{"type":"jsx","value":"<table>\n  <thead>\n  <tr>\n   <th><strong>Name / type</strong>\n   </th>\n   <th><strong>Description / example</strong>\n   </th>\n   <th><strong>Constraints</strong>\n   </th>\n  </tr>\n  </thead>\n  <tbody>\n  <tr>\n   <td valign=\"top\"><strong>created_on</strong><br/><Type>string</Type> <PropMeta>(date-time)</PropMeta>\n   </td>\n   <td>The creation timestamp for the load balancer.<br/><br/><Code>\"2014-01-01T05:20:00.12345Z\"</Code></td>\n   <td valign=\"top\">Read-only</td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>default_pools</strong>\n<br/>\n<Type>array</Type>\n   </td>\n   <td>A list of Pool IDs ordered by failover priority. Cloudflare steers traffic to the first pool in the list, failing over to the next healthy pool and so on down the list.\n<br/><br/>\nPools defined here are used by default, or when <Code>region_pools</Code> is not configured for a given region.\n<br/><br/>\n<div>","position":{"start":{"line":67,"column":1,"offset":4990},"end":{"line":94,"column":6,"offset":5869},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"code","lang":"json","meta":null,"value":"[\n  \"17b5962d775c646f3f9725cbc7a53df4\",\n  \"9290f38c5d07c2e2f4df57b1f61d4196\",\n  \"00920f38ce07c2e2f4df50b1f61d4194\"\n]","position":{"start":{"line":96,"column":1,"offset":5871},"end":{"line":102,"column":4,"offset":5999},"indent":[1,1,1,1,1,1]}},{"type":"jsx","value":"</div>\n   </td>\n   <td>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>description</strong>\n<br/>\n<Type>string</Type>\n   </td>\n   <td>A user-supplied description of the load balancer\n<br/>\n<Code>\"Load Balancer for www.example.com\"</Code>\n   </td>\n   <td>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>enabled</strong>\n<br/>\n<Type>boolean</Type>\n   </td>\n   <td>Enables the load balancer when set to\n<br/>\n<Code>true</Code>\n   </td>\n   <td>Default value: <Code>true</Code>\n<br/>\nValid values: (<Code>true,false</Code>)\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>fallback_pool</strong>\n<br/>\n<Type>string</Type>\n   </td>\n   <td>The Pool ID for the “pool of last resort,” the pool the load balancer should direct traffic to if all other pools are unhealthy. In most configurations, this is the secondary/passive pool.\n<br/>\n<Code>\"17b5962d775c646f3f9725cbc7a53df4\"</Code>\n   </td>\n   <td valign=\"top\">Max. length: <Code>32</Code>\n<br/>\nRead-only\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>id</strong>\n<br/>\n<Type>string</Type>\n   </td>\n   <td>The load balancer ID\n<br/>\n<Code>\"699d98642c564d2e855e9661899b7252\"</Code>\n   </td>\n   <td>Max. length: <Code>32</Code>\n<br/>\nRead-only\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>modified_on</strong>\n<br/>\n<Type>string</Type> <PropMeta>(date-time)</PropMeta>\n   </td>\n   <td>Timestamp of the last modification to the load balancer configuration\n<br/>\n<Code>\"2014-01-01T05:20:00.12345Z\"</Code>\n   </td>\n   <td valign=\"top\">Read-only\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>name</strong>\n<br/>\n<Type>string</Type>\n   </td>\n   <td>The public DNS hostname of your Cloudflare load balancer.\n<br/><br/>\nIf you have an existing DNS record with the same name as your load balancer, the load balancer will have precedence. The pre-existing DNS record is not used unless you delete the Cloudflare load balancer.\n<br/><br/>\n<Code>\"www.example.com\"</Code>\n   </td>\n   <td>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>pop_pools</strong>\n<br/>\n<Type>object</Type>\n   </td>\n   <td>A mapping of Cloudflare PoP identifiers to a list of pool IDs (ordered by their failover priority) for the PoP (datacenter). Any PoPs not explicitly defined will fall back to using <Code>default_pools</Code>.\n<br/><br/>\n<div>","position":{"start":{"line":104,"column":1,"offset":6001},"end":{"line":196,"column":6,"offset":8290},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"LAX\": [\n    \"de90f38ced07c2e2f4df50b1f61d4194\",\n    \"9290f38c5d07c2e2f4df57b1f61d4196\"\n  ],\n  \"LHR\": [\n    \"abd90f38ced07c2e2f4df50b1f61d4194\",\n    \"f9138c5d07c2e2f4df57b1f61d4196\"\n  ],\n  \"SJC\": [\n    \"00920f38ce07c2e2f4df50b1f61d4194\"\n  ]\n}","position":{"start":{"line":198,"column":1,"offset":8292},"end":{"line":212,"column":4,"offset":8550},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</div>\n   </td>\n   <td>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>proxied</strong>\n<br/>\n<Type>boolean</Type>\n   </td>\n   <td>When set to true, HTTP Proxy mode is enabled; when false, DNS-only mode.\n<br/>\n<Code>true</Code>\n   </td>\n   <td>Default value: <Code>false</Code>\n<br/>\nValid values: (<Code>true,false</Code>)\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>region_pools</strong>\n<br/>\n<Type>object</Type>\n   </td>\n   <td>A mapping of region/country codes to a list of Pool IDs (ordered by their failover priority) for the given region. Any regions not explicitly defined will fall back to using <Code>default_pools</Code>.\n<br/><br/>\n<div>","position":{"start":{"line":214,"column":1,"offset":8552},"end":{"line":240,"column":6,"offset":9215},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"WNAM\": [\n    \"de90f38ced07c2e2f4df50b1f61d4194\",\n    \"9290f38c5d07c2e2f4df57b1f61d4196\"\n  ],\n  \"ENAM\": [\n    \"00920f38ce07c2e2f4df50b1f61d4194\"\n  ]\n}","position":{"start":{"line":242,"column":1,"offset":9217},"end":{"line":252,"column":4,"offset":9383},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</div>\n   </td>\n   <td>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>session_affinity</strong>\n<br/>\n<Type>string</Type>\n   </td>\n   <td>Specifies the type of session affinity the load balancer should use. The default value is <Code>\"\"</Code>, which disables session affinity (as does <Code>\"none\"</Code>).\n<br/>The supported session affinity types are <Code>\"cookie\"</Code> and <Code>\"ip_cookie\"</Code>.\n<br/><br/>\nWhen set to <Code>\"cookie\"</Code>, the first request to a proxied load balancer generates a cookie encoding the origin to which the request will be forwarded.\n<br/><br/>\nSubsequent requests by the same client to the same load balancer will be sent to the origin server encoded by the cookie.\n<br/><br/>\nIf the cookie has expired or the origin server is unhealthy, a new origin server is identified and a new cookie generated. The <Code>\"ip_cookie\"</Code> option behaves the same as <Code>\"cookie\",</Code> except the initial origin selection is stable and based on the client’s IP address.","position":{"start":{"line":254,"column":1,"offset":9385},"end":{"line":271,"column":286,"offset":10396},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"   </td>\n   <td valign=\"top\">Default value: <Code>\"\"</Code>\n<br/>\nValid values: <Code>none</Code>, <Code>cookie</Code>, <Code>ip_cookie</Code>, <Code>\"\"</Code>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>session_affinity_ttl</strong>\n<br/>\n<Type>number</Type>\n   </td>\n   <td>Sets the time to live for this load balancer’s session affinity cookies.\n<br/><br/>\nThis parameter is ignored unless a supported session affinity policy is set.\n<br/><br/>\nThe current default of 23 hours will be used unless <Code>session_affinity_ttl</Code> is explicitly set.\n<br/><br/>\nThe accepted range of values is between 1800 and 604800. Once the expiry time has been reached, subsequent requests may get sent to a different origin server.\n   </td>\n   <td>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>steering_policy</strong><br/><Type>string</Type></td>\n   <td>The traffic steering policy for this load balancer\n<br/>\nThe constraint values have the following effect on traffic steering:\n<ul>\n<li><Code>\"off\"</Code>: enables standard failover</li>\n<li><Code>\"geo\"</Code>: enables Geo Steering</li>\n<li><Code>\"random\"</Code>: selects an available pool at random on failover</li>\n<li><Code>\"dynamic_latency\"</Code>: enables Dynamic Steering</li>\n<li><Code>\"\"</Code>: enables Geo Steering if <Code>region_pools</Code> and/or <Code>pop_pools</Code> is configured; otherwise uses standard failover\n</li>\n</ul>\n   </td>\n   <td valign=\"top\">Default value: <Code>\"\"</Code>\n<br/>\nValid values: <Code>off</Code>,<Code> geo</Code>,<Code> random</Code>,<Code> dynamic_latency</Code>,<Code> \"\"</Code>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>ttl</strong>\n<br/>\n<Type>number</Type>\n   </td>\n   <td>The time to live (TTL) of the DNS entry for the IP address returned by this load balancer. This only applies to load balancers where the proxy mode is DNS-only.\n<br/><br/>\n<Code>30</Code>\n   </td>\n   <td>\n   </td>\n  </tr>\n  </tbody>\n</table>","position":{"start":{"line":273,"column":1,"offset":10398},"end":{"line":327,"column":9,"offset":12333},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</TableWrap>","position":{"start":{"line":329,"column":1,"offset":12335},"end":{"line":329,"column":13,"offset":12347},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":331,"column":1,"offset":12349},"end":{"line":331,"column":4,"offset":12352},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Managing load balancers via the Cloudflare API","position":{"start":{"line":333,"column":4,"offset":12357},"end":{"line":333,"column":50,"offset":12403},"indent":[]}}],"position":{"start":{"line":333,"column":1,"offset":12354},"end":{"line":333,"column":50,"offset":12403},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Endpoint","position":{"start":{"line":335,"column":5,"offset":12409},"end":{"line":335,"column":13,"offset":12417},"indent":[]}}],"position":{"start":{"line":335,"column":1,"offset":12405},"end":{"line":335,"column":13,"offset":12417},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The endpoint for managing load balancers is","position":{"start":{"line":337,"column":1,"offset":12419},"end":{"line":337,"column":44,"offset":12462},"indent":[]}}],"position":{"start":{"line":337,"column":1,"offset":12419},"end":{"line":337,"column":44,"offset":12462},"indent":[]}},{"type":"code","lang":"txt","meta":null,"value":"zones/:identifier/load_balancers","position":{"start":{"line":339,"column":1,"offset":12464},"end":{"line":341,"column":4,"offset":12507},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Commands","position":{"start":{"line":343,"column":5,"offset":12513},"end":{"line":343,"column":13,"offset":12521},"indent":[]}}],"position":{"start":{"line":343,"column":1,"offset":12509},"end":{"line":343,"column":13,"offset":12521},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Cloudflare API supports the following commands for load balancers. (Examples are given for the user-level endpoint but apply to the account-level endpoint as well.) For detailed instruction, see ","position":{"start":{"line":345,"column":1,"offset":12523},"end":{"line":345,"column":200,"offset":12722},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"https://api.cloudflare.com/#load-balancers-properties","children":[{"type":"text","value":"Cloudflare API v4: Load Balancers","position":{"start":{"line":345,"column":202,"offset":12724},"end":{"line":345,"column":235,"offset":12757},"indent":[]}}],"position":{"start":{"line":345,"column":201,"offset":12723},"end":{"line":345,"column":291,"offset":12813},"indent":[]}}],"position":{"start":{"line":345,"column":200,"offset":12722},"end":{"line":345,"column":292,"offset":12814},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":345,"column":292,"offset":12814},"end":{"line":345,"column":293,"offset":12815},"indent":[]}}],"position":{"start":{"line":345,"column":1,"offset":12523},"end":{"line":345,"column":293,"offset":12815},"indent":[]}},{"type":"jsx","value":"<TableWrap>","position":{"start":{"line":347,"column":1,"offset":12817},"end":{"line":347,"column":12,"offset":12828},"indent":[]}},{"type":"jsx","value":"<table>\n  <thead>\n  <tr>\n   <th><strong>Command</strong>\n   </th>\n   <th><strong>Method</strong>\n   </th>\n   <th><strong>Endpoint</strong>\n   </th>\n  </tr>\n  </thead>\n  <tbody>\n  <tr>\n   <td>Create Load Balancer\n   </td>\n   <td><Code>GET</Code>\n   </td>\n   <td><Code>/zones/:identifier/load_balancers</Code>\n   </td>\n  </tr>\n  <tr>\n   <td>Delete Load Balancer\n   </td>\n   <td><Code>DELETE</Code>\n   </td>\n   <td><Code>/zones/:identifier/load_balancers/:identifier</Code>\n   </td>\n  </tr>\n  <tr>\n   <td>List Load Balancers\n   </td>\n   <td><Code>GET</Code>\n   </td>\n   <td><Code>/zones/:identifier/load_balancers</Code>\n   </td>\n  </tr>\n  <tr>\n   <td>Load Balancer Details\n   </td>\n   <td><Code>POST</Code>\n   </td>\n   <td><Code>/zones/:identifier/load_balancers/:identifier</Code>\n   </td>\n  </tr>\n  <tr>\n   <td>Update Load Balancer\n   </td>\n   <td><Code>PUT</Code>\n   </td>\n   <td><Code>/zones/:identifier/load_balancers/:identifier</Code>\n   </td>\n  </tr>\n  </tbody>\n</table>","position":{"start":{"line":349,"column":1,"offset":12830},"end":{"line":402,"column":9,"offset":13806},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</TableWrap>","position":{"start":{"line":404,"column":1,"offset":13808},"end":{"line":404,"column":13,"offset":13820},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"order\":11}","position":{"start":{"line":407,"column":1,"offset":13823},"end":{"line":407,"column":41,"offset":13863},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":407,"column":41,"offset":13863}}}}},{"node":{"fields":{"slug":"/understand-basics/proxy-modes"},"frontmatter":{"order":15,"title":"","summary":null,"demo":null,"tags":null},"headings":[{"value":"Proxy modes"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Proxy modes","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":14,"offset":14},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":14,"offset":14},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":4,"column":4,"offset":19},"end":{"line":4,"column":12,"offset":27},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":16},"end":{"line":4,"column":12,"offset":27},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Load Balancing supports DNS-only and HTTP proxy modes, outlined below.","position":{"start":{"line":6,"column":1,"offset":29},"end":{"line":6,"column":71,"offset":99},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":29},"end":{"line":6,"column":71,"offset":99},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":8,"column":1,"offset":101},"end":{"line":8,"column":4,"offset":104},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"HTTP Proxy mode","position":{"start":{"line":10,"column":4,"offset":109},"end":{"line":10,"column":19,"offset":124},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":106},"end":{"line":10,"column":19,"offset":124},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In HTTP Proxy mode, load balancers have an ","position":{"start":{"line":12,"column":1,"offset":126},"end":{"line":12,"column":44,"offset":169},"indent":[]}},{"type":"link","title":null,"url":"https://support.cloudflare.com/hc/articles/360017421192#whatdoestheautomaticttlvaluemean","children":[{"type":"text","value":"automatic TTL","position":{"start":{"line":12,"column":45,"offset":170},"end":{"line":12,"column":58,"offset":183},"indent":[]}}],"position":{"start":{"line":12,"column":44,"offset":169},"end":{"line":12,"column":149,"offset":274},"indent":[]}},{"type":"text","value":". Cloudflare will announce Cloudflare IP addresses externally, but will protect (mask) your origin server IP addresses. Any changes to your load balancer will propagate within seconds inside Cloudflare, including any failover events.","position":{"start":{"line":12,"column":149,"offset":274},"end":{"line":12,"column":382,"offset":507},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":126},"end":{"line":12,"column":382,"offset":507},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In the ","position":{"start":{"line":14,"column":1,"offset":509},"end":{"line":14,"column":8,"offset":516},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Load Balancing","position":{"start":{"line":14,"column":10,"offset":518},"end":{"line":14,"column":24,"offset":532},"indent":[]}}],"position":{"start":{"line":14,"column":8,"offset":516},"end":{"line":14,"column":26,"offset":534},"indent":[]}},{"type":"text","value":" dashboard, an orange cloud icon indicates HTTP Proxy mode.","position":{"start":{"line":14,"column":26,"offset":534},"end":{"line":14,"column":85,"offset":593},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":509},"end":{"line":14,"column":85,"offset":593},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Setting the load balancer to HTTP Proxy mode offers the following benefits:","position":{"start":{"line":16,"column":1,"offset":595},"end":{"line":16,"column":76,"offset":670},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":595},"end":{"line":16,"column":76,"offset":670},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Failover will be faster, as external DNS caches that don't respect short DNS TTLs will not impact failover performance.","position":{"start":{"line":18,"column":3,"offset":674},"end":{"line":18,"column":122,"offset":793},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":674},"end":{"line":18,"column":122,"offset":793},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":672},"end":{"line":18,"column":122,"offset":793},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Customers on our Free, Pro, and Business plans who have a Load Balancing subscription may see reduced usage on their bill. The \"automatic\" TTL (five minutes) reduces the number of authoritative queries made against Cloudflare without impacting failover performance.","position":{"start":{"line":19,"column":3,"offset":796},"end":{"line":19,"column":268,"offset":1061},"indent":[]}}],"position":{"start":{"line":19,"column":3,"offset":796},"end":{"line":19,"column":268,"offset":1061},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":794},"end":{"line":19,"column":268,"offset":1061},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":672},"end":{"line":19,"column":268,"offset":1061},"indent":[1]}},{"type":"thematicBreak","position":{"start":{"line":21,"column":1,"offset":1063},"end":{"line":21,"column":4,"offset":1066},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"DNS-only mode","position":{"start":{"line":23,"column":4,"offset":1071},"end":{"line":23,"column":17,"offset":1084},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1068},"end":{"line":23,"column":17,"offset":1084},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In DNS-Only mode, you can configure load balancers to set a TTL from 30 seconds to 10 minutes. Cloudflare will serve the addresses of the (healthy) origin servers directly but relies on DNS resolvers respecting the short TTL to re-query Cloudflare's DNS for an updated list of healthy addresses.","position":{"start":{"line":25,"column":1,"offset":1086},"end":{"line":25,"column":296,"offset":1381},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1086},"end":{"line":25,"column":296,"offset":1381},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In the ","position":{"start":{"line":27,"column":1,"offset":1383},"end":{"line":27,"column":8,"offset":1390},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Load Balancing","position":{"start":{"line":27,"column":10,"offset":1392},"end":{"line":27,"column":24,"offset":1406},"indent":[]}}],"position":{"start":{"line":27,"column":8,"offset":1390},"end":{"line":27,"column":26,"offset":1408},"indent":[]}},{"type":"text","value":" dashboard, a gray cloud icon indicates DNS-Only mode.","position":{"start":{"line":27,"column":26,"offset":1408},"end":{"line":27,"column":80,"offset":1462},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1383},"end":{"line":27,"column":80,"offset":1462},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":29,"column":1,"offset":1464},"end":{"line":29,"column":4,"offset":1467},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Important notes","position":{"start":{"line":31,"column":4,"offset":1472},"end":{"line":31,"column":19,"offset":1487},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":1469},"end":{"line":31,"column":19,"offset":1487},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can have HTTP Proxy (orange cloud icon) and DNS-Only (gray cloud icon) domains in the same Load Balancing region, but the traffic routing behavior differs as follows:","position":{"start":{"line":33,"column":1,"offset":1489},"end":{"line":33,"column":171,"offset":1659},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":1489},"end":{"line":33,"column":171,"offset":1659},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Traffic for domains using HTTP Proxy mode is routed based on the data center associated with the user making the request.","position":{"start":{"line":35,"column":3,"offset":1663},"end":{"line":35,"column":124,"offset":1784},"indent":[]}}],"position":{"start":{"line":35,"column":3,"offset":1663},"end":{"line":35,"column":124,"offset":1784},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":1661},"end":{"line":35,"column":124,"offset":1784},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Traffic for domains using DNS-Only mode is routed based on the data center associated with the user’s recursive resolver (DNS recursor).","position":{"start":{"line":36,"column":3,"offset":1787},"end":{"line":36,"column":139,"offset":1923},"indent":[]}}],"position":{"start":{"line":36,"column":3,"offset":1787},"end":{"line":36,"column":139,"offset":1923},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":1785},"end":{"line":36,"column":139,"offset":1923},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":1661},"end":{"line":36,"column":139,"offset":1923},"indent":[1]}},{"type":"export","value":"export const _frontmatter = {\"order\":15}","position":{"start":{"line":39,"column":1,"offset":1926},"end":{"line":39,"column":41,"offset":1966},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":39,"column":41,"offset":1966}}}}},{"node":{"fields":{"slug":"/understand-basics/load-balancing-logs"},"frontmatter":{"order":19,"title":"","summary":null,"demo":null,"tags":null},"headings":[{"value":"Load Balancing logs"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Load Balancing logs","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":22,"offset":21},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":22,"offset":21},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":3,"column":4,"offset":26},"end":{"line":3,"column":12,"offset":34},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":23},"end":{"line":3,"column":12,"offset":34},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Load Balancing logs provide a historical view of status changes to your origins and how those status changes affect pool health.","position":{"start":{"line":5,"column":1,"offset":36},"end":{"line":5,"column":129,"offset":164},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":36},"end":{"line":5,"column":129,"offset":164},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Load Balancing only logs events that represent a status change for an origin, from healthy to unhealthy or vice versa.","position":{"start":{"line":7,"column":1,"offset":166},"end":{"line":7,"column":119,"offset":284},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":166},"end":{"line":7,"column":119,"offset":284},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":9,"column":1,"offset":286},"end":{"line":9,"column":4,"offset":289},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Properties","position":{"start":{"line":11,"column":4,"offset":294},"end":{"line":11,"column":14,"offset":304},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":291},"end":{"line":11,"column":14,"offset":304},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Health check event objects have the following properties:","position":{"start":{"line":13,"column":1,"offset":306},"end":{"line":13,"column":58,"offset":363},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":306},"end":{"line":13,"column":58,"offset":363},"indent":[]}},{"type":"jsx","value":"<TableWrap>","position":{"start":{"line":15,"column":1,"offset":365},"end":{"line":15,"column":12,"offset":376},"indent":[]}},{"type":"jsx","value":"<table>\n  <thead>\n  <tr>\n   <th><strong>Name / type</strong>\n   </th>\n   <th><strong>Description / example</strong>\n   </th>\n   <th><strong>Constraints</strong>\n   </th>\n  </tr>\n  </thead>\n  <tbody>\n  <tr>\n   <td valign=\"top\"><strong>id</strong>\n<p />\n<em>integer</em>\n   </td>\n   <td>Integer identifier that uniquely represents the health check event.\n<p />\n<code class=\"InlineCode\">2</code>\n   </td>\n   <td valign=\"top\">Default value: <code class=\"InlineCode\">1</code>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>origins</strong>\n<p />\n<em>array</em>\n   </td>\n   <td>An array of objects representing the origin servers associated with the pool.\n<p /><code class=\"InlineCode\">[</code>\n<p />\n<code class=\"InlineCode\">{`{`}</code>\n<p />\n<code class=\"InlineCode\">\"name\": \"some-origin\",</code>\n<p />\n<code class=\"InlineCode\">\"address\": \"198.51.100.4\",</code>\n<p />\n<code class=\"InlineCode\">\"ip\": \"198.51.100.4\",</code>\n<p />\n<code class=\"InlineCode\">\"enabled\": true,</code>\n<p />\n<code class=\"InlineCode\">\"healthy\": true,</code>\n<p />\n<code class=\"InlineCode\">\"failure_reason\": \"No failures\",</code>\n<p />\n<code class=\"InlineCode\">\"changed\": true</code>\n<p />\n<code class=\"InlineCode\">{`}`}</code>\n<p />\n<code class=\"InlineCode\">]</code>\n   </td>\n   <td>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>pool</strong>\n<p />\n<em>object</em>\n   </td>\n   <td>An object that represents the pool for which the health check event was generated.\n<p />\n<code class=\"InlineCode\">{`{`}</code>\n<p />\n<code class=\"InlineCode\">\"id\": \"74bc6a8b9b0dda3d651707a2928bad0c\",</code>\n<p />\n<code class=\"InlineCode\">\"name\": \"some-pool\",</code>\n<p />\n<code class=\"InlineCode\">\"healthy\": true,</code>\n<p />\n<code class=\"InlineCode\">\"changed\": true,</code>\n<p />\n<code class=\"InlineCode\">\"minimum_origins\": 1</code>\n<p />\n<code class=\"InlineCode\">{`}`}</code>\n   </td>\n   <td>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>timestamp</strong>\n<p />\n<em>string (date-time)</em>\n   </td>\n   <td valign=\"top\">The time at which the event was recorded\n<p />\n<code class=\"InlineCode\">\"2014-01-01T05:20:00.12345Z\"</code>\n   </td>\n   <td>\n   </td>\n  </tr>\n  </tbody>\n</table>","position":{"start":{"line":17,"column":1,"offset":378},"end":{"line":109,"column":9,"offset":2533},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</TableWrap>","position":{"start":{"line":111,"column":1,"offset":2535},"end":{"line":111,"column":13,"offset":2547},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":113,"column":1,"offset":2549},"end":{"line":113,"column":4,"offset":2552},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Accessing Load Balancing Logs from the Cloudflare dashboard","position":{"start":{"line":115,"column":4,"offset":2557},"end":{"line":115,"column":63,"offset":2616},"indent":[]}}],"position":{"start":{"line":115,"column":1,"offset":2554},"end":{"line":115,"column":63,"offset":2616},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Load Balancing Logs are available from the ","position":{"start":{"line":117,"column":1,"offset":2618},"end":{"line":117,"column":44,"offset":2661},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Traffic","position":{"start":{"line":117,"column":46,"offset":2663},"end":{"line":117,"column":53,"offset":2670},"indent":[]}}],"position":{"start":{"line":117,"column":44,"offset":2661},"end":{"line":117,"column":55,"offset":2672},"indent":[]}},{"type":"text","value":" app of the Cloudflare dashboard within the ","position":{"start":{"line":117,"column":55,"offset":2672},"end":{"line":117,"column":99,"offset":2716},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Load Balancing Analytics","position":{"start":{"line":117,"column":101,"offset":2718},"end":{"line":117,"column":125,"offset":2742},"indent":[]}}],"position":{"start":{"line":117,"column":99,"offset":2716},"end":{"line":117,"column":127,"offset":2744},"indent":[]}},{"type":"text","value":" tab under the ","position":{"start":{"line":117,"column":127,"offset":2744},"end":{"line":117,"column":142,"offset":2759},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Logs","position":{"start":{"line":117,"column":144,"offset":2761},"end":{"line":117,"column":148,"offset":2765},"indent":[]}}],"position":{"start":{"line":117,"column":142,"offset":2759},"end":{"line":117,"column":150,"offset":2767},"indent":[]}},{"type":"text","value":" submenu. You can filter the logs by Date, Pool Health, Pool, Origin Health, and/or Origin.","position":{"start":{"line":117,"column":150,"offset":2767},"end":{"line":117,"column":241,"offset":2858},"indent":[]}}],"position":{"start":{"line":117,"column":1,"offset":2618},"end":{"line":117,"column":241,"offset":2858},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Click the expansion arrow at the far right of the event to expose more detail, including a list of healthy origins for the pool that was the subject of the event, the health threshold for that pool, Pool ID, and the origin address. Failure events include a reason for the failure and a list of failed origins.","position":{"start":{"line":119,"column":1,"offset":2860},"end":{"line":119,"column":310,"offset":3169},"indent":[]}}],"position":{"start":{"line":119,"column":1,"offset":2860},"end":{"line":119,"column":310,"offset":3169},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":121,"column":1,"offset":3171},"end":{"line":121,"column":4,"offset":3174},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Accessing Load Balancing Logs via the Cloudflare API","position":{"start":{"line":123,"column":4,"offset":3179},"end":{"line":123,"column":56,"offset":3231},"indent":[]}}],"position":{"start":{"line":123,"column":1,"offset":3176},"end":{"line":123,"column":56,"offset":3231},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Commands","position":{"start":{"line":125,"column":5,"offset":3237},"end":{"line":125,"column":13,"offset":3245},"indent":[]}}],"position":{"start":{"line":125,"column":1,"offset":3233},"end":{"line":125,"column":13,"offset":3245},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To list health check events, use the List Health Check Events API endpoint:","position":{"start":{"line":127,"column":1,"offset":3247},"end":{"line":127,"column":76,"offset":3322},"indent":[]}}],"position":{"start":{"line":127,"column":1,"offset":3247},"end":{"line":127,"column":76,"offset":3322},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"GET user/load_balancing_analytics/events","position":{"start":{"line":129,"column":1,"offset":3324},"end":{"line":131,"column":4,"offset":3376},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"For a list of optional parameters, which are useful for filtering log results, see ","position":{"start":{"line":133,"column":1,"offset":3378},"end":{"line":133,"column":84,"offset":3461},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"https://api.cloudflare.com/#load-balancer-healthcheck-events-list-healthcheck-events","children":[{"type":"text","value":"Cloudflare API v4 Documentation: Health Check Events","position":{"start":{"line":133,"column":86,"offset":3463},"end":{"line":133,"column":138,"offset":3515},"indent":[]}}],"position":{"start":{"line":133,"column":85,"offset":3462},"end":{"line":133,"column":225,"offset":3602},"indent":[]}}],"position":{"start":{"line":133,"column":84,"offset":3461},"end":{"line":133,"column":226,"offset":3603},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":133,"column":226,"offset":3603},"end":{"line":133,"column":227,"offset":3604},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":3378},"end":{"line":133,"column":227,"offset":3604},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"order\":19}","position":{"start":{"line":136,"column":1,"offset":3607},"end":{"line":136,"column":41,"offset":3647},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":136,"column":41,"offset":3647}}}}},{"node":{"fields":{"slug":"/understand-basics/region-mapping-api"},"frontmatter":{"order":20,"title":"","summary":null,"demo":null,"tags":null},"headings":[{"value":"Region Mapping API"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Region Mapping API","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":21,"offset":21},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":21,"offset":21},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":4,"column":4,"offset":26},"end":{"line":4,"column":12,"offset":34},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":23},"end":{"line":4,"column":12,"offset":34},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare’s Region Mapping API has several uses:","position":{"start":{"line":6,"column":1,"offset":36},"end":{"line":6,"column":50,"offset":85},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":36},"end":{"line":6,"column":50,"offset":85},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Identify which countries/areas (states/provinces in the case of the U.S. and Canada) are part of a specific Cloudflare Load Balancer region.","position":{"start":{"line":7,"column":3,"offset":88},"end":{"line":7,"column":143,"offset":228},"indent":[]}}],"position":{"start":{"line":7,"column":3,"offset":88},"end":{"line":7,"column":143,"offset":228},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":86},"end":{"line":7,"column":143,"offset":228},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Identify the Cloudflare Load Balancer region for a particular country/area (states/provinces in the case of the U.S. and Canada).","position":{"start":{"line":8,"column":3,"offset":231},"end":{"line":8,"column":132,"offset":360},"indent":[]}}],"position":{"start":{"line":8,"column":3,"offset":231},"end":{"line":8,"column":132,"offset":360},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":229},"end":{"line":8,"column":132,"offset":360},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":86},"end":{"line":8,"column":132,"offset":360},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"The Region Mapping API uses 2-letter ","position":{"start":{"line":10,"column":1,"offset":362},"end":{"line":10,"column":38,"offset":399},"indent":[]}},{"type":"link","title":null,"url":"https://www.iso.org/iso-3166-country-codes.html","children":[{"type":"text","value":"ISO-3166-1 alpha-2 codes","position":{"start":{"line":10,"column":39,"offset":400},"end":{"line":10,"column":63,"offset":424},"indent":[]}}],"position":{"start":{"line":10,"column":38,"offset":399},"end":{"line":10,"column":113,"offset":474},"indent":[]}},{"type":"text","value":" for countries/areas and, in the case of the U.S. and Canada, ISO-3166-2 subdivision codes for states/provinces. Only the U.S. and Canada are provided with these subdivisions.","position":{"start":{"line":10,"column":113,"offset":474},"end":{"line":10,"column":288,"offset":649},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":362},"end":{"line":10,"column":288,"offset":649},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"There are two main optional parameters for the Region Mapping API:","position":{"start":{"line":12,"column":1,"offset":651},"end":{"line":12,"column":67,"offset":717},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":651},"end":{"line":12,"column":67,"offset":717},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"country_code is a string containing a two-letter alpha-2 country code per ISO 3166-1. For example: /load_balancers/regions?country_code=US","position":{"start":{"line":13,"column":3,"offset":720},"end":{"line":13,"column":141,"offset":858},"indent":[]}}],"position":{"start":{"line":13,"column":3,"offset":720},"end":{"line":13,"column":141,"offset":858},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":718},"end":{"line":13,"column":141,"offset":858},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"subdivision_code is a string containing a two-letter subdivision code for the U.S. and Canada per ISO 3166-2. For example: /load_balancers/regions?subdivision_code=CA","position":{"start":{"line":14,"column":3,"offset":861},"end":{"line":14,"column":169,"offset":1027},"indent":[]}}],"position":{"start":{"line":14,"column":3,"offset":861},"end":{"line":14,"column":169,"offset":1027},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":859},"end":{"line":14,"column":169,"offset":1027},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":718},"end":{"line":14,"column":169,"offset":1027},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"For additional details and examples on using the Region Mapping API, see ","position":{"start":{"line":16,"column":1,"offset":1029},"end":{"line":16,"column":74,"offset":1102},"indent":[]}},{"type":"link","title":null,"url":"https://api.cloudflare.com/#load-balancer-region-country-mapping-list-regions","children":[{"type":"text","value":"Cloudflare’s API documentation","position":{"start":{"line":16,"column":75,"offset":1103},"end":{"line":16,"column":105,"offset":1133},"indent":[]}}],"position":{"start":{"line":16,"column":74,"offset":1102},"end":{"line":16,"column":185,"offset":1213},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":16,"column":185,"offset":1213},"end":{"line":16,"column":186,"offset":1214},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":1029},"end":{"line":16,"column":186,"offset":1214},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"List of Load Balancer regions","position":{"start":{"line":18,"column":4,"offset":1219},"end":{"line":18,"column":33,"offset":1248},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1216},"end":{"line":18,"column":33,"offset":1248},"indent":[]}},{"type":"table","align":[null,null],"children":[{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Region code","position":{"start":{"line":20,"column":2,"offset":1251},"end":{"line":20,"column":13,"offset":1262},"indent":[]}}],"position":{"start":{"line":20,"column":2,"offset":1251},"end":{"line":20,"column":13,"offset":1262},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Region name","position":{"start":{"line":20,"column":14,"offset":1263},"end":{"line":20,"column":25,"offset":1274},"indent":[]}}],"position":{"start":{"line":20,"column":14,"offset":1263},"end":{"line":20,"column":25,"offset":1274},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1250},"end":{"line":20,"column":26,"offset":1275},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"EEU","position":{"start":{"line":22,"column":2,"offset":1287},"end":{"line":22,"column":5,"offset":1290},"indent":[]}}],"position":{"start":{"line":22,"column":2,"offset":1287},"end":{"line":22,"column":5,"offset":1290},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Eastern Europe","position":{"start":{"line":22,"column":6,"offset":1291},"end":{"line":22,"column":20,"offset":1305},"indent":[]}}],"position":{"start":{"line":22,"column":6,"offset":1291},"end":{"line":22,"column":20,"offset":1305},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1286},"end":{"line":22,"column":21,"offset":1306},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"ENAM","position":{"start":{"line":23,"column":2,"offset":1308},"end":{"line":23,"column":6,"offset":1312},"indent":[]}}],"position":{"start":{"line":23,"column":2,"offset":1308},"end":{"line":23,"column":6,"offset":1312},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Eastern North America","position":{"start":{"line":23,"column":7,"offset":1313},"end":{"line":23,"column":28,"offset":1334},"indent":[]}}],"position":{"start":{"line":23,"column":7,"offset":1313},"end":{"line":23,"column":28,"offset":1334},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1307},"end":{"line":23,"column":29,"offset":1335},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"ME","position":{"start":{"line":24,"column":2,"offset":1337},"end":{"line":24,"column":4,"offset":1339},"indent":[]}}],"position":{"start":{"line":24,"column":2,"offset":1337},"end":{"line":24,"column":4,"offset":1339},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Middle East","position":{"start":{"line":24,"column":5,"offset":1340},"end":{"line":24,"column":16,"offset":1351},"indent":[]}}],"position":{"start":{"line":24,"column":5,"offset":1340},"end":{"line":24,"column":16,"offset":1351},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1336},"end":{"line":24,"column":17,"offset":1352},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"NAF","position":{"start":{"line":25,"column":2,"offset":1354},"end":{"line":25,"column":5,"offset":1357},"indent":[]}}],"position":{"start":{"line":25,"column":2,"offset":1354},"end":{"line":25,"column":5,"offset":1357},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Northern Africa","position":{"start":{"line":25,"column":6,"offset":1358},"end":{"line":25,"column":21,"offset":1373},"indent":[]}}],"position":{"start":{"line":25,"column":6,"offset":1358},"end":{"line":25,"column":21,"offset":1373},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1353},"end":{"line":25,"column":22,"offset":1374},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"NEAS","position":{"start":{"line":26,"column":2,"offset":1376},"end":{"line":26,"column":6,"offset":1380},"indent":[]}}],"position":{"start":{"line":26,"column":2,"offset":1376},"end":{"line":26,"column":6,"offset":1380},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Northeast Asia","position":{"start":{"line":26,"column":7,"offset":1381},"end":{"line":26,"column":21,"offset":1395},"indent":[]}}],"position":{"start":{"line":26,"column":7,"offset":1381},"end":{"line":26,"column":21,"offset":1395},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1375},"end":{"line":26,"column":22,"offset":1396},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"NSAM","position":{"start":{"line":27,"column":2,"offset":1398},"end":{"line":27,"column":6,"offset":1402},"indent":[]}}],"position":{"start":{"line":27,"column":2,"offset":1398},"end":{"line":27,"column":6,"offset":1402},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Northern South America","position":{"start":{"line":27,"column":7,"offset":1403},"end":{"line":27,"column":29,"offset":1425},"indent":[]}}],"position":{"start":{"line":27,"column":7,"offset":1403},"end":{"line":27,"column":29,"offset":1425},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1397},"end":{"line":27,"column":30,"offset":1426},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"OC","position":{"start":{"line":28,"column":2,"offset":1428},"end":{"line":28,"column":4,"offset":1430},"indent":[]}}],"position":{"start":{"line":28,"column":2,"offset":1428},"end":{"line":28,"column":4,"offset":1430},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Oceania","position":{"start":{"line":28,"column":5,"offset":1431},"end":{"line":28,"column":12,"offset":1438},"indent":[]}}],"position":{"start":{"line":28,"column":5,"offset":1431},"end":{"line":28,"column":12,"offset":1438},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1427},"end":{"line":28,"column":13,"offset":1439},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"SAF","position":{"start":{"line":29,"column":2,"offset":1441},"end":{"line":29,"column":5,"offset":1444},"indent":[]}}],"position":{"start":{"line":29,"column":2,"offset":1441},"end":{"line":29,"column":5,"offset":1444},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Southern Africa","position":{"start":{"line":29,"column":6,"offset":1445},"end":{"line":29,"column":21,"offset":1460},"indent":[]}}],"position":{"start":{"line":29,"column":6,"offset":1445},"end":{"line":29,"column":21,"offset":1460},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1440},"end":{"line":29,"column":22,"offset":1461},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"SAS","position":{"start":{"line":30,"column":2,"offset":1463},"end":{"line":30,"column":5,"offset":1466},"indent":[]}}],"position":{"start":{"line":30,"column":2,"offset":1463},"end":{"line":30,"column":5,"offset":1466},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Southern Asia","position":{"start":{"line":30,"column":6,"offset":1467},"end":{"line":30,"column":19,"offset":1480},"indent":[]}}],"position":{"start":{"line":30,"column":6,"offset":1467},"end":{"line":30,"column":19,"offset":1480},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":1462},"end":{"line":30,"column":20,"offset":1481},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"SEAS","position":{"start":{"line":31,"column":2,"offset":1483},"end":{"line":31,"column":6,"offset":1487},"indent":[]}}],"position":{"start":{"line":31,"column":2,"offset":1483},"end":{"line":31,"column":6,"offset":1487},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Southeast Asia","position":{"start":{"line":31,"column":7,"offset":1488},"end":{"line":31,"column":21,"offset":1502},"indent":[]}}],"position":{"start":{"line":31,"column":7,"offset":1488},"end":{"line":31,"column":21,"offset":1502},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":1482},"end":{"line":31,"column":22,"offset":1503},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"SSAM","position":{"start":{"line":32,"column":2,"offset":1505},"end":{"line":32,"column":6,"offset":1509},"indent":[]}}],"position":{"start":{"line":32,"column":2,"offset":1505},"end":{"line":32,"column":6,"offset":1509},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Southern South America","position":{"start":{"line":32,"column":7,"offset":1510},"end":{"line":32,"column":29,"offset":1532},"indent":[]}}],"position":{"start":{"line":32,"column":7,"offset":1510},"end":{"line":32,"column":29,"offset":1532},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":1504},"end":{"line":32,"column":30,"offset":1533},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"WEU","position":{"start":{"line":33,"column":2,"offset":1535},"end":{"line":33,"column":5,"offset":1538},"indent":[]}}],"position":{"start":{"line":33,"column":2,"offset":1535},"end":{"line":33,"column":5,"offset":1538},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Western Europe","position":{"start":{"line":33,"column":6,"offset":1539},"end":{"line":33,"column":20,"offset":1553},"indent":[]}}],"position":{"start":{"line":33,"column":6,"offset":1539},"end":{"line":33,"column":20,"offset":1553},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":1534},"end":{"line":33,"column":21,"offset":1554},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"WNAM","position":{"start":{"line":34,"column":2,"offset":1556},"end":{"line":34,"column":6,"offset":1560},"indent":[]}}],"position":{"start":{"line":34,"column":2,"offset":1556},"end":{"line":34,"column":6,"offset":1560},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Western North America","position":{"start":{"line":34,"column":7,"offset":1561},"end":{"line":34,"column":28,"offset":1582},"indent":[]}}],"position":{"start":{"line":34,"column":7,"offset":1561},"end":{"line":34,"column":28,"offset":1582},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":1555},"end":{"line":34,"column":29,"offset":1583},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1250},"end":{"line":34,"column":29,"offset":1583},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"export","value":"export const _frontmatter = {\"order\":20}","position":{"start":{"line":37,"column":1,"offset":1586},"end":{"line":37,"column":41,"offset":1626},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":37,"column":41,"offset":1626}}}}},{"node":{"fields":{"slug":"/understand-basics/monitors"},"frontmatter":{"order":18,"title":"","summary":null,"demo":null,"tags":null},"headings":[{"value":"Monitors"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Monitors","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":11,"offset":11},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":11,"offset":11},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":4,"column":4,"offset":16},"end":{"line":4,"column":12,"offset":24},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":13},"end":{"line":4,"column":12,"offset":24},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare health checks track the health of pools. They are configured through monitors, which define what type of health check to run and how frequently to run them. Cloudflare monitors your servers from each of our data centers.","position":{"start":{"line":6,"column":1,"offset":26},"end":{"line":6,"column":232,"offset":257},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":26},"end":{"line":6,"column":232,"offset":257},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Health checks that result in a status change for an origin server are recorded as events in the Load Balancing event logs. You can create, attach, and configure health checks from either the Load Balancing dashboard or the Cloudflare API.","position":{"start":{"line":8,"column":1,"offset":259},"end":{"line":8,"column":239,"offset":497},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":259},"end":{"line":8,"column":239,"offset":497},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":10,"column":1,"offset":499},"end":{"line":10,"column":4,"offset":502},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Important notes","position":{"start":{"line":12,"column":4,"offset":507},"end":{"line":12,"column":19,"offset":522},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":504},"end":{"line":12,"column":19,"offset":522},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Availability monitoring checks the health of origin servers every 15 seconds","position":{"start":{"line":14,"column":5,"offset":528},"end":{"line":14,"column":81,"offset":604},"indent":[]}}],"position":{"start":{"line":14,"column":3,"offset":526},"end":{"line":14,"column":83,"offset":606},"indent":[]}},{"type":"text","value":". It reports results via email notifications and the Cloudflare API.","position":{"start":{"line":14,"column":83,"offset":606},"end":{"line":14,"column":151,"offset":674},"indent":[]}}],"position":{"start":{"line":14,"column":3,"offset":526},"end":{"line":14,"column":151,"offset":674},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":524},"end":{"line":14,"column":151,"offset":674},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"The default retry rate is 5 retries/second","position":{"start":{"line":15,"column":5,"offset":679},"end":{"line":15,"column":47,"offset":721},"indent":[]}}],"position":{"start":{"line":15,"column":3,"offset":677},"end":{"line":15,"column":49,"offset":723},"indent":[]}},{"type":"text","value":" and is completely configurable. We do not recommend increasing the retry rate significantly. Retries use exponential backoff (1, 2, 4, 8, 16 seconds by default).","position":{"start":{"line":15,"column":49,"offset":723},"end":{"line":15,"column":211,"offset":885},"indent":[]}}],"position":{"start":{"line":15,"column":3,"offset":677},"end":{"line":15,"column":211,"offset":885},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":675},"end":{"line":15,"column":211,"offset":885},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"You can configure","position":{"start":{"line":16,"column":5,"offset":890},"end":{"line":16,"column":22,"offset":907},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":888},"end":{"line":16,"column":24,"offset":909},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":16,"column":24,"offset":909},"end":{"line":16,"column":25,"offset":910},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"monitoring for specific URLs","position":{"start":{"line":16,"column":27,"offset":912},"end":{"line":16,"column":55,"offset":940},"indent":[]}}],"position":{"start":{"line":16,"column":25,"offset":910},"end":{"line":16,"column":57,"offset":942},"indent":[]}},{"type":"text","value":" by sending periodic HTTP requests to the load balancer, taking advantage of customizable intervals, timeouts, and status codes. Once an origin server is marked unhealthy, multi-region failover reroutes traffic to the next available server in failover order.","position":{"start":{"line":16,"column":57,"offset":942},"end":{"line":16,"column":315,"offset":1200},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":888},"end":{"line":16,"column":315,"offset":1200},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":886},"end":{"line":16,"column":315,"offset":1200},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Load Balancing monitors use the following HTTP user-agent","position":{"start":{"line":17,"column":5,"offset":1205},"end":{"line":17,"column":62,"offset":1262},"indent":[]}}],"position":{"start":{"line":17,"column":3,"offset":1203},"end":{"line":17,"column":64,"offset":1264},"indent":[]}},{"type":"text","value":": ","position":{"start":{"line":17,"column":64,"offset":1264},"end":{"line":17,"column":66,"offset":1266},"indent":[]}},{"type":"inlineCode","value":"\"Mozilla/5.0 (compatible; Cloudflare-Traffic-Manager/1.0; +https://www.cloudflare.com/traffic-manager/; pool-id: $poolid)\"","position":{"start":{"line":17,"column":66,"offset":1266},"end":{"line":17,"column":190,"offset":1390},"indent":[]}},{"type":"text","value":". The ","position":{"start":{"line":17,"column":190,"offset":1390},"end":{"line":17,"column":196,"offset":1396},"indent":[]}},{"type":"inlineCode","value":"$poolid","position":{"start":{"line":17,"column":196,"offset":1396},"end":{"line":17,"column":205,"offset":1405},"indent":[]}},{"type":"text","value":" contains the first 16 characters of the Load Balancing pool that is the target of the health check.","position":{"start":{"line":17,"column":205,"offset":1405},"end":{"line":17,"column":305,"offset":1505},"indent":[]}}],"position":{"start":{"line":17,"column":3,"offset":1203},"end":{"line":17,"column":305,"offset":1505},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":1201},"end":{"line":17,"column":305,"offset":1505},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"To prevent health checks from failing","position":{"start":{"line":18,"column":5,"offset":1510},"end":{"line":18,"column":42,"offset":1547},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":1508},"end":{"line":18,"column":44,"offset":1549},"indent":[]}},{"type":"text","value":", and to secure user infrastructure against spoofed checks from bad actors, we recommend the following:","position":{"start":{"line":18,"column":44,"offset":1549},"end":{"line":18,"column":147,"offset":1652},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":1508},"end":{"line":18,"column":147,"offset":1652},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Only accept connections to hosts listed in the ","position":{"start":{"line":19,"column":5,"offset":1657},"end":{"line":19,"column":52,"offset":1704},"indent":[]}},{"type":"link","title":null,"url":"https://www.cloudflare.com/ips/","children":[{"type":"text","value":"Cloudflare IP ranges","position":{"start":{"line":19,"column":53,"offset":1705},"end":{"line":19,"column":73,"offset":1725},"indent":[]}}],"position":{"start":{"line":19,"column":52,"offset":1704},"end":{"line":19,"column":107,"offset":1759},"indent":[]}},{"type":"text","value":" in your firewall or web-server.","position":{"start":{"line":19,"column":107,"offset":1759},"end":{"line":19,"column":139,"offset":1791},"indent":[]}}],"position":{"start":{"line":19,"column":5,"offset":1657},"end":{"line":19,"column":139,"offset":1791},"indent":[]}}],"position":{"start":{"line":19,"column":3,"offset":1655},"end":{"line":19,"column":139,"offset":1791},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Use Cloudflare's user agent (see below) to reject HTTP requests that don't come from these ranges.","position":{"start":{"line":20,"column":5,"offset":1796},"end":{"line":20,"column":103,"offset":1894},"indent":[]}}],"position":{"start":{"line":20,"column":5,"offset":1796},"end":{"line":20,"column":103,"offset":1894},"indent":[]}}],"position":{"start":{"line":20,"column":3,"offset":1794},"end":{"line":20,"column":103,"offset":1894},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Ensure that your firewall or web server does not block or rate limit Cloudflare health checks.","position":{"start":{"line":21,"column":5,"offset":1899},"end":{"line":21,"column":99,"offset":1993},"indent":[]}}],"position":{"start":{"line":21,"column":5,"offset":1899},"end":{"line":21,"column":99,"offset":1993},"indent":[]}}],"position":{"start":{"line":21,"column":3,"offset":1897},"end":{"line":21,"column":99,"offset":1993},"indent":[]}}],"position":{"start":{"line":19,"column":3,"offset":1655},"end":{"line":21,"column":99,"offset":1993},"indent":[3,3]}}],"position":{"start":{"line":18,"column":1,"offset":1506},"end":{"line":21,"column":99,"offset":1993},"indent":[1,1,1]}}],"position":{"start":{"line":14,"column":1,"offset":524},"end":{"line":21,"column":99,"offset":1993},"indent":[1,1,1,1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":23,"column":1,"offset":1995},"end":{"line":23,"column":4,"offset":1998},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Properties","position":{"start":{"line":25,"column":4,"offset":2003},"end":{"line":25,"column":14,"offset":2013},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":2000},"end":{"line":25,"column":14,"offset":2013},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Monitors support a great deal of customization and have the following properties:","position":{"start":{"line":27,"column":1,"offset":2015},"end":{"line":27,"column":82,"offset":2096},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":2015},"end":{"line":27,"column":82,"offset":2096},"indent":[]}},{"type":"jsx","value":"<TableWrap>\n  <table>\n    <thead>\n      <tr>\n        <th>Name <Type>/type</Type></th>\n        <th>Description <Type>/example</Type></th>\n        <th>Constraints</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td><strong><Code>port</Code></strong><br/><Type>integer</Type></td>\n        <td>\n          <p>Port number to connect to for the health check. Required for TCP checks. HTTP and HTTPS checks should only define the port when using a non-standard port (HTTP: default 80, HTTPS: default 443).</p>\n          <div><Code>8080</Code></div>\n        </td>\n        <td>\n          <ul>\n            <li>default value: 0</li>\n          </ul>\n        </td>\n      </tr>\n      <tr>\n        <td><strong><Code>method</Code></strong><br/><Type>string</Type></td>\n        <td>\n          <p>The method to use for the health check. This defaults to 'GET' for HTTP/HTTPS based checks and 'connection_established' for TCP based health checks.</p>\n          <div><Code>\"GET\"</Code></div>\n        </td>\n        <td>\n          <ul>\n            <li>default value: GET</li>\n          </ul>\n        </td>\n      </tr>\n      <tr>\n        <td><strong><Code>timeout</Code></strong><br/><Type>integer</Type></td>\n        <td>\n          <p>The timeout (in seconds) before marking the health check as failed</p>\n          <div><Code>3</Code></div>\n        </td>\n        <td>\n          <ul>\n            <li>default value: 5</li>\n          </ul>\n        </td>\n      </tr>\n      <tr>\n        <td><strong><Code>path</Code></strong><br/><Type>string</Type></td>\n        <td>\n          <p>The endpoint path to health check against. This parameter is only valid for HTTP and HTTPS monitors.</p>\n          <div><Code>\"/health\"</Code></div>\n        </td>\n        <td>\n          <ul>\n            <li>default value: /</li>\n          </ul>\n        </td>\n      </tr>\n      <tr>\n        <td><strong><Code>interval</Code></strong><br/><Type>integer</Type></td>\n        <td>\n          <p>The interval between each health check. Shorter intervals may improve failover time, but will increase load on the origins as we check from multiple locations.</p>\n          <div><Code>90</Code></div>\n        </td>\n        <td>\n          <ul>\n            <li>default value: 60</li>\n          </ul>\n        </td>\n      </tr>\n      <tr>\n        <td><strong><Code>retries</Code></strong><br/><Type>integer</Type></td>\n        <td>\n          <p>The number of retries to attempt in case of a timeout before marking the origin as unhealthy. Retries are attempted immediately.</p>\n          <div><Code>0</Code></div>\n        </td>\n        <td>\n          <ul>\n            <li>default value: 2</li>\n          </ul>\n        </td>\n      </tr>\n      <tr>\n        <td><strong><Code>follow_redirects</Code></strong><br/><Type>boolean</Type></td>\n        <td>\n          <p>Follow redirects if returned by the origin. This parameter is only valid for HTTP and HTTPS monitors.</p>\n          <div><Code>true</Code></div>\n        </td>\n        <td>\n          <ul>\n            <li>default value: false</li>\n            <li>valid values: (true,false)</li>\n          </ul>\n        </td>\n      </tr>\n      <tr>\n        <td><strong><Code>probe_zone</Code></strong><br/><Type>string</Type></td>\n        <td>\n          <p>(known as Simulate Zone in the UI) pushes a request from Cloudflare Health Monitors through the Cloudflare stack as if it were a real visitor request to help analyze behavior or validate a configuration.  It allows you to emulate the specified zone while probing.</p>\n        </td>\n        <td>\n        </td>\n      </tr>\n      <tr>\n        <td><strong><Code>expected_body</Code></strong><br/><Type>string</Type></td>\n        <td>\n          <p>A case-insensitive sub-string to look for in the response body. If this string is not found, the origin will be marked as unhealthy. This parameter is only valid for HTTP and HTTPS monitors.</p>\n<Aside type=\"info\">","position":{"start":{"line":29,"column":1,"offset":2098},"end":{"line":136,"column":20,"offset":6007},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The sub-string must appear within the first 10KiB of your response body.","position":{"start":{"line":138,"column":1,"offset":6009},"end":{"line":138,"column":73,"offset":6081},"indent":[]}}],"position":{"start":{"line":138,"column":1,"offset":6009},"end":{"line":138,"column":73,"offset":6081},"indent":[]}},{"type":"jsx","value":"</Aside>\n        </td>\n        <td><div><Code>\"alive\"</Code></div></td>\n      </tr>\n      <tr>\n        <td><strong><Code>header</Code></strong><br/><Type>object</Type></td>\n        <td>\n          <p>The HTTP request headers to send in the health check. It is recommended you set a Host header by default. The User-Agent header cannot be overridden. This parameter is only valid for HTTP and HTTPS monitors.</p>\n        </td>\n        <td><div>","position":{"start":{"line":140,"column":1,"offset":6083},"end":{"line":149,"column":18,"offset":6525},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"Host\": [\n    \"example.com\"\n  ],\n  \"X-App-ID\": [\n    \"abc123\"\n  ]\n}","position":{"start":{"line":151,"column":1,"offset":6527},"end":{"line":160,"column":4,"offset":6610},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</div></td>\n      </tr>\n      <tr>\n        <td><strong><Code>allow_insecure</Code></strong><br/><Type>boolean</Type></td>\n        <td>\n          <p>Do not validate the certificate when monitor use HTTPS. This parameter is currently only valid for HTTP and HTTPS monitors.</p>\n          <div><Code>true</Code></div>\n        </td>\n        <td>\n          <ul>\n            <li>default value: false</li>\n            <li>valid values: (true,false)</li>\n          </ul>\n        </td>\n      </tr>\n      <tr>\n        <td><strong><Code>modified_on</Code></strong><br/><Type>string (date-time)</Type></td>\n        <td>\n          <p>Last modification time</p>\n          <div><Code>\"2014-01-01T05:20:00.12345Z\"</Code></div>\n        </td>\n        <td>\n          <ul>\n            <li>read only</li>\n          </ul>\n        </td>\n      </tr>\n      <tr>\n        <td><strong><Code>created_on</Code></strong><br/><Type>string (date-time)</Type></td>\n        <td>\n          <p>Creation time</p>\n          <div><Code>\"2014-01-01T05:20:00.12345Z\"</Code></div>\n        </td>\n        <td>\n          <ul>\n            <li>read only</li>\n          </ul>\n        </td>\n      </tr>\n      <tr>\n        <td><strong><Code>type</Code></strong><br/><Type>string</Type></td>\n        <td>\n          <p>The protocol to use for the health check. Currently supported protocols are 'HTTP','HTTPS' and 'TCP'.</p>\n          <div><Code>\"https\"</Code></div>\n        </td>\n        <td>\n          <ul>\n            <li>default value: http</li>\n          </ul>\n        </td>\n      </tr>\n      <tr>\n        <td><strong><Code>id</Code></strong><br/><Type>string</Type></td>\n        <td>\n          <p>API item identifier tag</p>\n          <div><Code>\"f1aba936b94213e5b8dca0c0dbf1f9cc\"</Code></div>\n        </td>\n        <td>\n          <ul>\n            <li>\n              max length:\n              32\n            </li>\n            <li>read only</li>\n          </ul>\n        </td>\n      </tr>\n      <tr>\n        <td><strong><Code>description</Code></strong><br/><Type>string</Type></td>\n        <td>\n          <p>Object description</p>\n          <div><Code>\"Login page monitor\"</Code></div>\n        </td>\n        <td>\n          <ul></ul>\n        </td>\n      </tr>\n      <tr>\n        <td><strong><Code>expected_codes</Code></strong><br/><Type>string</Type></td>\n        <td>\n          <p>The expected HTTP response code or code range of the health check. This parameter is only valid for HTTP and HTTPS monitors.</p>\n          <div><Code>\"2xx\"</Code></div>\n        </td>\n        <td>\n          <ul>\n            <li>default value: 200</li>\n          </ul>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</TableWrap>","position":{"start":{"line":162,"column":1,"offset":6612},"end":{"line":253,"column":13,"offset":9275},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":255,"column":1,"offset":9277},"end":{"line":255,"column":4,"offset":9280},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Managing monitors via the Load Balancing dashboard","position":{"start":{"line":257,"column":4,"offset":9285},"end":{"line":257,"column":54,"offset":9335},"indent":[]}}],"position":{"start":{"line":257,"column":1,"offset":9282},"end":{"line":257,"column":54,"offset":9335},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Use the ","position":{"start":{"line":259,"column":1,"offset":9337},"end":{"line":259,"column":9,"offset":9345},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create Load Balancer","position":{"start":{"line":259,"column":11,"offset":9347},"end":{"line":259,"column":31,"offset":9367},"indent":[]}}],"position":{"start":{"line":259,"column":9,"offset":9345},"end":{"line":259,"column":33,"offset":9369},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":259,"column":33,"offset":9369},"end":{"line":259,"column":37,"offset":9373},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Edit Load Balancer","position":{"start":{"line":259,"column":39,"offset":9375},"end":{"line":259,"column":57,"offset":9393},"indent":[]}}],"position":{"start":{"line":259,"column":37,"offset":9373},"end":{"line":259,"column":59,"offset":9395},"indent":[]}},{"type":"text","value":" panels in the Load Balancing dashboard to manage health check monitors. For step-by-step guidance, see ","position":{"start":{"line":259,"column":59,"offset":9395},"end":{"line":259,"column":163,"offset":9499},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"/create-load-balancer-ui#create-attach-and-configure-health-checks","children":[{"type":"text","value":"Create, attach, and configuring health checks","position":{"start":{"line":259,"column":165,"offset":9501},"end":{"line":259,"column":210,"offset":9546},"indent":[]}}],"position":{"start":{"line":259,"column":164,"offset":9500},"end":{"line":259,"column":279,"offset":9615},"indent":[]}}],"position":{"start":{"line":259,"column":163,"offset":9499},"end":{"line":259,"column":280,"offset":9616},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":259,"column":280,"offset":9616},"end":{"line":259,"column":281,"offset":9617},"indent":[]}}],"position":{"start":{"line":259,"column":1,"offset":9337},"end":{"line":259,"column":281,"offset":9617},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":261,"column":1,"offset":9619},"end":{"line":261,"column":4,"offset":9622},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Managing monitors via the Cloudflare API","position":{"start":{"line":263,"column":4,"offset":9627},"end":{"line":263,"column":44,"offset":9667},"indent":[]}}],"position":{"start":{"line":263,"column":1,"offset":9624},"end":{"line":263,"column":44,"offset":9667},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Use the ","position":{"start":{"line":265,"column":1,"offset":9669},"end":{"line":265,"column":9,"offset":9677},"indent":[]}},{"type":"inlineCode","value":"load_balancers/monitors","position":{"start":{"line":265,"column":9,"offset":9677},"end":{"line":265,"column":34,"offset":9702},"indent":[]}},{"type":"text","value":" endpoint to manage monitors via the Cloudflare API.","position":{"start":{"line":265,"column":34,"offset":9702},"end":{"line":265,"column":86,"offset":9754},"indent":[]}}],"position":{"start":{"line":265,"column":1,"offset":9669},"end":{"line":265,"column":86,"offset":9754},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Commands","position":{"start":{"line":267,"column":5,"offset":9760},"end":{"line":267,"column":13,"offset":9768},"indent":[]}}],"position":{"start":{"line":267,"column":1,"offset":9756},"end":{"line":267,"column":13,"offset":9768},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Cloudflare API supports the following commands for monitors. (Examples are given for user-level endpoint but apply to the account-level endpoint as well.) For more detail, see ","position":{"start":{"line":269,"column":1,"offset":9770},"end":{"line":269,"column":181,"offset":9950},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"https://api.cloudflare.com/#load-balancer-monitors-properties","children":[{"type":"text","value":"Cloudflare API: Load Balancer Monitors","position":{"start":{"line":269,"column":183,"offset":9952},"end":{"line":269,"column":221,"offset":9990},"indent":[]}}],"position":{"start":{"line":269,"column":182,"offset":9951},"end":{"line":269,"column":285,"offset":10054},"indent":[]}}],"position":{"start":{"line":269,"column":181,"offset":9950},"end":{"line":269,"column":286,"offset":10055},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":269,"column":286,"offset":10055},"end":{"line":269,"column":287,"offset":10056},"indent":[]}}],"position":{"start":{"line":269,"column":1,"offset":9770},"end":{"line":269,"column":287,"offset":10056},"indent":[]}},{"type":"jsx","value":"<TableWrap>","position":{"start":{"line":271,"column":1,"offset":10058},"end":{"line":271,"column":12,"offset":10069},"indent":[]}},{"type":"jsx","value":"<table>\n  <thead>\n    <tr>\n      <th><Code>Command</Code></th>\n      <th><Code>Method</Code></th>\n      <th><Code>Endpoint</Code></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>Create Monitor</td>\n      <td><Code>POST</Code></td>\n      <td><Code>user/load_balancers/monitors</Code></td>\n    </tr>\n    <tr>\n      <td>Delete Monitor</td>\n      <td><Code>DELETE</Code></td>\n      <td><Code>user/load_balancers/monitors</Code></td>\n    </tr>\n    <tr>\n      <td>List Monitors</td>\n      <td><Code>GET</Code></td>\n      <td><Code>user/load_balancers/monitors</Code></td>\n    </tr>\n    <tr>\n      <td>Monitor Details</td>\n      <td><Code>GET</Code></td>\n      <td><Code>user/load_balancers/monitors/:identifier</Code></td>\n    </tr>\n    <tr>\n      <td>Update Monitor</td>\n      <td><Code>PUT</Code></td>\n      <td><Code>user/load_balancers/monitors</Code></td>\n    </tr>\n  </tbody>\n</table>","position":{"start":{"line":273,"column":1,"offset":10071},"end":{"line":308,"column":9,"offset":10962},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</TableWrap>","position":{"start":{"line":310,"column":1,"offset":10964},"end":{"line":310,"column":13,"offset":10976},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":312,"column":1,"offset":10978},"end":{"line":312,"column":4,"offset":10981},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Health check integration with PagerDuty","position":{"start":{"line":314,"column":4,"offset":10986},"end":{"line":314,"column":43,"offset":11025},"indent":[]}}],"position":{"start":{"line":314,"column":1,"offset":10983},"end":{"line":314,"column":43,"offset":11025},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To integrate Cloudflare Health Check notifications with PagerDuty, follow the steps outlined in PagerDuty’s ","position":{"start":{"line":316,"column":1,"offset":11027},"end":{"line":316,"column":109,"offset":11135},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"https://www.pagerduty.com/docs/guides/email-integration-guide/","children":[{"type":"text","value":"Email Integration Guide","position":{"start":{"line":316,"column":111,"offset":11137},"end":{"line":316,"column":134,"offset":11160},"indent":[]}}],"position":{"start":{"line":316,"column":110,"offset":11136},"end":{"line":316,"column":199,"offset":11225},"indent":[]}}],"position":{"start":{"line":316,"column":109,"offset":11135},"end":{"line":316,"column":200,"offset":11226},"indent":[]}},{"type":"text","value":". If you do not have a PagerDuty account, you will first need to set that up.","position":{"start":{"line":316,"column":200,"offset":11226},"end":{"line":316,"column":277,"offset":11303},"indent":[]}}],"position":{"start":{"line":316,"column":1,"offset":11027},"end":{"line":316,"column":277,"offset":11303},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"PagerDuty will generate an email address that will create incidents based on emails sent to that address.","position":{"start":{"line":318,"column":1,"offset":11305},"end":{"line":318,"column":106,"offset":11410},"indent":[]}}],"position":{"start":{"line":318,"column":1,"offset":11305},"end":{"line":318,"column":106,"offset":11410},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you already have email integration configured in PagerDuty, you can find the designated email address by going to ","position":{"start":{"line":320,"column":1,"offset":11412},"end":{"line":320,"column":118,"offset":11529},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Configuration > Services > Email","position":{"start":{"line":320,"column":120,"offset":11531},"end":{"line":320,"column":152,"offset":11563},"indent":[]}}],"position":{"start":{"line":320,"column":118,"offset":11529},"end":{"line":320,"column":154,"offset":11565},"indent":[]}},{"type":"text","value":" (under ","position":{"start":{"line":320,"column":154,"offset":11565},"end":{"line":320,"column":162,"offset":11573},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Integrations","position":{"start":{"line":320,"column":164,"offset":11575},"end":{"line":320,"column":176,"offset":11587},"indent":[]}}],"position":{"start":{"line":320,"column":162,"offset":11573},"end":{"line":320,"column":178,"offset":11589},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":320,"column":178,"offset":11589},"end":{"line":320,"column":180,"offset":11591},"indent":[]}}],"position":{"start":{"line":320,"column":1,"offset":11412},"end":{"line":320,"column":180,"offset":11591},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/monitors-1.png","alt":null,"position":{"start":{"line":322,"column":1,"offset":11593},"end":{"line":322,"column":37,"offset":11629},"indent":[]}}],"position":{"start":{"line":322,"column":1,"offset":11593},"end":{"line":322,"column":37,"offset":11629},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When creating the Notifier object, configure the email to go to the PagerDuty integration email. Consequently, whenever a pool or origin goes down, an Incident will be created to capture it.","position":{"start":{"line":324,"column":1,"offset":11631},"end":{"line":324,"column":191,"offset":11821},"indent":[]}}],"position":{"start":{"line":324,"column":1,"offset":11631},"end":{"line":324,"column":191,"offset":11821},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/monitors-2.png","alt":null,"position":{"start":{"line":326,"column":1,"offset":11823},"end":{"line":326,"column":37,"offset":11859},"indent":[]}}],"position":{"start":{"line":326,"column":1,"offset":11823},"end":{"line":326,"column":37,"offset":11859},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"order\":18}","position":{"start":{"line":329,"column":1,"offset":11862},"end":{"line":329,"column":41,"offset":11902},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":329,"column":41,"offset":11902}}}}},{"node":{"fields":{"slug":"/understand-basics/pools"},"frontmatter":{"order":13,"title":"","summary":null,"demo":null,"tags":null},"headings":[{"value":"Pools"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Pools","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":8,"offset":8},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":8,"offset":8},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":4,"column":4,"offset":13},"end":{"line":4,"column":12,"offset":21},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":10},"end":{"line":4,"column":12,"offset":21},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A Cloudflare Load Balancing pool represents a group of origin servers, each identified by their IP address or hostname. You can configure multiple pools, as well as failover priority (Pool A-> Pool B-> Pool C). If you're familiar with DNS terminology, think of a pool as a “record set,” except we only return addresses that are considered healthy. You can attach health checks to individual pools to tailor monitoring for collections of origin servers.","position":{"start":{"line":6,"column":1,"offset":23},"end":{"line":6,"column":453,"offset":475},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":23},"end":{"line":6,"column":453,"offset":475},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":8,"column":1,"offset":477},"end":{"line":8,"column":4,"offset":480},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Important notes","position":{"start":{"line":10,"column":4,"offset":485},"end":{"line":10,"column":19,"offset":500},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":482},"end":{"line":10,"column":19,"offset":500},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When working with pools, note the following:","position":{"start":{"line":12,"column":1,"offset":502},"end":{"line":12,"column":45,"offset":546},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":502},"end":{"line":12,"column":45,"offset":546},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"When adding origin servers to a pool, you can identify the origin by hostname or IP address","position":{"start":{"line":14,"column":3,"offset":550},"end":{"line":14,"column":94,"offset":641},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":548},"end":{"line":14,"column":96,"offset":643},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":14,"column":96,"offset":643},"end":{"line":14,"column":97,"offset":644},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":548},"end":{"line":14,"column":97,"offset":644},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"The order of pools in the load balancer determines the standard failover priority","position":{"start":{"line":16,"column":3,"offset":648},"end":{"line":16,"column":84,"offset":729},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":646},"end":{"line":16,"column":86,"offset":731},"indent":[]}},{"type":"text","value":". When the number of healthy origins in a pool drops below the configured threshold, Load Balancing routes traffic to the next available pool.","position":{"start":{"line":16,"column":86,"offset":731},"end":{"line":16,"column":228,"offset":873},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":646},"end":{"line":16,"column":228,"offset":873},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"By default, pools are ordered by date created","position":{"start":{"line":18,"column":3,"offset":877},"end":{"line":18,"column":48,"offset":922},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":875},"end":{"line":18,"column":50,"offset":924},"indent":[]}},{"type":"text","value":". You can reorder them from the Load Balancing dashboard and via Cloudflare API (use the Update Pools command to set a new ","position":{"start":{"line":18,"column":50,"offset":924},"end":{"line":18,"column":173,"offset":1047},"indent":[]}},{"type":"inlineCode","value":"origins","position":{"start":{"line":18,"column":173,"offset":1047},"end":{"line":18,"column":182,"offset":1056},"indent":[]}},{"type":"text","value":" array).","position":{"start":{"line":18,"column":182,"offset":1056},"end":{"line":18,"column":190,"offset":1064},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":875},"end":{"line":18,"column":190,"offset":1064},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Dynamic Steering uses Round Trip Time (RTT) profiles to determine pool priority","position":{"start":{"line":20,"column":3,"offset":1068},"end":{"line":20,"column":82,"offset":1147},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1066},"end":{"line":20,"column":84,"offset":1149},"indent":[]}},{"type":"text","value":". If there is no RTT data for a pool in a region or colocation center, Load Balancing will use pool order to determine failover priority.","position":{"start":{"line":20,"column":84,"offset":1149},"end":{"line":20,"column":221,"offset":1286},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1066},"end":{"line":20,"column":221,"offset":1286},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Geo Steering directs traffic to pools based on the client’s region or point of presence.","position":{"start":{"line":22,"column":3,"offset":1290},"end":{"line":22,"column":91,"offset":1378},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1288},"end":{"line":22,"column":93,"offset":1380},"indent":[]}},{"type":"text","value":" If there is no Geo Steering configuration for a region or pool, the load balancer will use pool order to determine failover priority.","position":{"start":{"line":22,"column":93,"offset":1380},"end":{"line":22,"column":227,"offset":1514},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1288},"end":{"line":22,"column":227,"offset":1514},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":24,"column":1,"offset":1516},"end":{"line":24,"column":4,"offset":1519},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Properties","position":{"start":{"line":26,"column":4,"offset":1524},"end":{"line":26,"column":14,"offset":1534},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1521},"end":{"line":26,"column":14,"offset":1534},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare Pool objects have the following properties:","position":{"start":{"line":28,"column":1,"offset":1536},"end":{"line":28,"column":55,"offset":1590},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1536},"end":{"line":28,"column":55,"offset":1590},"indent":[]}},{"type":"jsx","value":"<TableWrap>","position":{"start":{"line":30,"column":1,"offset":1592},"end":{"line":30,"column":12,"offset":1603},"indent":[]}},{"type":"jsx","value":"<table>\n  <thead>\n  <tr>\n   <th><strong>Name / type</strong>\n   </th>\n   <th><strong>Description / example</strong>\n   </th>\n   <th><strong>Constraints</strong>\n   </th>\n  </tr>\n  </thead>\n  <tbody>\n  <tr>\n   <td valign=\"top\"><strong>check_regions</strong>\n<p />\n<em>arraynull            </em>\n   </td>\n   <td>A list of regions from which to run health checks. Null means every Cloudflare data center.\n<p />\n<code class=\"InlineCode\">\n[\n<p />\n  \"WEU\",\n<p />\n  \"ENAM\"\n<p />\n]\n</code>\n   </td>\n   <td>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>created_on</strong>\n<p />\n<em>string (date-time)</em>\n   </td>\n   <td>Creation time\n<p />\n<code class=\"InlineCode\">\"2014-01-01T05:20:00.12345Z\"</code>\n   </td>\n   <td valign=\"top\">Read only\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>description</strong>\n<p />\n<em>string</em>\n   </td>\n   <td valign=\"top\">A human-readable description of the pool\n<p />\n<code class=\"InlineCode\">\"This pool is for example.com\"</code>\n   </td>\n   <td>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>enabled</strong>\n<p />\n<em>boolean</em>\n   </td>\n   <td>Set to <code class=\"InlineCode\">true</code> to enable the pool; <code class=\"InlineCode\">false</code>, to disable.\n<p /><p />\nDisabled pools will not receive traffic and are excluded from health checks. Disabling a pool will cause any load balancers associated with the pool to failover to the next pool (if any).\n<p />\n<code class=\"InlineCode\">true</code>\n   </td>\n   <td>Default value: <code class=\"InlineCode\">true</code>\n<p />\nValid values: <code class=\"InlineCode\">true</code>, <code class=\"InlineCode\">false</code>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>id</strong>\n<p />\n<em>string</em>\n   </td>\n   <td valign=\"top\">API item identifier tag for the pool\n<p />\n<code class=\"InlineCode\">\"17b5962d775c646f3f9725cbc7a53df4\"</code>\n   </td>\n   <td>Max. length: 32 bytes\n<p />\nRead only\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>minimum_origins</strong>\n<p />\n<em>integer</em>\n   </td>\n   <td>The minimum number of origins that must be healthy for this pool to serve traffic. If the number of healthy origins falls below this number, the pool will be marked unhealthy and the load balancer will failover to the next available pool.\n<p />\n<code class=\"InlineCode\">2</code>\n   </td>\n   <td>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>modified_on</strong>\n<p />\n<em>string (date-time)</em>\n   </td>\n   <td valign=\"top\">Last modification time\n<p />\n<code class=\"InlineCode\">\"2014-01-01T05:20:00.12345Z\"</code>\n   </td>\n   <td>Read only\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>monitor</strong>\n<p />\n<em>string</em>\n   </td>\n   <td valign=\"top\">The ID of the monitor to use for health checking origins within this pool\n<p />\n<code class=\"InlineCode\">\"f1aba936b94213e5b8dca0c0dbf1f9cc\"</code>\n   </td>\n   <td valign=\"top\">Max. length: 32 bytes\n<p />\nRead only\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>name</strong>\n<p />\n<em>string</em>\n   </td>\n   <td>A short name (tag) for the pool. Only alphanumeric characters, hyphens and underscores are allowed.\n<p />\n<code class=\"InlineCode\">\"primary-dc-1\"</code>\n   </td>\n   <td>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>notification_email</strong>\n<p />\n<em>string</em>\n   </td>\n   <td>The email address to which health status notifications are sent. This can be an individual mailbox or a mailing list.\n<p />\n<code class=\"InlineCode\">\"someone@example.com\"</code>\n   </td>\n   <td>\n   </td>\n  </tr>\n  <tr>\n   <td valign=\"top\"><strong>origins</strong>\n<p />\n<em>array</em>\n   </td>\n   <td>The list of origins within this pool. Traffic directed at this pool is balanced across all currently healthy origins, provided the pool itself is healthy.\n<p />\n<code class=\"InlineCode\">\n[\n<p />\n  {`{`}\n<p />\n    \"name\": \"app-server-1\",\n<p />\n    \"address\": \"0.0.0.0\",\n<p />\n    \"enabled\": true,\n<p />\n    \"weight\": 0.56\n<p />\n  {`}`}\n<p />\n]\n</code>\n   </td>\n   <td>\n   </td>\n  </tr>\n  </tbody>\n</table>","position":{"start":{"line":32,"column":1,"offset":1605},"end":{"line":209,"column":9,"offset":5600},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</TableWrap>","position":{"start":{"line":211,"column":1,"offset":5602},"end":{"line":211,"column":13,"offset":5614},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":213,"column":1,"offset":5616},"end":{"line":213,"column":4,"offset":5619},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Managing pools via the Cloudflare API","position":{"start":{"line":215,"column":4,"offset":5624},"end":{"line":215,"column":41,"offset":5661},"indent":[]}}],"position":{"start":{"line":215,"column":1,"offset":5621},"end":{"line":215,"column":41,"offset":5661},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Endpoints","position":{"start":{"line":217,"column":5,"offset":5667},"end":{"line":217,"column":14,"offset":5676},"indent":[]}}],"position":{"start":{"line":217,"column":1,"offset":5663},"end":{"line":217,"column":14,"offset":5676},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Pool endpoints are available in the Cloudflare API at both the user and account level, respectively:","position":{"start":{"line":219,"column":1,"offset":5678},"end":{"line":219,"column":101,"offset":5778},"indent":[]}}],"position":{"start":{"line":219,"column":1,"offset":5678},"end":{"line":219,"column":101,"offset":5778},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"user/load_balancers/pools","position":{"start":{"line":221,"column":3,"offset":5782},"end":{"line":221,"column":30,"offset":5809},"indent":[]}}],"position":{"start":{"line":221,"column":3,"offset":5782},"end":{"line":221,"column":30,"offset":5809},"indent":[]}}],"position":{"start":{"line":221,"column":1,"offset":5780},"end":{"line":221,"column":30,"offset":5809},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"accounts/:account_identifier/load_balancers/pools","position":{"start":{"line":222,"column":3,"offset":5812},"end":{"line":222,"column":54,"offset":5863},"indent":[]}}],"position":{"start":{"line":222,"column":3,"offset":5812},"end":{"line":222,"column":54,"offset":5863},"indent":[]}}],"position":{"start":{"line":222,"column":1,"offset":5810},"end":{"line":222,"column":54,"offset":5863},"indent":[]}}],"position":{"start":{"line":221,"column":1,"offset":5780},"end":{"line":222,"column":54,"offset":5863},"indent":[1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Commands","position":{"start":{"line":224,"column":5,"offset":5869},"end":{"line":224,"column":13,"offset":5877},"indent":[]}}],"position":{"start":{"line":224,"column":1,"offset":5865},"end":{"line":224,"column":13,"offset":5877},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Cloudflare API supports the following commands. For more detail, see ","position":{"start":{"line":226,"column":1,"offset":5879},"end":{"line":226,"column":74,"offset":5952},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"https://api.cloudflare.com/#load-balancer-pools-properties","children":[{"type":"text","value":"Cloudflare API: Load Balancer Pools","position":{"start":{"line":226,"column":76,"offset":5954},"end":{"line":226,"column":111,"offset":5989},"indent":[]}}],"position":{"start":{"line":226,"column":75,"offset":5953},"end":{"line":226,"column":172,"offset":6050},"indent":[]}}],"position":{"start":{"line":226,"column":74,"offset":5952},"end":{"line":226,"column":173,"offset":6051},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":226,"column":173,"offset":6051},"end":{"line":226,"column":174,"offset":6052},"indent":[]}}],"position":{"start":{"line":226,"column":1,"offset":5879},"end":{"line":226,"column":174,"offset":6052},"indent":[]}},{"type":"jsx","value":"<TableWrap>","position":{"start":{"line":228,"column":1,"offset":6054},"end":{"line":228,"column":12,"offset":6065},"indent":[]}},{"type":"jsx","value":"<table>\n  <thead>\n  <tr>\n   <th><strong>Command</strong>\n   </th>\n   <th><strong>Method</strong>\n   </th>\n   <th><strong>Endpoint</strong>\n   </th>\n  </tr>\n  </thead>\n  <tbody>\n  <tr>\n   <td>Create Pool\n   </td>\n   <td><code class=\"InlineCode\">POST</code>\n   </td>\n   <td><code class=\"InlineCode\">user/load_balancers/pools</code>\n   </td>\n  </tr>\n  <tr>\n   <td>Delete Pool\n   </td>\n   <td><code class=\"InlineCode\">DELETE</code>\n   </td>\n   <td><code class=\"InlineCode\">user/load_balancers/pools/:identifier</code>\n   </td>\n  </tr>\n  <tr>\n   <td>List Pools\n   </td>\n   <td><code class=\"InlineCode\">GET</code>\n   </td>\n   <td><code class=\"InlineCode\">user/load_balancers/pools</code>\n   </td>\n  </tr>\n  <tr>\n   <td>Pool Details\n   </td>\n   <td><code class=\"InlineCode\">GET</code>\n   </td>\n   <td><code class=\"InlineCode\">user/load_balancers/pools/:identifier</code>\n   </td>\n  </tr>\n  <tr>\n   <td>Pool Health Details\n   </td>\n   <td><code class=\"InlineCode\">GET</code>\n   </td>\n   <td><code class=\"InlineCode\">user/load_balancers/pools/:identifier/health</code>\n   </td>\n  </tr>\n  <tr>\n   <td>Update Pool\n   </td>\n   <td><code class=\"InlineCode\">PUT</code>\n   </td>\n   <td><code class=\"InlineCode\">user/load_balancers/pools/:identifier</code>\n   </td>\n  </tr>\n  </tbody>\n</table>","position":{"start":{"line":230,"column":1,"offset":6067},"end":{"line":291,"column":9,"offset":7344},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</TableWrap>","position":{"start":{"line":293,"column":1,"offset":7346},"end":{"line":293,"column":13,"offset":7358},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"order\":13}","position":{"start":{"line":296,"column":1,"offset":7361},"end":{"line":296,"column":41,"offset":7401},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":296,"column":41,"offset":7401}}}}},{"node":{"fields":{"slug":"/understand-basics/load-balancing-rules/actions"},"frontmatter":{"order":30,"title":"Actions","summary":null,"demo":null,"tags":null},"headings":[{"value":"Load Balancing actions"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Load Balancing actions","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":25,"offset":25},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":25,"offset":25},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":4,"column":4,"offset":30},"end":{"line":4,"column":12,"offset":38},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":27},"end":{"line":4,"column":12,"offset":38},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Actions tell Cloudflare how to handle HTTP requests that have matched a Load Balancing expression.","position":{"start":{"line":6,"column":1,"offset":40},"end":{"line":6,"column":99,"offset":138},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":40},"end":{"line":6,"column":99,"offset":138},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Note that a single Load Balancing rule can include more than one action.","position":{"start":{"line":8,"column":1,"offset":140},"end":{"line":8,"column":73,"offset":212},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":140},"end":{"line":8,"column":73,"offset":212},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Supported Actions","position":{"start":{"line":10,"column":4,"offset":217},"end":{"line":10,"column":21,"offset":234},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":214},"end":{"line":10,"column":21,"offset":234},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This table lists the actions available for Load Balancing rules. For a walkthrough, see ","position":{"start":{"line":12,"column":1,"offset":236},"end":{"line":12,"column":89,"offset":324},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/load-balancing-rules/create-rules","children":[{"type":"emphasis","children":[{"type":"text","value":"Creating Load Balancing rules","position":{"start":{"line":12,"column":91,"offset":326},"end":{"line":12,"column":120,"offset":355},"indent":[]}}],"position":{"start":{"line":12,"column":90,"offset":325},"end":{"line":12,"column":121,"offset":356},"indent":[]}}],"position":{"start":{"line":12,"column":89,"offset":324},"end":{"line":12,"column":176,"offset":411},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":12,"column":176,"offset":411},"end":{"line":12,"column":177,"offset":412},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":236},"end":{"line":12,"column":177,"offset":412},"indent":[]}},{"type":"jsx","value":"<table style='width:100%'>\n  <thead>\n    <tr>\n      <th style='width:30%'>Action</th>\n      <th>Description</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><em>Fixed response</em></td>\n      <td>Respond to the request with an HTTP status code and an optional message.</td>\n    </tr>\n    <tr>\n      <td><em>Pool selection</em></td>\n      <td>Select the pool to receive the request. You can customize the logic to use for pool selection, including traffic steering method, available pools, fallback pool, and region.</td>\n    </tr>\n    <tr>\n      <td><em>Redirect</em></td>\n      <td>Redirect the request to another URL.</td>\n    </tr>\n    <tr>\n      <td><em>Return</em></td>\n      <td>Stop processing Load Balancing rules and apply the current load balancing logic to the request.</td>\n    </tr>\n    <tr>\n      <td><em>Session affinity</em></td>\n      <td>Set the session affinity for the request. You can customize cookie behavior, session time-to-live (TTL), and origin drain duration TTL.</td>\n    </tr>\n  </tbody>\n</table>","position":{"start":{"line":14,"column":1,"offset":414},"end":{"line":43,"column":9,"offset":1446},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Actions\",\"order\":30}","position":{"start":{"line":45,"column":1,"offset":1448},"end":{"line":45,"column":59,"offset":1506},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":45,"column":59,"offset":1506}}}}},{"node":{"fields":{"slug":"/understand-basics/load-balancing-rules/create-rules"},"frontmatter":{"order":40,"title":"Creating rules","summary":null,"demo":null,"tags":null},"headings":[{"value":"Creating Load Balancing rules"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Creating Load Balancing rules","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":32,"offset":32},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":32,"offset":32},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":4,"column":4,"offset":37},"end":{"line":4,"column":12,"offset":45},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":34},"end":{"line":4,"column":12,"offset":45},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You create and manage ","position":{"start":{"line":6,"column":1,"offset":47},"end":{"line":6,"column":23,"offset":69},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/load-balancing-rules","children":[{"type":"text","value":"Load Balancing rules","position":{"start":{"line":6,"column":24,"offset":70},"end":{"line":6,"column":44,"offset":90},"indent":[]}}],"position":{"start":{"line":6,"column":23,"offset":69},"end":{"line":6,"column":86,"offset":132},"indent":[]}},{"type":"text","value":" in the ","position":{"start":{"line":6,"column":86,"offset":132},"end":{"line":6,"column":94,"offset":140},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Custom Rules","position":{"start":{"line":6,"column":96,"offset":142},"end":{"line":6,"column":108,"offset":154},"indent":[]}}],"position":{"start":{"line":6,"column":94,"offset":140},"end":{"line":6,"column":110,"offset":156},"indent":[]}},{"type":"text","value":" page, which is part of the Create/Edit Load Balancer workflow in the ","position":{"start":{"line":6,"column":110,"offset":156},"end":{"line":6,"column":180,"offset":226},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Traffic","position":{"start":{"line":6,"column":182,"offset":228},"end":{"line":6,"column":189,"offset":235},"indent":[]}}],"position":{"start":{"line":6,"column":180,"offset":226},"end":{"line":6,"column":191,"offset":237},"indent":[]}},{"type":"text","value":" app.","position":{"start":{"line":6,"column":191,"offset":237},"end":{"line":6,"column":196,"offset":242},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":47},"end":{"line":6,"column":196,"offset":242},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To create a Load Balancing rule in the Cloudflare dashboard, follow this workflow:","position":{"start":{"line":8,"column":1,"offset":244},"end":{"line":8,"column":83,"offset":326},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":244},"end":{"line":8,"column":83,"offset":326},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#create-a-new-load-balancing-rule","children":[{"type":"text","value":"Create a new Load Balancing rule","position":{"start":{"line":10,"column":5,"offset":332},"end":{"line":10,"column":37,"offset":364},"indent":[]}}],"position":{"start":{"line":10,"column":4,"offset":331},"end":{"line":10,"column":73,"offset":400},"indent":[]}}],"position":{"start":{"line":10,"column":4,"offset":331},"end":{"line":10,"column":73,"offset":400},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":328},"end":{"line":10,"column":73,"offset":400},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#build-a-load-balancing-expression","children":[{"type":"text","value":"Build an expression for the rule","position":{"start":{"line":11,"column":5,"offset":405},"end":{"line":11,"column":37,"offset":437},"indent":[]}}],"position":{"start":{"line":11,"column":4,"offset":404},"end":{"line":11,"column":74,"offset":474},"indent":[]}}],"position":{"start":{"line":11,"column":4,"offset":404},"end":{"line":11,"column":74,"offset":474},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":401},"end":{"line":11,"column":74,"offset":474},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#configure-the-action","children":[{"type":"text","value":"Configure an action","position":{"start":{"line":12,"column":5,"offset":479},"end":{"line":12,"column":24,"offset":498},"indent":[]}}],"position":{"start":{"line":12,"column":4,"offset":478},"end":{"line":12,"column":48,"offset":522},"indent":[]}}],"position":{"start":{"line":12,"column":4,"offset":478},"end":{"line":12,"column":48,"offset":522},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":475},"end":{"line":12,"column":48,"offset":522},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#save-a-load-balancing-rule-and-configuration","children":[{"type":"text","value":"Save the rule and the load balancer configuration","position":{"start":{"line":13,"column":5,"offset":527},"end":{"line":13,"column":54,"offset":576},"indent":[]}}],"position":{"start":{"line":13,"column":4,"offset":526},"end":{"line":13,"column":102,"offset":624},"indent":[]}}],"position":{"start":{"line":13,"column":4,"offset":526},"end":{"line":13,"column":102,"offset":624},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":523},"end":{"line":13,"column":102,"offset":624},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":328},"end":{"line":13,"column":102,"offset":624},"indent":[1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":15,"column":1,"offset":626},"end":{"line":15,"column":4,"offset":629},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Create a new Load Balancing rule","position":{"start":{"line":17,"column":4,"offset":634},"end":{"line":17,"column":36,"offset":666},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":631},"end":{"line":17,"column":36,"offset":666},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Log in to your Cloudflare Account Home and click the site you want to manage in the dashboard.","position":{"start":{"line":19,"column":4,"offset":671},"end":{"line":19,"column":98,"offset":765},"indent":[]}}],"position":{"start":{"line":19,"column":4,"offset":671},"end":{"line":19,"column":98,"offset":765},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":668},"end":{"line":20,"column":1,"offset":766},"indent":[1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"In the Cloudflare dashboard, click the ","position":{"start":{"line":21,"column":4,"offset":770},"end":{"line":21,"column":43,"offset":809},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Traffic","position":{"start":{"line":21,"column":45,"offset":811},"end":{"line":21,"column":52,"offset":818},"indent":[]}}],"position":{"start":{"line":21,"column":43,"offset":809},"end":{"line":21,"column":54,"offset":820},"indent":[]}},{"type":"text","value":" app, then select the ","position":{"start":{"line":21,"column":54,"offset":820},"end":{"line":21,"column":76,"offset":842},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Load Balancing","position":{"start":{"line":21,"column":78,"offset":844},"end":{"line":21,"column":92,"offset":858},"indent":[]}}],"position":{"start":{"line":21,"column":76,"offset":842},"end":{"line":21,"column":94,"offset":860},"indent":[]}},{"type":"text","value":" tab.","position":{"start":{"line":21,"column":94,"offset":860},"end":{"line":21,"column":99,"offset":865},"indent":[]}}],"position":{"start":{"line":21,"column":4,"offset":770},"end":{"line":21,"column":99,"offset":865},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../../static/images/load-balancing-tab.png","alt":"Load Balancing tab in the Traffic app","position":{"start":{"line":23,"column":3,"offset":869},"end":{"line":23,"column":87,"offset":953},"indent":[]}}],"position":{"start":{"line":23,"column":3,"offset":869},"end":{"line":23,"column":87,"offset":953},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":767},"end":{"line":24,"column":1,"offset":954},"indent":[1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"To add a rule to an existing load balancer, click the ","position":{"start":{"line":25,"column":4,"offset":958},"end":{"line":25,"column":58,"offset":1012},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Edit","position":{"start":{"line":25,"column":60,"offset":1014},"end":{"line":25,"column":64,"offset":1018},"indent":[]}}],"position":{"start":{"line":25,"column":58,"offset":1012},"end":{"line":25,"column":66,"offset":1020},"indent":[]}},{"type":"text","value":" link associated with the load balancer you want to manage:","position":{"start":{"line":25,"column":66,"offset":1020},"end":{"line":25,"column":125,"offset":1079},"indent":[]}}],"position":{"start":{"line":25,"column":4,"offset":958},"end":{"line":25,"column":125,"offset":1079},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../../static/images/edit-load-balancer.png","alt":"Edit load balancer link","position":{"start":{"line":27,"column":3,"offset":1083},"end":{"line":27,"column":73,"offset":1153},"indent":[]}}],"position":{"start":{"line":27,"column":3,"offset":1083},"end":{"line":27,"column":73,"offset":1153},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Otherwise, click ","position":{"start":{"line":29,"column":3,"offset":1157},"end":{"line":29,"column":20,"offset":1174},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create Load Balancer","position":{"start":{"line":29,"column":22,"offset":1176},"end":{"line":29,"column":42,"offset":1196},"indent":[]}}],"position":{"start":{"line":29,"column":20,"offset":1174},"end":{"line":29,"column":44,"offset":1198},"indent":[]}},{"type":"text","value":" and follow the workflow in ","position":{"start":{"line":29,"column":44,"offset":1198},"end":{"line":29,"column":72,"offset":1226},"indent":[]}},{"type":"link","title":null,"url":"/create-load-balancer-ui","children":[{"type":"emphasis","children":[{"type":"text","value":"Create a load balancer in the Cloudflare dashboard","position":{"start":{"line":29,"column":74,"offset":1228},"end":{"line":29,"column":124,"offset":1278},"indent":[]}}],"position":{"start":{"line":29,"column":73,"offset":1227},"end":{"line":29,"column":125,"offset":1279},"indent":[]}}],"position":{"start":{"line":29,"column":72,"offset":1226},"end":{"line":29,"column":152,"offset":1306},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":29,"column":152,"offset":1306},"end":{"line":29,"column":153,"offset":1307},"indent":[]}}],"position":{"start":{"line":29,"column":3,"offset":1157},"end":{"line":29,"column":153,"offset":1307},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When you click ","position":{"start":{"line":31,"column":3,"offset":1313},"end":{"line":31,"column":18,"offset":1328},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Edit","position":{"start":{"line":31,"column":20,"offset":1330},"end":{"line":31,"column":24,"offset":1334},"indent":[]}}],"position":{"start":{"line":31,"column":18,"offset":1328},"end":{"line":31,"column":26,"offset":1336},"indent":[]}},{"type":"text","value":", the ","position":{"start":{"line":31,"column":26,"offset":1336},"end":{"line":31,"column":32,"offset":1342},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Edit Load Balancer","position":{"start":{"line":31,"column":34,"offset":1344},"end":{"line":31,"column":52,"offset":1362},"indent":[]}}],"position":{"start":{"line":31,"column":32,"offset":1342},"end":{"line":31,"column":54,"offset":1364},"indent":[]}},{"type":"text","value":" page displays:","position":{"start":{"line":31,"column":54,"offset":1364},"end":{"line":31,"column":69,"offset":1379},"indent":[]}}],"position":{"start":{"line":31,"column":3,"offset":1313},"end":{"line":31,"column":69,"offset":1379},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../../static/images/edit-load-balancer-hostname.png","alt":"Edit Load Balancer page in Traffic app","position":{"start":{"line":33,"column":3,"offset":1383},"end":{"line":33,"column":97,"offset":1477},"indent":[]}}],"position":{"start":{"line":33,"column":3,"offset":1383},"end":{"line":33,"column":97,"offset":1477},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":955},"end":{"line":34,"column":1,"offset":1478},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"In the breadcrumb links for the Edit Load Balancer workflow, click ","position":{"start":{"line":35,"column":4,"offset":1482},"end":{"line":35,"column":71,"offset":1549},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Custom Rules","position":{"start":{"line":35,"column":73,"offset":1551},"end":{"line":35,"column":85,"offset":1563},"indent":[]}}],"position":{"start":{"line":35,"column":71,"offset":1549},"end":{"line":35,"column":87,"offset":1565},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":35,"column":87,"offset":1565},"end":{"line":35,"column":88,"offset":1566},"indent":[]}}],"position":{"start":{"line":35,"column":4,"offset":1482},"end":{"line":35,"column":88,"offset":1566},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":37,"column":3,"offset":1570},"end":{"line":37,"column":7,"offset":1574},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Custom Rules","position":{"start":{"line":37,"column":9,"offset":1576},"end":{"line":37,"column":21,"offset":1588},"indent":[]}}],"position":{"start":{"line":37,"column":7,"offset":1574},"end":{"line":37,"column":23,"offset":1590},"indent":[]}},{"type":"text","value":" card displays:\n","position":{"start":{"line":37,"column":23,"offset":1590},"end":{"line":38,"column":3,"offset":1608},"indent":[3]}},{"type":"image","title":null,"url":"../../static/images/edit-load-balancer-custom-rules.png","alt":"Edit Load Balancer page in Traffic app","position":{"start":{"line":38,"column":3,"offset":1608},"end":{"line":38,"column":101,"offset":1706},"indent":[]}}],"position":{"start":{"line":37,"column":3,"offset":1570},"end":{"line":38,"column":101,"offset":1706},"indent":[3]}}],"position":{"start":{"line":35,"column":1,"offset":1479},"end":{"line":39,"column":1,"offset":1707},"indent":[1,1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":40,"column":4,"offset":1711},"end":{"line":40,"column":10,"offset":1717},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create Custom Rule","position":{"start":{"line":40,"column":12,"offset":1719},"end":{"line":40,"column":30,"offset":1737},"indent":[]}}],"position":{"start":{"line":40,"column":10,"offset":1717},"end":{"line":40,"column":32,"offset":1739},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":40,"column":32,"offset":1739},"end":{"line":40,"column":33,"offset":1740},"indent":[]}}],"position":{"start":{"line":40,"column":4,"offset":1711},"end":{"line":40,"column":33,"offset":1740},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":1708},"end":{"line":41,"column":1,"offset":1741},"indent":[1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"In the ","position":{"start":{"line":42,"column":4,"offset":1745},"end":{"line":42,"column":11,"offset":1752},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create Custom Rule","position":{"start":{"line":42,"column":13,"offset":1754},"end":{"line":42,"column":31,"offset":1772},"indent":[]}}],"position":{"start":{"line":42,"column":11,"offset":1752},"end":{"line":42,"column":33,"offset":1774},"indent":[]}},{"type":"text","value":" dialog that displays, use the ","position":{"start":{"line":42,"column":33,"offset":1774},"end":{"line":42,"column":64,"offset":1805},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Rule name","position":{"start":{"line":42,"column":66,"offset":1807},"end":{"line":42,"column":75,"offset":1816},"indent":[]}}],"position":{"start":{"line":42,"column":64,"offset":1805},"end":{"line":42,"column":77,"offset":1818},"indent":[]}},{"type":"text","value":" input to supply a descriptive name. This example uses \"Select pool by URI path and query.\"","position":{"start":{"line":42,"column":77,"offset":1818},"end":{"line":42,"column":168,"offset":1909},"indent":[]}}],"position":{"start":{"line":42,"column":4,"offset":1745},"end":{"line":42,"column":168,"offset":1909},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../../static/images/create-custom-rule.png","alt":"Screenshot, Create Custom Rule dialog","position":{"start":{"line":44,"column":3,"offset":1913},"end":{"line":44,"column":87,"offset":1997},"indent":[]}}],"position":{"start":{"line":44,"column":3,"offset":1913},"end":{"line":44,"column":87,"offset":1997},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":1742},"end":{"line":44,"column":87,"offset":1997},"indent":[1,1]}}],"position":{"start":{"line":19,"column":1,"offset":668},"end":{"line":44,"column":87,"offset":1997},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now that you have created a rule and named it, continue to the next section and ","position":{"start":{"line":46,"column":1,"offset":1999},"end":{"line":46,"column":81,"offset":2079},"indent":[]}},{"type":"link","title":null,"url":"#build-a-load-balancing-expression","children":[{"type":"text","value":"build a Load Balancing expression","position":{"start":{"line":46,"column":82,"offset":2080},"end":{"line":46,"column":115,"offset":2113},"indent":[]}}],"position":{"start":{"line":46,"column":81,"offset":2079},"end":{"line":46,"column":152,"offset":2150},"indent":[]}},{"type":"text","value":" that defines when to trigger your rule.","position":{"start":{"line":46,"column":152,"offset":2150},"end":{"line":46,"column":192,"offset":2190},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":1999},"end":{"line":46,"column":192,"offset":2190},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":48,"column":1,"offset":2192},"end":{"line":48,"column":4,"offset":2195},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Build a Load Balancing expression","position":{"start":{"line":50,"column":4,"offset":2200},"end":{"line":50,"column":37,"offset":2233},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":2197},"end":{"line":50,"column":37,"offset":2233},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"In the Expression builder in the ","position":{"start":{"line":52,"column":4,"offset":2238},"end":{"line":52,"column":37,"offset":2271},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create Custom Rule","position":{"start":{"line":52,"column":39,"offset":2273},"end":{"line":52,"column":57,"offset":2291},"indent":[]}}],"position":{"start":{"line":52,"column":37,"offset":2271},"end":{"line":52,"column":59,"offset":2293},"indent":[]}},{"type":"text","value":" dialog, under ","position":{"start":{"line":52,"column":59,"offset":2293},"end":{"line":52,"column":74,"offset":2308},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"When incoming requests match…","position":{"start":{"line":52,"column":76,"offset":2310},"end":{"line":52,"column":105,"offset":2339},"indent":[]}}],"position":{"start":{"line":52,"column":74,"offset":2308},"end":{"line":52,"column":107,"offset":2341},"indent":[]}},{"type":"text","value":", use the ","position":{"start":{"line":52,"column":107,"offset":2341},"end":{"line":52,"column":117,"offset":2351},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Field","position":{"start":{"line":52,"column":119,"offset":2353},"end":{"line":52,"column":124,"offset":2358},"indent":[]}}],"position":{"start":{"line":52,"column":117,"offset":2351},"end":{"line":52,"column":126,"offset":2360},"indent":[]}},{"type":"text","value":" drop-down list to choose an HTTP property. This example uses ","position":{"start":{"line":52,"column":126,"offset":2360},"end":{"line":52,"column":188,"offset":2422},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"URI path","position":{"start":{"line":52,"column":189,"offset":2423},"end":{"line":52,"column":197,"offset":2431},"indent":[]}}],"position":{"start":{"line":52,"column":188,"offset":2422},"end":{"line":52,"column":198,"offset":2432},"indent":[]}},{"type":"text","value":". For more, see ","position":{"start":{"line":52,"column":198,"offset":2432},"end":{"line":52,"column":214,"offset":2448},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/load-balancing-rules/reference","children":[{"type":"emphasis","children":[{"type":"text","value":"Supported fields and operators","position":{"start":{"line":52,"column":216,"offset":2450},"end":{"line":52,"column":246,"offset":2480},"indent":[]}}],"position":{"start":{"line":52,"column":215,"offset":2449},"end":{"line":52,"column":247,"offset":2481},"indent":[]}}],"position":{"start":{"line":52,"column":214,"offset":2448},"end":{"line":52,"column":299,"offset":2533},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":52,"column":299,"offset":2533},"end":{"line":52,"column":300,"offset":2534},"indent":[]}}],"position":{"start":{"line":52,"column":4,"offset":2238},"end":{"line":52,"column":300,"offset":2534},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../../static/images/create-custom-rule-field.png","alt":"Screenshot, Create Custom Rule dialog, choose Field","position":{"start":{"line":54,"column":3,"offset":2538},"end":{"line":54,"column":107,"offset":2642},"indent":[]}}],"position":{"start":{"line":54,"column":3,"offset":2538},"end":{"line":54,"column":107,"offset":2642},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":2235},"end":{"line":55,"column":1,"offset":2643},"indent":[1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"To select a comparison operator, use the ","position":{"start":{"line":56,"column":4,"offset":2647},"end":{"line":56,"column":45,"offset":2688},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Operator","position":{"start":{"line":56,"column":47,"offset":2690},"end":{"line":56,"column":55,"offset":2698},"indent":[]}}],"position":{"start":{"line":56,"column":45,"offset":2688},"end":{"line":56,"column":57,"offset":2700},"indent":[]}},{"type":"text","value":" drop-down list. This example uses the ","position":{"start":{"line":56,"column":57,"offset":2700},"end":{"line":56,"column":96,"offset":2739},"indent":[]}},{"type":"inlineCode","value":"contains","position":{"start":{"line":56,"column":96,"offset":2739},"end":{"line":56,"column":106,"offset":2749},"indent":[]}},{"type":"text","value":" operator.","position":{"start":{"line":56,"column":106,"offset":2749},"end":{"line":56,"column":116,"offset":2759},"indent":[]}}],"position":{"start":{"line":56,"column":4,"offset":2647},"end":{"line":56,"column":116,"offset":2759},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":2644},"end":{"line":57,"column":1,"offset":2760},"indent":[1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Enter the value to match. When the field represents an enumeration, the ","position":{"start":{"line":58,"column":4,"offset":2764},"end":{"line":58,"column":76,"offset":2836},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Value","position":{"start":{"line":58,"column":78,"offset":2838},"end":{"line":58,"column":83,"offset":2843},"indent":[]}}],"position":{"start":{"line":58,"column":76,"offset":2836},"end":{"line":58,"column":85,"offset":2845},"indent":[]}},{"type":"text","value":" control will be a drop-down list. Otherwise, it will be a text input. This example matches requests where the URI path contains ","position":{"start":{"line":58,"column":85,"offset":2845},"end":{"line":58,"column":214,"offset":2974},"indent":[]}},{"type":"inlineCode","value":"/content","position":{"start":{"line":58,"column":214,"offset":2974},"end":{"line":58,"column":224,"offset":2984},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":58,"column":224,"offset":2984},"end":{"line":58,"column":225,"offset":2985},"indent":[]}}],"position":{"start":{"line":58,"column":4,"offset":2764},"end":{"line":58,"column":225,"offset":2985},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../../static/images/create-custom-rule-value.png","alt":"Screenshot, Create Custom Rule dialog, choose Value","position":{"start":{"line":60,"column":3,"offset":2989},"end":{"line":60,"column":107,"offset":3093},"indent":[]}}],"position":{"start":{"line":60,"column":3,"offset":2989},"end":{"line":60,"column":107,"offset":3093},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":2761},"end":{"line":61,"column":1,"offset":3094},"indent":[1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"linkReference","identifier":"optional","label":"Optional","referenceType":"shortcut","children":[{"type":"text","value":"Optional","position":{"start":{"line":62,"column":5,"offset":3099},"end":{"line":62,"column":13,"offset":3107},"indent":[]}}],"position":{"start":{"line":62,"column":4,"offset":3098},"end":{"line":62,"column":14,"offset":3108},"indent":[]}},{"type":"text","value":" To create a compound expression using logical operators, click the ","position":{"start":{"line":62,"column":14,"offset":3108},"end":{"line":62,"column":82,"offset":3176},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"And","position":{"start":{"line":62,"column":84,"offset":3178},"end":{"line":62,"column":87,"offset":3181},"indent":[]}}],"position":{"start":{"line":62,"column":82,"offset":3176},"end":{"line":62,"column":89,"offset":3183},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":62,"column":89,"offset":3183},"end":{"line":62,"column":93,"offset":3187},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Or","position":{"start":{"line":62,"column":95,"offset":3189},"end":{"line":62,"column":97,"offset":3191},"indent":[]}}],"position":{"start":{"line":62,"column":93,"offset":3187},"end":{"line":62,"column":99,"offset":3193},"indent":[]}},{"type":"text","value":" button.","position":{"start":{"line":62,"column":99,"offset":3193},"end":{"line":62,"column":107,"offset":3201},"indent":[]}}],"position":{"start":{"line":62,"column":4,"offset":3098},"end":{"line":62,"column":107,"offset":3201},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A new expression displays. Edit the expression. This example uses the ","position":{"start":{"line":64,"column":3,"offset":3205},"end":{"line":64,"column":73,"offset":3275},"indent":[]}},{"type":"inlineCode","value":"and","position":{"start":{"line":64,"column":73,"offset":3275},"end":{"line":64,"column":78,"offset":3280},"indent":[]}},{"type":"text","value":" operator and adds the requirement that the URI query string contain ","position":{"start":{"line":64,"column":78,"offset":3280},"end":{"line":64,"column":147,"offset":3349},"indent":[]}},{"type":"inlineCode","value":"webserver","position":{"start":{"line":64,"column":147,"offset":3349},"end":{"line":64,"column":158,"offset":3360},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":64,"column":158,"offset":3360},"end":{"line":64,"column":159,"offset":3361},"indent":[]}}],"position":{"start":{"line":64,"column":3,"offset":3205},"end":{"line":64,"column":159,"offset":3361},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../../static/images/create-custom-rule-compound-expression.png","alt":"Screenshot, Create Custom Rule dialog, add logical operator","position":{"start":{"line":66,"column":3,"offset":3365},"end":{"line":66,"column":129,"offset":3491},"indent":[]}}],"position":{"start":{"line":66,"column":3,"offset":3365},"end":{"line":66,"column":129,"offset":3491},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":3095},"end":{"line":67,"column":1,"offset":3492},"indent":[1,1,1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Edit the expression as desired.","position":{"start":{"line":68,"column":4,"offset":3496},"end":{"line":68,"column":35,"offset":3527},"indent":[]}}],"position":{"start":{"line":68,"column":4,"offset":3496},"end":{"line":68,"column":35,"offset":3527},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":3493},"end":{"line":68,"column":35,"offset":3527},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":2235},"end":{"line":68,"column":35,"offset":3527},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now that you have built an expression, continue to the next section and ","position":{"start":{"line":70,"column":1,"offset":3529},"end":{"line":70,"column":73,"offset":3601},"indent":[]}},{"type":"link","title":null,"url":"#configure-a-load-balancing-action","children":[{"type":"text","value":"configure a Load Balancing action","position":{"start":{"line":70,"column":74,"offset":3602},"end":{"line":70,"column":107,"offset":3635},"indent":[]}}],"position":{"start":{"line":70,"column":73,"offset":3601},"end":{"line":70,"column":144,"offset":3672},"indent":[]}},{"type":"text","value":" for the rule.","position":{"start":{"line":70,"column":144,"offset":3672},"end":{"line":70,"column":158,"offset":3686},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":3529},"end":{"line":70,"column":158,"offset":3686},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":72,"column":1,"offset":3688},"end":{"line":72,"column":4,"offset":3691},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Configure a Load Balancing action","position":{"start":{"line":74,"column":4,"offset":3696},"end":{"line":74,"column":37,"offset":3729},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":3693},"end":{"line":74,"column":37,"offset":3729},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"To set an action for a rule, use the ","position":{"start":{"line":76,"column":4,"offset":3734},"end":{"line":76,"column":41,"offset":3771},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Action","position":{"start":{"line":76,"column":43,"offset":3773},"end":{"line":76,"column":49,"offset":3779},"indent":[]}}],"position":{"start":{"line":76,"column":41,"offset":3771},"end":{"line":76,"column":51,"offset":3781},"indent":[]}},{"type":"text","value":" drop-down list. This example selects the ","position":{"start":{"line":76,"column":51,"offset":3781},"end":{"line":76,"column":93,"offset":3823},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Pool selection","position":{"start":{"line":76,"column":94,"offset":3824},"end":{"line":76,"column":108,"offset":3838},"indent":[]}}],"position":{"start":{"line":76,"column":93,"offset":3823},"end":{"line":76,"column":109,"offset":3839},"indent":[]}},{"type":"text","value":" action:","position":{"start":{"line":76,"column":109,"offset":3839},"end":{"line":76,"column":117,"offset":3847},"indent":[]}}],"position":{"start":{"line":76,"column":4,"offset":3734},"end":{"line":76,"column":117,"offset":3847},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../../static/images/create-custom-rule-action.png","alt":"Screenshot, Create Custom Rule dialog, choose action","position":{"start":{"line":78,"column":3,"offset":3851},"end":{"line":78,"column":109,"offset":3957},"indent":[]}}],"position":{"start":{"line":78,"column":3,"offset":3851},"end":{"line":78,"column":109,"offset":3957},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The configuration options for the selected action display:","position":{"start":{"line":80,"column":3,"offset":3961},"end":{"line":80,"column":61,"offset":4019},"indent":[]}}],"position":{"start":{"line":80,"column":3,"offset":3961},"end":{"line":80,"column":61,"offset":4019},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"  ","position":{"start":{"line":82,"column":3,"offset":4023},"end":{"line":82,"column":5,"offset":4025},"indent":[]}},{"type":"image","title":null,"url":"../../static/images/create-custom-rule-action-pool-selection.png","alt":"Screenshot, Create Custom Rule dialog, choose action","position":{"start":{"line":82,"column":5,"offset":4025},"end":{"line":82,"column":126,"offset":4146},"indent":[]}}],"position":{"start":{"line":82,"column":3,"offset":4023},"end":{"line":82,"column":126,"offset":4146},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":3731},"end":{"line":83,"column":1,"offset":4147},"indent":[1,1,1,1,1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"linkReference","identifier":"optional","label":"Optional","referenceType":"shortcut","children":[{"type":"text","value":"Optional","position":{"start":{"line":84,"column":5,"offset":4152},"end":{"line":84,"column":13,"offset":4160},"indent":[]}}],"position":{"start":{"line":84,"column":4,"offset":4151},"end":{"line":84,"column":14,"offset":4161},"indent":[]}},{"type":"text","value":" Click ","position":{"start":{"line":84,"column":14,"offset":4161},"end":{"line":84,"column":21,"offset":4168},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Add another action","position":{"start":{"line":84,"column":23,"offset":4170},"end":{"line":84,"column":41,"offset":4188},"indent":[]}}],"position":{"start":{"line":84,"column":21,"offset":4168},"end":{"line":84,"column":43,"offset":4190},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":84,"column":43,"offset":4190},"end":{"line":84,"column":44,"offset":4191},"indent":[]}}],"position":{"start":{"line":84,"column":4,"offset":4151},"end":{"line":84,"column":44,"offset":4191},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":4148},"end":{"line":84,"column":44,"offset":4191},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":3731},"end":{"line":84,"column":44,"offset":4191},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now that you have configured a Load Balancing action, continue to the next section and ","position":{"start":{"line":86,"column":1,"offset":4193},"end":{"line":86,"column":88,"offset":4280},"indent":[]}},{"type":"link","title":null,"url":"#save-a-load-balancing-rule-and-configurationa","children":[{"type":"text","value":"save the Load Balancing rule and configuration","position":{"start":{"line":86,"column":89,"offset":4281},"end":{"line":86,"column":135,"offset":4327},"indent":[]}}],"position":{"start":{"line":86,"column":88,"offset":4280},"end":{"line":86,"column":184,"offset":4376},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":86,"column":184,"offset":4376},"end":{"line":86,"column":185,"offset":4377},"indent":[]}}],"position":{"start":{"line":86,"column":1,"offset":4193},"end":{"line":86,"column":185,"offset":4377},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":88,"column":1,"offset":4379},"end":{"line":88,"column":4,"offset":4382},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Save a Load Balancing rule and configuration","position":{"start":{"line":90,"column":4,"offset":4387},"end":{"line":90,"column":48,"offset":4431},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":4384},"end":{"line":90,"column":48,"offset":4431},"indent":[]}},{"type":"jsx","value":"<Aside type='warning' header='Warning'>","position":{"start":{"line":92,"column":1,"offset":4433},"end":{"line":92,"column":40,"offset":4472},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Unless you follow these steps and save ","position":{"start":{"line":94,"column":1,"offset":4474},"end":{"line":94,"column":40,"offset":4513},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"not only","position":{"start":{"line":94,"column":42,"offset":4515},"end":{"line":94,"column":50,"offset":4523},"indent":[]}}],"position":{"start":{"line":94,"column":40,"offset":4513},"end":{"line":94,"column":52,"offset":4525},"indent":[]}},{"type":"text","value":" the new rule ","position":{"start":{"line":94,"column":52,"offset":4525},"end":{"line":94,"column":66,"offset":4539},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"but also","position":{"start":{"line":94,"column":68,"offset":4541},"end":{"line":94,"column":76,"offset":4549},"indent":[]}}],"position":{"start":{"line":94,"column":66,"offset":4539},"end":{"line":94,"column":78,"offset":4551},"indent":[]}},{"type":"text","value":" the load balancer configuration, your rule and any configuration changes you made will be lost.","position":{"start":{"line":94,"column":78,"offset":4551},"end":{"line":94,"column":174,"offset":4647},"indent":[]}}],"position":{"start":{"line":94,"column":1,"offset":4474},"end":{"line":94,"column":174,"offset":4647},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":96,"column":1,"offset":4649},"end":{"line":96,"column":9,"offset":4657},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"In the ","position":{"start":{"line":98,"column":4,"offset":4662},"end":{"line":98,"column":11,"offset":4669},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create Custom Rule","position":{"start":{"line":98,"column":13,"offset":4671},"end":{"line":98,"column":31,"offset":4689},"indent":[]}}],"position":{"start":{"line":98,"column":11,"offset":4669},"end":{"line":98,"column":33,"offset":4691},"indent":[]}},{"type":"text","value":" dialog, click ","position":{"start":{"line":98,"column":33,"offset":4691},"end":{"line":98,"column":48,"offset":4706},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Deploy","position":{"start":{"line":98,"column":50,"offset":4708},"end":{"line":98,"column":56,"offset":4714},"indent":[]}}],"position":{"start":{"line":98,"column":48,"offset":4706},"end":{"line":98,"column":58,"offset":4716},"indent":[]}},{"type":"text","value":". If you are not ready to deploy the rule, click ","position":{"start":{"line":98,"column":58,"offset":4716},"end":{"line":98,"column":107,"offset":4765},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Save as draft","position":{"start":{"line":98,"column":109,"offset":4767},"end":{"line":98,"column":122,"offset":4780},"indent":[]}}],"position":{"start":{"line":98,"column":107,"offset":4765},"end":{"line":98,"column":124,"offset":4782},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":98,"column":124,"offset":4782},"end":{"line":98,"column":125,"offset":4783},"indent":[]}}],"position":{"start":{"line":98,"column":4,"offset":4662},"end":{"line":98,"column":125,"offset":4783},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":100,"column":3,"offset":4787},"end":{"line":100,"column":7,"offset":4791},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Custom Rules","position":{"start":{"line":100,"column":9,"offset":4793},"end":{"line":100,"column":21,"offset":4805},"indent":[]}}],"position":{"start":{"line":100,"column":7,"offset":4791},"end":{"line":100,"column":23,"offset":4807},"indent":[]}},{"type":"text","value":" card displays, and the new rule is listed:","position":{"start":{"line":100,"column":23,"offset":4807},"end":{"line":100,"column":66,"offset":4850},"indent":[]}}],"position":{"start":{"line":100,"column":3,"offset":4787},"end":{"line":100,"column":66,"offset":4850},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../../static/images/custom-rules-list.png","alt":"Screenshot, Custom Rules list","position":{"start":{"line":102,"column":3,"offset":4854},"end":{"line":102,"column":78,"offset":4929},"indent":[]}}],"position":{"start":{"line":102,"column":3,"offset":4854},"end":{"line":102,"column":78,"offset":4929},"indent":[]}}],"position":{"start":{"line":98,"column":1,"offset":4659},"end":{"line":103,"column":1,"offset":4930},"indent":[1,1,1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":104,"column":4,"offset":4934},"end":{"line":104,"column":10,"offset":4940},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Next","position":{"start":{"line":104,"column":12,"offset":4942},"end":{"line":104,"column":16,"offset":4946},"indent":[]}}],"position":{"start":{"line":104,"column":10,"offset":4940},"end":{"line":104,"column":18,"offset":4948},"indent":[]}},{"type":"text","value":" and review your changes:","position":{"start":{"line":104,"column":18,"offset":4948},"end":{"line":104,"column":43,"offset":4973},"indent":[]}}],"position":{"start":{"line":104,"column":4,"offset":4934},"end":{"line":104,"column":43,"offset":4973},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../../static/images/edit-load-balancer-review.png","alt":"Screenshot, Edit Load Balancer, Review","position":{"start":{"line":106,"column":5,"offset":4979},"end":{"line":106,"column":97,"offset":5071},"indent":[]}}],"position":{"start":{"line":106,"column":5,"offset":4979},"end":{"line":106,"column":97,"offset":5071},"indent":[]}}],"position":{"start":{"line":104,"column":1,"offset":4931},"end":{"line":107,"column":1,"offset":5072},"indent":[1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":108,"column":4,"offset":5076},"end":{"line":108,"column":10,"offset":5082},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Save","position":{"start":{"line":108,"column":12,"offset":5084},"end":{"line":108,"column":16,"offset":5088},"indent":[]}}],"position":{"start":{"line":108,"column":10,"offset":5082},"end":{"line":108,"column":18,"offset":5090},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":108,"column":18,"offset":5090},"end":{"line":108,"column":19,"offset":5091},"indent":[]}}],"position":{"start":{"line":108,"column":4,"offset":5076},"end":{"line":108,"column":19,"offset":5091},"indent":[]}}],"position":{"start":{"line":108,"column":1,"offset":5073},"end":{"line":108,"column":19,"offset":5091},"indent":[]}}],"position":{"start":{"line":98,"column":1,"offset":4659},"end":{"line":108,"column":19,"offset":5091},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"When the operation is complete, the ","position":{"start":{"line":110,"column":1,"offset":5093},"end":{"line":110,"column":37,"offset":5129},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Load Balancing","position":{"start":{"line":110,"column":39,"offset":5131},"end":{"line":110,"column":53,"offset":5145},"indent":[]}}],"position":{"start":{"line":110,"column":37,"offset":5129},"end":{"line":110,"column":55,"offset":5147},"indent":[]}},{"type":"text","value":" page displays.","position":{"start":{"line":110,"column":55,"offset":5147},"end":{"line":110,"column":70,"offset":5162},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":5093},"end":{"line":110,"column":70,"offset":5162},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Creating rules\",\"order\":40}","position":{"start":{"line":112,"column":1,"offset":5164},"end":{"line":112,"column":66,"offset":5229},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":112,"column":66,"offset":5229}}}}},{"node":{"fields":{"slug":"/understand-basics/traffic-steering"},"frontmatter":{"order":12,"title":"","summary":null,"demo":null,"tags":null},"headings":[{"value":"Traffic steering"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Traffic steering","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":19,"offset":19},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":19,"offset":19},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":4,"column":4,"offset":24},"end":{"line":4,"column":12,"offset":32},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":21},"end":{"line":4,"column":12,"offset":32},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Load Balancing provides several traffic steering modes, which allow customers to optimize how load balancers route traffic. You can configure Traffic Steering from the Load Balancing dashboard, in either the ","position":{"start":{"line":6,"column":1,"offset":34},"end":{"line":6,"column":209,"offset":242},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create a Load Balancer","position":{"start":{"line":6,"column":211,"offset":244},"end":{"line":6,"column":233,"offset":266},"indent":[]}}],"position":{"start":{"line":6,"column":209,"offset":242},"end":{"line":6,"column":235,"offset":268},"indent":[]}},{"type":"text","value":" wizard or the ","position":{"start":{"line":6,"column":235,"offset":268},"end":{"line":6,"column":250,"offset":283},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Edit Load Balancer","position":{"start":{"line":6,"column":252,"offset":285},"end":{"line":6,"column":270,"offset":303},"indent":[]}}],"position":{"start":{"line":6,"column":250,"offset":283},"end":{"line":6,"column":272,"offset":305},"indent":[]}},{"type":"text","value":" panel. You can also configure Traffic Steering via the Cloudflare API. Available steering options include standard failover (steering disabled), Dynamic Steering, and Geo Steering.","position":{"start":{"line":6,"column":272,"offset":305},"end":{"line":6,"column":453,"offset":486},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":34},"end":{"line":6,"column":453,"offset":486},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/traffic-steering-1.png","alt":null,"position":{"start":{"line":8,"column":1,"offset":488},"end":{"line":8,"column":45,"offset":532},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":488},"end":{"line":8,"column":45,"offset":532},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":10,"column":1,"offset":534},"end":{"line":10,"column":4,"offset":537},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Standard failover","position":{"start":{"line":12,"column":4,"offset":542},"end":{"line":12,"column":21,"offset":559},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":539},"end":{"line":12,"column":21,"offset":559},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Standard failover directs traffic from unhealthy pools to the next healthy pool in the configuration.","position":{"start":{"line":14,"column":1,"offset":561},"end":{"line":14,"column":102,"offset":662},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":561},"end":{"line":14,"column":102,"offset":662},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Standard failover uses the pool order to determine failover priority (the failover order).","position":{"start":{"line":16,"column":1,"offset":664},"end":{"line":16,"column":91,"offset":754},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":664},"end":{"line":16,"column":91,"offset":754},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If all pools are marked unhealthy, Load Balancing will direct traffic to the fallback pool. The default fallback pool is the last pool listed in the Load Balancing configuration.","position":{"start":{"line":18,"column":1,"offset":756},"end":{"line":18,"column":179,"offset":934},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":756},"end":{"line":18,"column":179,"offset":934},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To nominate a specific fallback pool via the Cloudflare API, use the Update Load Balancers command and set the ","position":{"start":{"line":20,"column":1,"offset":936},"end":{"line":20,"column":112,"offset":1047},"indent":[]}},{"type":"inlineCode","value":"fallback_pool","position":{"start":{"line":20,"column":112,"offset":1047},"end":{"line":20,"column":127,"offset":1062},"indent":[]}},{"type":"text","value":" parameter. See ","position":{"start":{"line":20,"column":127,"offset":1062},"end":{"line":20,"column":143,"offset":1078},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"/understand-basics/load-balancers/","children":[{"type":"text","value":"Load Balancers","position":{"start":{"line":20,"column":145,"offset":1080},"end":{"line":20,"column":159,"offset":1094},"indent":[]}}],"position":{"start":{"line":20,"column":144,"offset":1079},"end":{"line":20,"column":196,"offset":1131},"indent":[]}}],"position":{"start":{"line":20,"column":143,"offset":1078},"end":{"line":20,"column":197,"offset":1132},"indent":[]}},{"type":"text","value":" for details.","position":{"start":{"line":20,"column":197,"offset":1132},"end":{"line":20,"column":210,"offset":1145},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":936},"end":{"line":20,"column":210,"offset":1145},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If no monitors are attached to the load balancer, it will direct traffic to the primary pool exclusively.","position":{"start":{"line":22,"column":1,"offset":1147},"end":{"line":22,"column":106,"offset":1252},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1147},"end":{"line":22,"column":106,"offset":1252},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":24,"column":1,"offset":1254},"end":{"line":24,"column":4,"offset":1257},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Dynamic Steering","position":{"start":{"line":26,"column":4,"offset":1262},"end":{"line":26,"column":20,"offset":1278},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1259},"end":{"line":26,"column":20,"offset":1278},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Dynamic Steering uses health check data to identify the fastest pool for a given Cloudflare Region or point of presence.","position":{"start":{"line":28,"column":1,"offset":1280},"end":{"line":28,"column":121,"offset":1400},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1280},"end":{"line":28,"column":121,"offset":1400},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Dynamic Steering creates Round Trip Time (RTT) profiles based on an exponential weighted moving average (EWMA) of RTT to determine the fastest pool. If there is no current RTT data for your pool in a region or colocation center, Cloudflare directs traffic to the pools in failover order.","position":{"start":{"line":30,"column":1,"offset":1402},"end":{"line":30,"column":288,"offset":1689},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":1402},"end":{"line":30,"column":288,"offset":1689},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When enabling Dynamic Steering the first time for a server pool, allow 10 minutes for the change to take effect while Cloudflare builds an RTT profile for that pool.","position":{"start":{"line":32,"column":1,"offset":1691},"end":{"line":32,"column":166,"offset":1856},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":1691},"end":{"line":32,"column":166,"offset":1856},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For TCP health checks, calculated latency may not reflect the true latency to the origin if you are terminating TCP at a cloud provider edge location.","position":{"start":{"line":34,"column":1,"offset":1858},"end":{"line":34,"column":151,"offset":2008},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":1858},"end":{"line":34,"column":151,"offset":2008},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The diagram below shows how Cloudflare would route traffic to the pool with the lowest EWMA among three regions: Eastern North America, Europe, and Australia. In this case, the ENAM pool is selected, because it has the lowest RTT.","position":{"start":{"line":36,"column":1,"offset":2010},"end":{"line":36,"column":231,"offset":2240},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":2010},"end":{"line":36,"column":231,"offset":2240},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/traffic-steering-2.png","alt":null,"position":{"start":{"line":38,"column":1,"offset":2242},"end":{"line":38,"column":45,"offset":2286},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":2242},"end":{"line":38,"column":45,"offset":2286},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":40,"column":1,"offset":2288},"end":{"line":40,"column":4,"offset":2291},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Geo Steering","position":{"start":{"line":42,"column":4,"offset":2296},"end":{"line":42,"column":16,"offset":2308},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":2293},"end":{"line":42,"column":16,"offset":2308},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Geo Steering directs traffic to pools based on the client’s region or PoP. Only domains on Enterprise plans can perform Geo Steering by PoP. Users specify the pools to which the load balancer should direct traffic for a given geographical region or PoP. You can assign multiple pools to the same region, and the load balancer will use them in failover order. If there is no configuration for a region or pool, the load balancer will use the default failover order.","position":{"start":{"line":44,"column":1,"offset":2310},"end":{"line":44,"column":465,"offset":2774},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":2310},"end":{"line":44,"column":465,"offset":2774},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare has 13 geographic regions that span the world. The region of a client is determined by the region of the Cloudflare data center that answers the client’s DNS query. These regions are listed below, along with their region codes.","position":{"start":{"line":46,"column":1,"offset":2776},"end":{"line":46,"column":239,"offset":3014},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":2776},"end":{"line":46,"column":239,"offset":3014},"indent":[]}},{"type":"jsx","value":"<table>\n  <thead>\n  <tr>\n   <th>Region Code\n   </th>\n   <th>Region\n   </th>\n  </tr>\n  </thead>\n  <tbody>\n  <tr>\n   <td><strong>WNAM</strong>\n   </td>\n   <td>Western North America\n   </td>\n  </tr>\n  <tr>\n   <td><strong>ENAM</strong>\n   </td>\n   <td>Eastern North America\n   </td>\n  </tr>\n  <tr>\n   <td><strong>WEU</strong>\n   </td>\n   <td>Western Europe\n   </td>\n  </tr>\n  <tr>\n   <td><strong>EEU</strong>\n   </td>\n   <td>Eastern Europe\n   </td>\n  </tr>\n  <tr>\n   <td><strong>NSAM</strong>\n   </td>\n   <td>Northern South America\n   </td>\n  </tr>\n  <tr>\n   <td><strong>SSAM</strong>\n   </td>\n   <td>Southern South America\n   </td>\n  </tr>\n  <tr>\n   <td><strong>OC</strong>\n   </td>\n   <td>Oceania\n   </td>\n  </tr>\n  <tr>\n   <td><strong>ME</strong>\n   </td>\n   <td>Middle East\n   </td>\n  </tr>\n  <tr>\n   <td><strong>NAF</strong>\n   </td>\n   <td>Northern Africa\n   </td>\n  </tr>\n  <tr>\n   <td><strong>SAF</strong>\n   </td>\n   <td>Southern Africa\n   </td>\n  </tr>\n  <tr>\n   <td><strong>SAS</strong>\n   </td>\n   <td>Southern Asia\n   </td>\n  </tr>\n  <tr>\n   <td><strong>SEAS</strong>\n   </td>\n   <td>Southeast Asia\n   </td>\n  </tr>\n  <tr>\n   <td><strong>NEAS</strong>\n   </td>\n   <td>Northeast Asia\n   </td>\n  </tr>\n  </tbody>\n</table>","position":{"start":{"line":48,"column":1,"offset":3016},"end":{"line":137,"column":9,"offset":4244},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"export","value":"export const _frontmatter = {\"order\":12}","position":{"start":{"line":140,"column":1,"offset":4247},"end":{"line":140,"column":41,"offset":4287},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":140,"column":41,"offset":4287}}}}},{"node":{"fields":{"slug":"/understand-basics/session-affinity"},"frontmatter":{"order":16,"title":"","summary":null,"demo":null,"tags":null},"headings":[{"value":"Session affinity"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Session affinity","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":19,"offset":19},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":19,"offset":19},"indent":[]}},{"type":"jsx","value":"<Aside type='warning' header='Important'>","position":{"start":{"line":4,"column":1,"offset":21},"end":{"line":4,"column":42,"offset":62},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare supports only cookie-based session affinity. Other methods, such as TCP session affinity, are not supported.","position":{"start":{"line":6,"column":1,"offset":64},"end":{"line":6,"column":120,"offset":183},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":64},"end":{"line":6,"column":120,"offset":183},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":8,"column":1,"offset":185},"end":{"line":8,"column":9,"offset":193},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":10,"column":4,"offset":198},"end":{"line":10,"column":12,"offset":206},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":195},"end":{"line":10,"column":12,"offset":206},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Loading a website usually requires fetching multiple assets from a web server. Cloudflare Session Affinity minimizes redundant network requests by automatically directing requests from the same client to the same origin web server. Cloudflare sets a cookie on the initial response to the client. Using the cookie in subsequent client requests ensures those requests are sent to the same origin, unless the origin is unavailable.","position":{"start":{"line":12,"column":1,"offset":208},"end":{"line":12,"column":429,"offset":636},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":208},"end":{"line":12,"column":429,"offset":636},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When enabled, Cloudflare Session Affinity does the following:","position":{"start":{"line":14,"column":1,"offset":638},"end":{"line":14,"column":62,"offset":699},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":638},"end":{"line":14,"column":62,"offset":699},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"When a client makes its first request","position":{"start":{"line":16,"column":5,"offset":705},"end":{"line":16,"column":42,"offset":742},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":703},"end":{"line":16,"column":44,"offset":744},"indent":[]}},{"type":"text","value":", Cloudflare sets a CFLib cookie on the client. The cookie encodes the origin to which the request will be forwarded.","position":{"start":{"line":16,"column":44,"offset":744},"end":{"line":16,"column":161,"offset":861},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":703},"end":{"line":16,"column":161,"offset":861},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":701},"end":{"line":16,"column":161,"offset":861},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Subsequent requests by the same client are forwarded to that origin","position":{"start":{"line":17,"column":5,"offset":866},"end":{"line":17,"column":72,"offset":933},"indent":[]}}],"position":{"start":{"line":17,"column":3,"offset":864},"end":{"line":17,"column":74,"offset":935},"indent":[]}},{"type":"text","value":" for the duration of the cookie and as long as the origin server remains healthy.","position":{"start":{"line":17,"column":74,"offset":935},"end":{"line":17,"column":155,"offset":1016},"indent":[]}}],"position":{"start":{"line":17,"column":3,"offset":864},"end":{"line":17,"column":155,"offset":1016},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":862},"end":{"line":17,"column":155,"offset":1016},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"If the cookie expires or the origin server is unhealthy","position":{"start":{"line":18,"column":5,"offset":1021},"end":{"line":18,"column":60,"offset":1076},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":1019},"end":{"line":18,"column":62,"offset":1078},"indent":[]}},{"type":"text","value":", Cloudflare sets a new cookie encoding the appropriate failover origin.","position":{"start":{"line":18,"column":62,"offset":1078},"end":{"line":18,"column":134,"offset":1150},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":1019},"end":{"line":18,"column":134,"offset":1150},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1017},"end":{"line":18,"column":134,"offset":1150},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":701},"end":{"line":18,"column":134,"offset":1150},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"All sessions default to 23 hours unless a custom session TTL is specified (in seconds) between 30 minutes and 7 days. A Session Affinity Cookie is required to honor the TTL. The session cookie is secure when ","position":{"start":{"line":20,"column":1,"offset":1152},"end":{"line":20,"column":209,"offset":1360},"indent":[]}},{"type":"link","title":null,"url":"https://support.cloudflare.com/hc/articles/204144518#h_a61bfdef-08dd-40f8-8888-7edd8e40d156","children":[{"type":"text","value":"Always Use HTTPS","position":{"start":{"line":20,"column":210,"offset":1361},"end":{"line":20,"column":226,"offset":1377},"indent":[]}}],"position":{"start":{"line":20,"column":209,"offset":1360},"end":{"line":20,"column":320,"offset":1471},"indent":[]}},{"type":"text","value":" is enabled. Additionally, HttpOnly is always enabled for the cookie to prevent cross-site scripting attacks.","position":{"start":{"line":20,"column":320,"offset":1471},"end":{"line":20,"column":429,"offset":1580},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1152},"end":{"line":20,"column":429,"offset":1580},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":22,"column":1,"offset":1582},"end":{"line":22,"column":4,"offset":1585},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Enabling Session Affinity from the Cloudflare dashboard","position":{"start":{"line":24,"column":4,"offset":1590},"end":{"line":24,"column":59,"offset":1645},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1587},"end":{"line":24,"column":59,"offset":1645},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To enable Session Affinity, use the ","position":{"start":{"line":26,"column":1,"offset":1647},"end":{"line":26,"column":37,"offset":1683},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Session Affinity","position":{"start":{"line":26,"column":39,"offset":1685},"end":{"line":26,"column":55,"offset":1701},"indent":[]}}],"position":{"start":{"line":26,"column":37,"offset":1683},"end":{"line":26,"column":57,"offset":1703},"indent":[]}},{"type":"text","value":" panel in the ","position":{"start":{"line":26,"column":57,"offset":1703},"end":{"line":26,"column":71,"offset":1717},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Load Balancing","position":{"start":{"line":26,"column":73,"offset":1719},"end":{"line":26,"column":87,"offset":1733},"indent":[]}}],"position":{"start":{"line":26,"column":71,"offset":1717},"end":{"line":26,"column":89,"offset":1735},"indent":[]}},{"type":"text","value":" app.","position":{"start":{"line":26,"column":89,"offset":1735},"end":{"line":26,"column":94,"offset":1740},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1647},"end":{"line":26,"column":94,"offset":1740},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Configuring Session Affinity for a new load balancer","position":{"start":{"line":28,"column":5,"offset":1746},"end":{"line":28,"column":57,"offset":1798},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1742},"end":{"line":28,"column":57,"offset":1798},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can enable ","position":{"start":{"line":30,"column":1,"offset":1800},"end":{"line":30,"column":16,"offset":1815},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Session Affinity","position":{"start":{"line":30,"column":18,"offset":1817},"end":{"line":30,"column":34,"offset":1833},"indent":[]}}],"position":{"start":{"line":30,"column":16,"offset":1815},"end":{"line":30,"column":36,"offset":1835},"indent":[]}},{"type":"text","value":" when you ","position":{"start":{"line":30,"column":36,"offset":1835},"end":{"line":30,"column":46,"offset":1845},"indent":[]}},{"type":"link","title":null,"url":"/create-load-balancer-ui","children":[{"type":"text","value":"create a load balancer","position":{"start":{"line":30,"column":47,"offset":1846},"end":{"line":30,"column":69,"offset":1868},"indent":[]}}],"position":{"start":{"line":30,"column":46,"offset":1845},"end":{"line":30,"column":96,"offset":1895},"indent":[]}},{"type":"text","value":", during the first step of the Create Load Balancer wizard.","position":{"start":{"line":30,"column":96,"offset":1895},"end":{"line":30,"column":155,"offset":1954},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":1800},"end":{"line":30,"column":155,"offset":1954},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To enable session affinity, click the ","position":{"start":{"line":32,"column":1,"offset":1956},"end":{"line":32,"column":39,"offset":1994},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"By Cloudflare cookie only","position":{"start":{"line":32,"column":41,"offset":1996},"end":{"line":32,"column":66,"offset":2021},"indent":[]}}],"position":{"start":{"line":32,"column":39,"offset":1994},"end":{"line":32,"column":68,"offset":2023},"indent":[]}},{"type":"text","value":" radio button and toggle Session Affinity:","position":{"start":{"line":32,"column":68,"offset":2023},"end":{"line":32,"column":110,"offset":2065},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":1956},"end":{"line":32,"column":110,"offset":2065},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/session-affinity-1.png","alt":"Configure Session Affinity","position":{"start":{"line":34,"column":1,"offset":2067},"end":{"line":34,"column":71,"offset":2137},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":2067},"end":{"line":34,"column":71,"offset":2137},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":36,"column":1,"offset":2139},"end":{"line":36,"column":5,"offset":2143},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Client IP fallback","position":{"start":{"line":36,"column":7,"offset":2145},"end":{"line":36,"column":25,"offset":2163},"indent":[]}}],"position":{"start":{"line":36,"column":5,"offset":2143},"end":{"line":36,"column":27,"offset":2165},"indent":[]}},{"type":"text","value":" option behaves the same as the cookie option except the client IP address is used as a fallback when no session affinity cookie is provided.","position":{"start":{"line":36,"column":27,"offset":2165},"end":{"line":36,"column":168,"offset":2306},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":2139},"end":{"line":36,"column":168,"offset":2306},"indent":[]}},{"type":"jsx","value":"<Aside type='warning' header='Important'>","position":{"start":{"line":38,"column":1,"offset":2308},"end":{"line":38,"column":42,"offset":2349},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Session Affinity with Client IP fallback is not supported for load balancers in ","position":{"start":{"line":40,"column":1,"offset":2351},"end":{"line":40,"column":81,"offset":2431},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/proxy-modes","children":[{"type":"text","value":"DNS-only mode (gray cloud)","position":{"start":{"line":40,"column":82,"offset":2432},"end":{"line":40,"column":108,"offset":2458},"indent":[]}}],"position":{"start":{"line":40,"column":81,"offset":2431},"end":{"line":40,"column":141,"offset":2491},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":40,"column":141,"offset":2491},"end":{"line":40,"column":142,"offset":2492},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":2351},"end":{"line":40,"column":142,"offset":2492},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":42,"column":1,"offset":2494},"end":{"line":42,"column":9,"offset":2502},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Configuring Session Affinity for an existing load balancer","position":{"start":{"line":44,"column":5,"offset":2508},"end":{"line":44,"column":63,"offset":2566},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":2504},"end":{"line":44,"column":63,"offset":2566},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can configure session affinity for an existing load balancer from the Load Balancing dashboard. Click the ","position":{"start":{"line":46,"column":1,"offset":2568},"end":{"line":46,"column":111,"offset":2678},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Edit","position":{"start":{"line":46,"column":113,"offset":2680},"end":{"line":46,"column":117,"offset":2684},"indent":[]}}],"position":{"start":{"line":46,"column":111,"offset":2678},"end":{"line":46,"column":119,"offset":2686},"indent":[]}},{"type":"text","value":" button associated with the load balancer to open the ","position":{"start":{"line":46,"column":119,"offset":2686},"end":{"line":46,"column":173,"offset":2740},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Edit Load Balancer","position":{"start":{"line":46,"column":175,"offset":2742},"end":{"line":46,"column":193,"offset":2760},"indent":[]}}],"position":{"start":{"line":46,"column":173,"offset":2740},"end":{"line":46,"column":195,"offset":2762},"indent":[]}},{"type":"text","value":" view and access the ","position":{"start":{"line":46,"column":195,"offset":2762},"end":{"line":46,"column":216,"offset":2783},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Session Affinity","position":{"start":{"line":46,"column":218,"offset":2785},"end":{"line":46,"column":234,"offset":2801},"indent":[]}}],"position":{"start":{"line":46,"column":216,"offset":2783},"end":{"line":46,"column":236,"offset":2803},"indent":[]}},{"type":"text","value":" option.","position":{"start":{"line":46,"column":236,"offset":2803},"end":{"line":46,"column":244,"offset":2811},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":2568},"end":{"line":46,"column":244,"offset":2811},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/session-affinity-2.png","alt":"Load balancing card Edit option","position":{"start":{"line":48,"column":1,"offset":2813},"end":{"line":48,"column":76,"offset":2888},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":2813},"end":{"line":48,"column":76,"offset":2888},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Origin Drain","position":{"start":{"line":50,"column":5,"offset":2894},"end":{"line":50,"column":17,"offset":2906},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":2890},"end":{"line":50,"column":17,"offset":2906},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Drain or remove all traffic from an origin without affecting any active customers using Origin Drain. Enable Origin Drain by entering a value in the ","position":{"start":{"line":52,"column":1,"offset":2908},"end":{"line":52,"column":150,"offset":3057},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Origin drain duration TTL","position":{"start":{"line":52,"column":152,"offset":3059},"end":{"line":52,"column":177,"offset":3084},"indent":[]}}],"position":{"start":{"line":52,"column":150,"offset":3057},"end":{"line":52,"column":179,"offset":3086},"indent":[]}},{"type":"text","value":" field, after enabling Session Affinity. ","position":{"start":{"line":52,"column":179,"offset":3086},"end":{"line":52,"column":220,"offset":3127},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Origin drain duration TTL","position":{"start":{"line":52,"column":222,"offset":3129},"end":{"line":52,"column":247,"offset":3154},"indent":[]}}],"position":{"start":{"line":52,"column":220,"offset":3127},"end":{"line":52,"column":249,"offset":3156},"indent":[]}},{"type":"text","value":" is the time (in seconds) it takes to drain all active connections. Traffic drains from any disabled origin or from all origins within a disabled pool.","position":{"start":{"line":52,"column":249,"offset":3156},"end":{"line":52,"column":400,"offset":3307},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":2908},"end":{"line":52,"column":400,"offset":3307},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/session-affinity-3.png","alt":"Session affinity configuration with origin drain","position":{"start":{"line":54,"column":1,"offset":3309},"end":{"line":54,"column":93,"offset":3401},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":3309},"end":{"line":54,"column":93,"offset":3401},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To check the status of a disabled origin’s drain, use the added ","position":{"start":{"line":56,"column":1,"offset":3403},"end":{"line":56,"column":65,"offset":3467},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Drain Time","position":{"start":{"line":56,"column":67,"offset":3469},"end":{"line":56,"column":77,"offset":3479},"indent":[]}}],"position":{"start":{"line":56,"column":65,"offset":3467},"end":{"line":56,"column":79,"offset":3481},"indent":[]}},{"type":"text","value":" column in the Manage Load Balancer table. ","position":{"start":{"line":56,"column":79,"offset":3481},"end":{"line":56,"column":122,"offset":3524},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Drain Time","position":{"start":{"line":56,"column":124,"offset":3526},"end":{"line":56,"column":134,"offset":3536},"indent":[]}}],"position":{"start":{"line":56,"column":122,"offset":3524},"end":{"line":56,"column":136,"offset":3538},"indent":[]}},{"type":"text","value":" shows the time remaining for a drain in progress. You can edit the ","position":{"start":{"line":56,"column":136,"offset":3538},"end":{"line":56,"column":204,"offset":3606},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Origin drain duration TTL","position":{"start":{"line":56,"column":206,"offset":3608},"end":{"line":56,"column":231,"offset":3633},"indent":[]}}],"position":{"start":{"line":56,"column":204,"offset":3606},"end":{"line":56,"column":233,"offset":3635},"indent":[]}},{"type":"text","value":" field value while an origin drains. Entering a value shorter than the remaining TTL for drains in progress servers current connections to those origins.","position":{"start":{"line":56,"column":233,"offset":3635},"end":{"line":56,"column":386,"offset":3788},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":3403},"end":{"line":56,"column":386,"offset":3788},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/session-affinity-4.png","alt":"Manage Load Balancer table with draining in progress","position":{"start":{"line":58,"column":1,"offset":3790},"end":{"line":58,"column":97,"offset":3886},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":3790},"end":{"line":58,"column":97,"offset":3886},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When a drain is ","position":{"start":{"line":60,"column":1,"offset":3888},"end":{"line":60,"column":17,"offset":3904},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Complete","position":{"start":{"line":60,"column":19,"offset":3906},"end":{"line":60,"column":27,"offset":3914},"indent":[]}}],"position":{"start":{"line":60,"column":17,"offset":3904},"end":{"line":60,"column":29,"offset":3916},"indent":[]}},{"type":"text","value":", there are no longer any connections to that origin.","position":{"start":{"line":60,"column":29,"offset":3916},"end":{"line":60,"column":82,"offset":3969},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":3888},"end":{"line":60,"column":82,"offset":3969},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/session-affinity-5.png","alt":"Manage Load Balancer table with draining complete","position":{"start":{"line":62,"column":1,"offset":3971},"end":{"line":62,"column":94,"offset":4064},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":3971},"end":{"line":62,"column":94,"offset":4064},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":64,"column":1,"offset":4066},"end":{"line":64,"column":4,"offset":4069},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Enabling Session Affinity via the Cloudflare API","position":{"start":{"line":66,"column":4,"offset":4074},"end":{"line":66,"column":52,"offset":4122},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":4071},"end":{"line":66,"column":52,"offset":4122},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Session affinity is a property of load balancers. Use the following endpoint to configure Session Affinity (see ","position":{"start":{"line":68,"column":1,"offset":4124},"end":{"line":68,"column":113,"offset":4236},"indent":[]}},{"type":"link","title":null,"url":"/create-load-balancer-api/","children":[{"type":"emphasis","children":[{"type":"text","value":"Create a load balancer with the API","position":{"start":{"line":68,"column":115,"offset":4238},"end":{"line":68,"column":150,"offset":4273},"indent":[]}}],"position":{"start":{"line":68,"column":114,"offset":4237},"end":{"line":68,"column":151,"offset":4274},"indent":[]}}],"position":{"start":{"line":68,"column":113,"offset":4236},"end":{"line":68,"column":180,"offset":4303},"indent":[]}},{"type":"text","value":"):","position":{"start":{"line":68,"column":180,"offset":4303},"end":{"line":68,"column":182,"offset":4305},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":4124},"end":{"line":68,"column":182,"offset":4305},"indent":[]}},{"type":"code","lang":"txt","meta":null,"value":"zones/:identifier/load_balancers","position":{"start":{"line":70,"column":1,"offset":4307},"end":{"line":72,"column":4,"offset":4350},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Set the ","position":{"start":{"line":74,"column":1,"offset":4352},"end":{"line":74,"column":9,"offset":4360},"indent":[]}},{"type":"inlineCode","value":"session_affinity","position":{"start":{"line":74,"column":9,"offset":4360},"end":{"line":74,"column":27,"offset":4378},"indent":[]}},{"type":"text","value":" parameter to configure the feature. The default value is an empty string, which indicates that Session Affinity is disabled. To enable it, use the value “cookie” in your request.","position":{"start":{"line":74,"column":27,"offset":4378},"end":{"line":74,"column":206,"offset":4557},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":4352},"end":{"line":74,"column":206,"offset":4557},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Set the ","position":{"start":{"line":76,"column":1,"offset":4559},"end":{"line":76,"column":9,"offset":4567},"indent":[]}},{"type":"inlineCode","value":"session_affinity_ttl","position":{"start":{"line":76,"column":9,"offset":4567},"end":{"line":76,"column":31,"offset":4589},"indent":[]}},{"type":"text","value":" parameter to configure the duration of session affinity cookies. Values are in seconds and must be in the range 1800–604800 (30 minutes to seven days). Unless ","position":{"start":{"line":76,"column":31,"offset":4589},"end":{"line":76,"column":191,"offset":4749},"indent":[]}},{"type":"inlineCode","value":"session_affinity","position":{"start":{"line":76,"column":191,"offset":4749},"end":{"line":76,"column":209,"offset":4767},"indent":[]}},{"type":"text","value":" is explicitly set, the default value of 23 hours is used. This parameter is ignored when Session Affinity is disabled.","position":{"start":{"line":76,"column":209,"offset":4767},"end":{"line":76,"column":328,"offset":4886},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":4559},"end":{"line":76,"column":328,"offset":4886},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For a detailed description of the limitations and values available for ","position":{"start":{"line":78,"column":1,"offset":4888},"end":{"line":78,"column":72,"offset":4959},"indent":[]}},{"type":"inlineCode","value":"session-affinity","position":{"start":{"line":78,"column":72,"offset":4959},"end":{"line":78,"column":90,"offset":4977},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":78,"column":90,"offset":4977},"end":{"line":78,"column":95,"offset":4982},"indent":[]}},{"type":"inlineCode","value":"session_affinity_ttl","position":{"start":{"line":78,"column":95,"offset":4982},"end":{"line":78,"column":117,"offset":5004},"indent":[]}},{"type":"text","value":", see ","position":{"start":{"line":78,"column":117,"offset":5004},"end":{"line":78,"column":123,"offset":5010},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/load-balancers/#properties","children":[{"type":"emphasis","children":[{"type":"text","value":"Load balancers","position":{"start":{"line":78,"column":125,"offset":5012},"end":{"line":78,"column":139,"offset":5026},"indent":[]}}],"position":{"start":{"line":78,"column":124,"offset":5011},"end":{"line":78,"column":140,"offset":5027},"indent":[]}}],"position":{"start":{"line":78,"column":123,"offset":5010},"end":{"line":78,"column":188,"offset":5075},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":78,"column":188,"offset":5075},"end":{"line":78,"column":189,"offset":5076},"indent":[]}}],"position":{"start":{"line":78,"column":1,"offset":4888},"end":{"line":78,"column":189,"offset":5076},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Configuring Session Affinity for a new load balancer","position":{"start":{"line":80,"column":5,"offset":5082},"end":{"line":80,"column":57,"offset":5134},"indent":[]}}],"position":{"start":{"line":80,"column":1,"offset":5078},"end":{"line":80,"column":57,"offset":5134},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can configure session affinity as part of your request to the Create Load Balancer command.","position":{"start":{"line":82,"column":1,"offset":5136},"end":{"line":82,"column":96,"offset":5231},"indent":[]}}],"position":{"start":{"line":82,"column":1,"offset":5136},"end":{"line":82,"column":96,"offset":5231},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Request example (","position":{"start":{"line":84,"column":3,"offset":5235},"end":{"line":84,"column":20,"offset":5252},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"curl","position":{"start":{"line":84,"column":21,"offset":5253},"end":{"line":84,"column":25,"offset":5257},"indent":[]}}],"position":{"start":{"line":84,"column":20,"offset":5252},"end":{"line":84,"column":26,"offset":5258},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":84,"column":26,"offset":5258},"end":{"line":84,"column":27,"offset":5259},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":5233},"end":{"line":84,"column":29,"offset":5261},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":5233},"end":{"line":84,"column":29,"offset":5261},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -X POST \"https://api.cloudflare.com/client/v4/zones/699d98642c564d2e855e9661899b7252/load_balancers\" \\\n     -H \"X-Auth-Email: user@example.com\" \\\n     -H \"X-Auth-Key: c2547eb745079dac9320b638f5e225cf483cc5cfdda41\" \\\n     -H \"Content-Type: application/json\" \\\n     --data '   \"description\":\"Load Balancer for www.example.com\",\n   \"name\":\"www.example.com\",\n   \"ttl\":30,\n   \"fallback_pool\":\"17b5962d775c646f3f9725cbc7a53df4\",\n   \"default_pools\":[\n      \"17b5962d775c646f3f9725cbc7a53df4\",\n      \"9290f38c5d07c2e2f4df57b1f61d4196\",\n      \"00920f38ce07c2e2f4df50b1f61d4194\"\n   ],\n   \"region_pools\":{\n      \"WNAM\":[\n         \"de90f38ced07c2e2f4df50b1f61d4194\",\n         \"9290f38c5d07c2e2f4df57b1f61d4196\"\n      ],\n      \"ENAM\":[\n         \"00920f38ce07c2e2f4df50b1f61d4194\"\n      ]\n   },\n   \"pop_pools\":{\n      \"LAX\":[\n         \"de90f38ced07c2e2f4df50b1f61d4194\",\n         \"9290f38c5d07c2e2f4df57b1f61d4196\"\n      ],\n      \"LHR\":[\n         \"abd90f38ced07c2e2f4df50b1f61d4194\",\n         \"f9138c5d07c2e2f4df57b1f61d4196\"\n      ],\n      \"SJC\":[\n         \"00920f38ce07c2e2f4df50b1f61d4194\"\n      ]\n   },\n   \"proxied\":true,\n   \"steering_policy\":\"dynamic_latency\",\n   \"session_affinity\":\"cookie\",\n   \"session_affinity_ttl\":5000\n}''","position":{"start":{"line":86,"column":1,"offset":5263},"end":{"line":127,"column":4,"offset":6498},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Response","position":{"start":{"line":129,"column":3,"offset":6502},"end":{"line":129,"column":11,"offset":6510},"indent":[]}}],"position":{"start":{"line":129,"column":1,"offset":6500},"end":{"line":129,"column":13,"offset":6512},"indent":[]}}],"position":{"start":{"line":129,"column":1,"offset":6500},"end":{"line":129,"column":13,"offset":6512},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": \"699d98642c564d2e855e9661899b7252\",\n    \"created_on\": \"2014-01-01T05:20:00.12345Z\",\n    \"modified_on\": \"2014-01-01T05:20:00.12345Z\",\n    \"description\": \"Load Balancer for www.example.com\",\n    \"name\": \"www.example.com\",\n    \"enabled\": true,\n    \"ttl\": 30,\n    \"fallback_pool\": \"17b5962d775c646f3f9725cbc7a53df4\",\n    \"default_pools\": [\n      \"17b5962d775c646f3f9725cbc7a53df4\",\n      \"9290f38c5d07c2e2f4df57b1f61d4196\",\n      \"00920f38ce07c2e2f4df50b1f61d4194\"\n    ],\n    \"region_pools\": {\n      \"WNAM\": [\n        \"de90f38ced07c2e2f4df50b1f61d4194\",\n        \"9290f38c5d07c2e2f4df57b1f61d4196\"\n      ],\n      \"ENAM\": [\n        \"00920f38ce07c2e2f4df50b1f61d4194\"\n      ]\n    },\n    \"pop_pools\": {\n      \"LAX\": [\n        \"de90f38ced07c2e2f4df50b1f61d4194\",\n        \"9290f38c5d07c2e2f4df57b1f61d4196\"\n      ],\n      \"LHR\": [\n        \"abd90f38ced07c2e2f4df50b1f61d4194\",\n        \"f9138c5d07c2e2f4df57b1f61d4196\"\n      ],\n      \"SJC\": [\n        \"00920f38ce07c2e2f4df50b1f61d4194\"\n      ]\n    },\n    \"proxied\": true,\n    \"steering_policy\": \"dynamic_latency\",\n    \"session_affinity\": \"cookie\",\n    \"session_affinity_ttl\": 5000\n  }\n}","position":{"start":{"line":131,"column":1,"offset":6514},"end":{"line":178,"column":4,"offset":7729},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Configuring Session Affinity for an existing load balancer","position":{"start":{"line":180,"column":5,"offset":7735},"end":{"line":180,"column":63,"offset":7793},"indent":[]}}],"position":{"start":{"line":180,"column":1,"offset":7731},"end":{"line":180,"column":63,"offset":7793},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Use the Update Load Balancer endpoint to configure session affinity for an existing load balancer:","position":{"start":{"line":182,"column":1,"offset":7795},"end":{"line":182,"column":99,"offset":7893},"indent":[]}}],"position":{"start":{"line":182,"column":1,"offset":7795},"end":{"line":182,"column":99,"offset":7893},"indent":[]}},{"type":"code","lang":"txt","meta":null,"value":"PUT zones/:identifier/load_balancers/:identifier","position":{"start":{"line":184,"column":1,"offset":7895},"end":{"line":186,"column":4,"offset":7954},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Request example (curl)","position":{"start":{"line":188,"column":3,"offset":7958},"end":{"line":188,"column":25,"offset":7980},"indent":[]}}],"position":{"start":{"line":188,"column":1,"offset":7956},"end":{"line":188,"column":27,"offset":7982},"indent":[]}}],"position":{"start":{"line":188,"column":1,"offset":7956},"end":{"line":188,"column":27,"offset":7982},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -X PUT \"https://api.cloudflare.com/client/v4/zones/699d98642c564d2e855e9661899b7252/load_balancers\" \\\n     -H \"X-Auth-Email: user@example.com\" \\\n     -H \"X-Auth-Key: c2547eb745079dac9320b638f5e225cf483cc5cfdda41\" \\\n     -H \"Content-Type: application/json\" \\\n     --data '   \"description\":\"Load Balancer for www.example.com\",\n   \"name\":\"www.example.com\",\n   \"Enabled\":true,\n    \"proxied\":true,\n   \"steering_policy\":\"dynamic_latency\",\n   \"session_affinity\":\"cookie\",\n   \"session_affinity_ttl\":5000\n}''","position":{"start":{"line":190,"column":1,"offset":7984},"end":{"line":203,"column":4,"offset":8500},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Response","position":{"start":{"line":205,"column":3,"offset":8504},"end":{"line":205,"column":11,"offset":8512},"indent":[]}}],"position":{"start":{"line":205,"column":1,"offset":8502},"end":{"line":205,"column":13,"offset":8514},"indent":[]}}],"position":{"start":{"line":205,"column":1,"offset":8502},"end":{"line":205,"column":13,"offset":8514},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": \"699d98642c564d2e855e9661899b7252\",\n    \"created_on\": \"2014-01-01T05:20:00.12345Z\",\n    \"modified_on\": \"2014-01-01T05:20:00.12345Z\",\n    \"description\": \"Load Balancer for www.example.com\",\n    \"name\": \"www.example.com\",\n    \"enabled\": true,\n    \"proxied\": true,\n    \"steering_policy\": \"dynamic_latency\",\n    \"session_affinity\": \"cookie\",\n    \"session_affinity_ttl\": 5000\n  }\n}","position":{"start":{"line":207,"column":1,"offset":8516},"end":{"line":225,"column":4,"offset":8983},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"export","value":"export const _frontmatter = {\"order\":16}","position":{"start":{"line":228,"column":1,"offset":8986},"end":{"line":228,"column":41,"offset":9026},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":228,"column":41,"offset":9026}}}}},{"node":{"fields":{"slug":"/understand-basics/weighted-load-balancing"},"frontmatter":{"order":14,"title":"","summary":null,"demo":null,"tags":null},"headings":[{"value":"Weighted load balancing"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Weighted load balancing","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":26,"offset":26},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":26,"offset":26},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":4,"column":4,"offset":31},"end":{"line":4,"column":12,"offset":39},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":28},"end":{"line":4,"column":12,"offset":39},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Weighted load balancing allows the user to set a relative weight for each origin server in a pool. These weights determine the percentage of traffic sent to available origins within a pool. If an origin becomes unhealthy, traffic will be rebalanced to the remaining available origins according to their respective weights.","position":{"start":{"line":6,"column":1,"offset":41},"end":{"line":6,"column":323,"offset":363},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":41},"end":{"line":6,"column":323,"offset":363},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":8,"column":1,"offset":365},"end":{"line":8,"column":4,"offset":368},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Important notes","position":{"start":{"line":10,"column":4,"offset":373},"end":{"line":10,"column":19,"offset":388},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":370},"end":{"line":10,"column":19,"offset":388},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When working with origin weights, note the following:","position":{"start":{"line":12,"column":1,"offset":390},"end":{"line":12,"column":54,"offset":443},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":390},"end":{"line":12,"column":54,"offset":443},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"The value of each origin weight must be between 0 and 1","position":{"start":{"line":14,"column":5,"offset":449},"end":{"line":14,"column":60,"offset":504},"indent":[]}}],"position":{"start":{"line":14,"column":3,"offset":447},"end":{"line":14,"column":62,"offset":506},"indent":[]}},{"type":"text","value":", and the weight must be expressed in increments of 0.01 (a weight of 0.015 is not valid).","position":{"start":{"line":14,"column":62,"offset":506},"end":{"line":14,"column":152,"offset":596},"indent":[]}}],"position":{"start":{"line":14,"column":3,"offset":447},"end":{"line":14,"column":152,"offset":596},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":445},"end":{"line":14,"column":152,"offset":596},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"The default weight is 1","position":{"start":{"line":15,"column":5,"offset":601},"end":{"line":15,"column":28,"offset":624},"indent":[]}}],"position":{"start":{"line":15,"column":3,"offset":599},"end":{"line":15,"column":30,"offset":626},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":15,"column":30,"offset":626},"end":{"line":15,"column":31,"offset":627},"indent":[]}}],"position":{"start":{"line":15,"column":3,"offset":599},"end":{"line":15,"column":31,"offset":627},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":597},"end":{"line":15,"column":31,"offset":627},"indent":[]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"The percentage of traffic to send to a pool","position":{"start":{"line":16,"column":5,"offset":632},"end":{"line":16,"column":48,"offset":675},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":630},"end":{"line":16,"column":50,"offset":677},"indent":[]}},{"type":"text","value":" is calculated as follows:","position":{"start":{"line":16,"column":50,"offset":677},"end":{"line":16,"column":76,"offset":703},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":630},"end":{"line":16,"column":76,"offset":703},"indent":[]}},{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"Percent traffic to send to pool = origin weight for pool ÷ sum of available weights","position":{"start":{"line":18,"column":4,"offset":708},"end":{"line":18,"column":87,"offset":791},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":707},"end":{"line":18,"column":88,"offset":792},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":707},"end":{"line":18,"column":88,"offset":792},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":628},"end":{"line":19,"column":1,"offset":793},"indent":[1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Two pools with the same origin weights will receive the same traffic distribution","position":{"start":{"line":20,"column":5,"offset":798},"end":{"line":20,"column":86,"offset":879},"indent":[]}}],"position":{"start":{"line":20,"column":3,"offset":796},"end":{"line":20,"column":88,"offset":881},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":20,"column":88,"offset":881},"end":{"line":20,"column":89,"offset":882},"indent":[]}}],"position":{"start":{"line":20,"column":3,"offset":796},"end":{"line":20,"column":89,"offset":882},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":794},"end":{"line":20,"column":89,"offset":882},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"If you do not enter weights, all origins will default to a weight of 1","position":{"start":{"line":21,"column":5,"offset":887},"end":{"line":21,"column":75,"offset":957},"indent":[]}}],"position":{"start":{"line":21,"column":3,"offset":885},"end":{"line":21,"column":77,"offset":959},"indent":[]}},{"type":"text","value":", distributing traffic equally among the active origins.","position":{"start":{"line":21,"column":77,"offset":959},"end":{"line":21,"column":133,"offset":1015},"indent":[]}}],"position":{"start":{"line":21,"column":3,"offset":885},"end":{"line":21,"column":133,"offset":1015},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":883},"end":{"line":21,"column":133,"offset":1015},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"When enabled, session affinity can affect traffic distribution","position":{"start":{"line":22,"column":5,"offset":1020},"end":{"line":22,"column":67,"offset":1082},"indent":[]}}],"position":{"start":{"line":22,"column":3,"offset":1018},"end":{"line":22,"column":69,"offset":1084},"indent":[]}},{"type":"text","value":", since established sessions are not reset when origin weights are modified.","position":{"start":{"line":22,"column":69,"offset":1084},"end":{"line":22,"column":145,"offset":1160},"indent":[]}}],"position":{"start":{"line":22,"column":3,"offset":1018},"end":{"line":22,"column":145,"offset":1160},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1016},"end":{"line":22,"column":145,"offset":1160},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":445},"end":{"line":22,"column":145,"offset":1160},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"No traffic is sent to a Load Balancer origin of 0 weight except under the following conditions:","position":{"start":{"line":24,"column":1,"offset":1162},"end":{"line":24,"column":96,"offset":1257},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1162},"end":{"line":24,"column":96,"offset":1257},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The origin is used in multiple pools and has multiple weights assigned.  Check the origin in the Cloudflare Traffic App or via the List Pools API to confirm.","position":{"start":{"line":26,"column":3,"offset":1261},"end":{"line":26,"column":160,"offset":1418},"indent":[]}}],"position":{"start":{"line":26,"column":3,"offset":1261},"end":{"line":26,"column":160,"offset":1418},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1259},"end":{"line":26,"column":160,"offset":1418},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Health Checks are still sent at the expected interval for a 0-weight origin.","position":{"start":{"line":27,"column":3,"offset":1421},"end":{"line":27,"column":79,"offset":1497},"indent":[]}}],"position":{"start":{"line":27,"column":3,"offset":1421},"end":{"line":27,"column":79,"offset":1497},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1419},"end":{"line":27,"column":79,"offset":1497},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Grey-clouded Load Balancers support weights; however, DNS resolvers may cache resolved IPs for clients.","position":{"start":{"line":28,"column":3,"offset":1500},"end":{"line":28,"column":106,"offset":1603},"indent":[]}}],"position":{"start":{"line":28,"column":3,"offset":1500},"end":{"line":28,"column":106,"offset":1603},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1498},"end":{"line":28,"column":106,"offset":1603},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1259},"end":{"line":28,"column":106,"offset":1603},"indent":[1,1]}},{"type":"thematicBreak","position":{"start":{"line":30,"column":1,"offset":1605},"end":{"line":30,"column":4,"offset":1608},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Origin weights example","position":{"start":{"line":32,"column":4,"offset":1613},"end":{"line":32,"column":26,"offset":1635},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":1610},"end":{"line":32,"column":26,"offset":1635},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Here’s an example applying weights to three origin servers:","position":{"start":{"line":34,"column":1,"offset":1637},"end":{"line":34,"column":60,"offset":1696},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":1637},"end":{"line":34,"column":60,"offset":1696},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Weights:","position":{"start":{"line":36,"column":5,"offset":1702},"end":{"line":36,"column":13,"offset":1710},"indent":[]}}],"position":{"start":{"line":36,"column":3,"offset":1700},"end":{"line":36,"column":15,"offset":1712},"indent":[]}},{"type":"text","value":" Origin Server A = 0.25; Origin Server B = 0.25; Origin Server C = 0.50","position":{"start":{"line":36,"column":15,"offset":1712},"end":{"line":36,"column":86,"offset":1783},"indent":[]}}],"position":{"start":{"line":36,"column":3,"offset":1700},"end":{"line":36,"column":86,"offset":1783},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":1698},"end":{"line":36,"column":86,"offset":1783},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"When all origins are healthy","position":{"start":{"line":37,"column":5,"offset":1788},"end":{"line":37,"column":33,"offset":1816},"indent":[]}}],"position":{"start":{"line":37,"column":3,"offset":1786},"end":{"line":37,"column":35,"offset":1818},"indent":[]}},{"type":"text","value":", each origin will receive the following proportion of total traffic: A = 25%; B = 25%; C = 50%.","position":{"start":{"line":37,"column":35,"offset":1818},"end":{"line":37,"column":131,"offset":1914},"indent":[]}}],"position":{"start":{"line":37,"column":3,"offset":1786},"end":{"line":37,"column":131,"offset":1914},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":1784},"end":{"line":37,"column":131,"offset":1914},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"When one origin is unhealthy","position":{"start":{"line":38,"column":5,"offset":1919},"end":{"line":38,"column":33,"offset":1947},"indent":[]}}],"position":{"start":{"line":38,"column":3,"offset":1917},"end":{"line":38,"column":35,"offset":1949},"indent":[]}},{"type":"text","value":" (such as origin C), each healthy origin will receive the following proportion of total traffic: A = 50%; B=50%.","position":{"start":{"line":38,"column":35,"offset":1949},"end":{"line":38,"column":147,"offset":2061},"indent":[]}}],"position":{"start":{"line":38,"column":3,"offset":1917},"end":{"line":38,"column":147,"offset":2061},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":1915},"end":{"line":38,"column":147,"offset":2061},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":1698},"end":{"line":38,"column":147,"offset":2061},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"A significant amount of traffic is required for the distribution to converge on the expected values.","position":{"start":{"line":40,"column":1,"offset":2063},"end":{"line":40,"column":101,"offset":2163},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":2063},"end":{"line":40,"column":101,"offset":2163},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":42,"column":1,"offset":2165},"end":{"line":42,"column":4,"offset":2168},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Configuring weights from the Load Balancing dashboard","position":{"start":{"line":44,"column":4,"offset":2173},"end":{"line":44,"column":57,"offset":2226},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":2170},"end":{"line":44,"column":57,"offset":2226},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Users can configure origin weights when they set up a load balancer or from the ","position":{"start":{"line":46,"column":1,"offset":2228},"end":{"line":46,"column":81,"offset":2308},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Load Balancing","position":{"start":{"line":46,"column":83,"offset":2310},"end":{"line":46,"column":97,"offset":2324},"indent":[]}}],"position":{"start":{"line":46,"column":81,"offset":2308},"end":{"line":46,"column":99,"offset":2326},"indent":[]}},{"type":"text","value":" dashboard in the ","position":{"start":{"line":46,"column":99,"offset":2326},"end":{"line":46,"column":117,"offset":2344},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Traffic","position":{"start":{"line":46,"column":119,"offset":2346},"end":{"line":46,"column":126,"offset":2353},"indent":[]}}],"position":{"start":{"line":46,"column":117,"offset":2344},"end":{"line":46,"column":128,"offset":2355},"indent":[]}},{"type":"text","value":" app.","position":{"start":{"line":46,"column":128,"offset":2355},"end":{"line":46,"column":133,"offset":2360},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":2228},"end":{"line":46,"column":133,"offset":2360},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/weighted-load-balancing-1.png","alt":null,"position":{"start":{"line":48,"column":1,"offset":2362},"end":{"line":48,"column":52,"offset":2413},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":2362},"end":{"line":48,"column":52,"offset":2413},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":50,"column":1,"offset":2415},"end":{"line":50,"column":4,"offset":2418},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Configuring weights via the Cloudflare API","position":{"start":{"line":52,"column":4,"offset":2423},"end":{"line":52,"column":46,"offset":2465},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":2420},"end":{"line":52,"column":46,"offset":2465},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Origin weight is a property of origin server objects, which are associated with pools. To configure the weight of an origin server with the Cloudflare API, use the Update Pools command to set the ","position":{"start":{"line":54,"column":1,"offset":2467},"end":{"line":54,"column":197,"offset":2663},"indent":[]}},{"type":"inlineCode","value":"weight","position":{"start":{"line":54,"column":197,"offset":2663},"end":{"line":54,"column":205,"offset":2671},"indent":[]}},{"type":"text","value":" property of the origin.","position":{"start":{"line":54,"column":205,"offset":2671},"end":{"line":54,"column":229,"offset":2695},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":2467},"end":{"line":54,"column":229,"offset":2695},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The example below uses the Update Pools command—","position":{"start":{"line":56,"column":1,"offset":2697},"end":{"line":56,"column":49,"offset":2745},"indent":[]}},{"type":"inlineCode","value":"POST /user/load_balancers/pools","position":{"start":{"line":56,"column":49,"offset":2745},"end":{"line":56,"column":82,"offset":2778},"indent":[]}},{"type":"text","value":"—to create a pool named ","position":{"start":{"line":56,"column":82,"offset":2778},"end":{"line":56,"column":106,"offset":2802},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"examplepool","position":{"start":{"line":56,"column":107,"offset":2803},"end":{"line":56,"column":118,"offset":2814},"indent":[]}}],"position":{"start":{"line":56,"column":106,"offset":2802},"end":{"line":56,"column":119,"offset":2815},"indent":[]}},{"type":"text","value":" and set weights for each of three origins.","position":{"start":{"line":56,"column":119,"offset":2815},"end":{"line":56,"column":162,"offset":2858},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":2697},"end":{"line":56,"column":162,"offset":2858},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Request (curl)","position":{"start":{"line":58,"column":3,"offset":2862},"end":{"line":58,"column":17,"offset":2876},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":2860},"end":{"line":58,"column":19,"offset":2878},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":2860},"end":{"line":58,"column":19,"offset":2878},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -X POST \"https://api.cloudflare.com/client/v4/user/load_balancers/pools\" \\\n     -H \"X-Auth-Email: user@example.com\" \\\n     -H \"X-Auth-Key: c2547eb745079dac9320b638f5e225cf483cc5cfdda41\" \\\n     -H \"Content-Type: application/json\" \\\n--data '{\n   \"description\":\"Primary data center - Provider XYZ\",\n   \"name\":\"primary-dc-1\",\n   \"enabled\":true,\n   \"minimum_origins\":2,\n   \"monitor\":\"f1aba936b94213e5b8dca0c0dbf1f9cc\",\n   \"origins\":[\n      {\n        \"name\": \"server-a\",\n        \"address\": \"0.0.1.0\",\n        \"weight\": 0.25\n       },\n       {\n         \"name\": \"server-b\",\n         \"address\": \"0.0.2.0\",\n         \"weight\": 0.25\n       },\n       {\n         \"name\": \"server-c\",\n         \"address\": \"0.0.3.0\",\n         \"weight\": 0.50\n       }\n   ]\n}'","position":{"start":{"line":60,"column":1,"offset":2880},"end":{"line":89,"column":4,"offset":3637},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Response","position":{"start":{"line":91,"column":3,"offset":3641},"end":{"line":91,"column":11,"offset":3649},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":3639},"end":{"line":91,"column":13,"offset":3651},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":3639},"end":{"line":91,"column":13,"offset":3651},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": \"17b5962d775c646f3f9725cbc7a53df4\",\n    \"created_on\": \"2014-01-01T05:20:00.12345Z\",\n    \"modified_on\": \"2014-01-01T05:20:00.12345Z\",\n    \"description\": \"Primary data center - Provider XYZ\",\n    \"name\": \"primary-dc-1\",\n    \"enabled\": true,\n    \"minimum_origins\": 2,\n    \"monitor\": \"f1aba936b94213e5b8dca0c0dbf1f9cc\",\n    \"check_regions\": [\n      \"WEU\",\n      \"ENAM\"\n    ],\n \"origins\":[\n      {\n        \"name\": \"server-a\",\n        \"address\": \"0.0.1.0\",\n        \"weight\": 0.25\n       },\n       {\n         \"name\": \"server-b\",\n         \"address\": \"0.0.2.0\",\n         \"weight\": 0.25\n       },\n       {\n         \"name\": \"server-c\",\n         \"address\": \"0.0.3.0\",\n         \"weight\": 0.50\n       }\n   ]\n}","position":{"start":{"line":93,"column":1,"offset":3653},"end":{"line":129,"column":4,"offset":4439},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"export","value":"export const _frontmatter = {\"order\":14}","position":{"start":{"line":132,"column":1,"offset":4442},"end":{"line":132,"column":41,"offset":4482},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":132,"column":41,"offset":4482}}}}},{"node":{"fields":{"slug":"/understand-basics/load-balancing-rules/expressions"},"frontmatter":{"order":20,"title":"Expressions","summary":null,"demo":null,"tags":null},"headings":[{"value":"Load Balancing expressions"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Load Balancing expressions","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":29,"offset":29},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":29,"offset":29},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":4,"column":4,"offset":34},"end":{"line":4,"column":12,"offset":42},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":31},"end":{"line":4,"column":12,"offset":42},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When working with ","position":{"start":{"line":6,"column":1,"offset":44},"end":{"line":6,"column":19,"offset":62},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/load-balancing-rules","children":[{"type":"text","value":"Load Balancing rules","position":{"start":{"line":6,"column":20,"offset":63},"end":{"line":6,"column":40,"offset":83},"indent":[]}}],"position":{"start":{"line":6,"column":19,"offset":62},"end":{"line":6,"column":82,"offset":125},"indent":[]}},{"type":"text","value":", you will encounter two kinds of expression:","position":{"start":{"line":6,"column":82,"offset":125},"end":{"line":6,"column":127,"offset":170},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":44},"end":{"line":6,"column":127,"offset":170},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#simple-expressions","children":[{"type":"text","value":"Simple expressions","position":{"start":{"line":8,"column":4,"offset":175},"end":{"line":8,"column":22,"offset":193},"indent":[]}}],"position":{"start":{"line":8,"column":3,"offset":174},"end":{"line":8,"column":44,"offset":215},"indent":[]}},{"type":"text","value":" compare a value from an HTTP request to a value defined in the expression. You can identify a simple expression by the presence of a ","position":{"start":{"line":8,"column":44,"offset":215},"end":{"line":8,"column":178,"offset":349},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"comparison operator","position":{"start":{"line":8,"column":180,"offset":351},"end":{"line":8,"column":199,"offset":370},"indent":[]}}],"position":{"start":{"line":8,"column":178,"offset":349},"end":{"line":8,"column":201,"offset":372},"indent":[]}},{"type":"text","value":" (","position":{"start":{"line":8,"column":201,"offset":372},"end":{"line":8,"column":203,"offset":374},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"equals","position":{"start":{"line":8,"column":204,"offset":375},"end":{"line":8,"column":210,"offset":381},"indent":[]}}],"position":{"start":{"line":8,"column":203,"offset":374},"end":{"line":8,"column":211,"offset":382},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":8,"column":211,"offset":382},"end":{"line":8,"column":215,"offset":386},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"less than","position":{"start":{"line":8,"column":216,"offset":387},"end":{"line":8,"column":225,"offset":396},"indent":[]}}],"position":{"start":{"line":8,"column":215,"offset":386},"end":{"line":8,"column":226,"offset":397},"indent":[]}},{"type":"text","value":", for example).","position":{"start":{"line":8,"column":226,"offset":397},"end":{"line":8,"column":241,"offset":412},"indent":[]}}],"position":{"start":{"line":8,"column":3,"offset":174},"end":{"line":8,"column":241,"offset":412},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":172},"end":{"line":9,"column":1,"offset":413},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#compound-expressions","children":[{"type":"text","value":"Compound expressions","position":{"start":{"line":10,"column":4,"offset":417},"end":{"line":10,"column":24,"offset":437},"indent":[]}}],"position":{"start":{"line":10,"column":3,"offset":416},"end":{"line":10,"column":48,"offset":461},"indent":[]}},{"type":"text","value":" combine two or more simple expressions into a single expression. You can identify a compound expression by the presence of a ","position":{"start":{"line":10,"column":48,"offset":461},"end":{"line":10,"column":174,"offset":587},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"logical operator","position":{"start":{"line":10,"column":176,"offset":589},"end":{"line":10,"column":192,"offset":605},"indent":[]}}],"position":{"start":{"line":10,"column":174,"offset":587},"end":{"line":10,"column":194,"offset":607},"indent":[]}},{"type":"text","value":" (","position":{"start":{"line":10,"column":194,"offset":607},"end":{"line":10,"column":196,"offset":609},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"and","position":{"start":{"line":10,"column":197,"offset":610},"end":{"line":10,"column":200,"offset":613},"indent":[]}}],"position":{"start":{"line":10,"column":196,"offset":609},"end":{"line":10,"column":201,"offset":614},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":10,"column":201,"offset":614},"end":{"line":10,"column":203,"offset":616},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"or","position":{"start":{"line":10,"column":204,"offset":617},"end":{"line":10,"column":206,"offset":619},"indent":[]}}],"position":{"start":{"line":10,"column":203,"offset":616},"end":{"line":10,"column":207,"offset":620},"indent":[]}},{"type":"text","value":", for example). With compound expressions you can tailor rules to specific use cases with a high degree of accuracy and precision.","position":{"start":{"line":10,"column":207,"offset":620},"end":{"line":10,"column":337,"offset":750},"indent":[]}}],"position":{"start":{"line":10,"column":3,"offset":416},"end":{"line":10,"column":337,"offset":750},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":414},"end":{"line":10,"column":337,"offset":750},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":172},"end":{"line":10,"column":337,"offset":750},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":12,"column":1,"offset":752},"end":{"line":12,"column":5,"offset":756},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create Custom Rule","position":{"start":{"line":12,"column":7,"offset":758},"end":{"line":12,"column":25,"offset":776},"indent":[]}}],"position":{"start":{"line":12,"column":5,"offset":756},"end":{"line":12,"column":27,"offset":778},"indent":[]}},{"type":"text","value":" dialog in the ","position":{"start":{"line":12,"column":27,"offset":778},"end":{"line":12,"column":42,"offset":793},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Traffic","position":{"start":{"line":12,"column":44,"offset":795},"end":{"line":12,"column":51,"offset":802},"indent":[]}}],"position":{"start":{"line":12,"column":42,"offset":793},"end":{"line":12,"column":53,"offset":804},"indent":[]}},{"type":"text","value":" app provides two interfaces for creating expressions: the ","position":{"start":{"line":12,"column":53,"offset":804},"end":{"line":12,"column":112,"offset":863},"indent":[]}},{"type":"link","title":null,"url":"#expression-builder","children":[{"type":"text","value":"Expression Builder","position":{"start":{"line":12,"column":113,"offset":864},"end":{"line":12,"column":131,"offset":882},"indent":[]}}],"position":{"start":{"line":12,"column":112,"offset":863},"end":{"line":12,"column":153,"offset":904},"indent":[]}},{"type":"text","value":" and the ","position":{"start":{"line":12,"column":153,"offset":904},"end":{"line":12,"column":162,"offset":913},"indent":[]}},{"type":"link","title":null,"url":"#expression-editor","children":[{"type":"text","value":"Expression Editor","position":{"start":{"line":12,"column":163,"offset":914},"end":{"line":12,"column":180,"offset":931},"indent":[]}}],"position":{"start":{"line":12,"column":162,"offset":913},"end":{"line":12,"column":201,"offset":952},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":12,"column":201,"offset":952},"end":{"line":12,"column":202,"offset":953},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":752},"end":{"line":12,"column":202,"offset":953},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../../static/images/traffic-app-create-custom-rule-dialog.png","alt":"Create Custom Rule dialog","position":{"start":{"line":14,"column":1,"offset":955},"end":{"line":14,"column":92,"offset":1046},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":955},"end":{"line":14,"column":92,"offset":1046},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":16,"column":1,"offset":1048},"end":{"line":16,"column":4,"offset":1051},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Simple expressions","position":{"start":{"line":18,"column":4,"offset":1056},"end":{"line":18,"column":22,"offset":1074},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1053},"end":{"line":18,"column":22,"offset":1074},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Simple expressions are composed of three elements:","position":{"start":{"line":20,"column":1,"offset":1076},"end":{"line":20,"column":51,"offset":1126},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1076},"end":{"line":20,"column":51,"offset":1126},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A ","position":{"start":{"line":22,"column":4,"offset":1131},"end":{"line":22,"column":6,"offset":1133},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"field","position":{"start":{"line":22,"column":8,"offset":1135},"end":{"line":22,"column":13,"offset":1140},"indent":[]}}],"position":{"start":{"line":22,"column":6,"offset":1133},"end":{"line":22,"column":15,"offset":1142},"indent":[]}},{"type":"text","value":" that represents a property of an HTTP request.","position":{"start":{"line":22,"column":15,"offset":1142},"end":{"line":22,"column":62,"offset":1189},"indent":[]}}],"position":{"start":{"line":22,"column":4,"offset":1131},"end":{"line":22,"column":62,"offset":1189},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1128},"end":{"line":22,"column":62,"offset":1189},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A representative ","position":{"start":{"line":23,"column":4,"offset":1193},"end":{"line":23,"column":21,"offset":1210},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"value","position":{"start":{"line":23,"column":23,"offset":1212},"end":{"line":23,"column":28,"offset":1217},"indent":[]}}],"position":{"start":{"line":23,"column":21,"offset":1210},"end":{"line":23,"column":30,"offset":1219},"indent":[]}},{"type":"text","value":" for that field, which Cloudflare compares with the actual value from the request.","position":{"start":{"line":23,"column":30,"offset":1219},"end":{"line":23,"column":112,"offset":1301},"indent":[]}}],"position":{"start":{"line":23,"column":4,"offset":1193},"end":{"line":23,"column":112,"offset":1301},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1190},"end":{"line":23,"column":112,"offset":1301},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A ","position":{"start":{"line":24,"column":4,"offset":1305},"end":{"line":24,"column":6,"offset":1307},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"comparison operator","position":{"start":{"line":24,"column":8,"offset":1309},"end":{"line":24,"column":27,"offset":1328},"indent":[]}}],"position":{"start":{"line":24,"column":6,"offset":1307},"end":{"line":24,"column":29,"offset":1330},"indent":[]}},{"type":"text","value":", which specifies how the value defined in the expression must relate to the actual value from the request for the operator to return ","position":{"start":{"line":24,"column":29,"offset":1330},"end":{"line":24,"column":163,"offset":1464},"indent":[]}},{"type":"inlineCode","value":"true","position":{"start":{"line":24,"column":163,"offset":1464},"end":{"line":24,"column":169,"offset":1470},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":24,"column":169,"offset":1470},"end":{"line":24,"column":170,"offset":1471},"indent":[]}}],"position":{"start":{"line":24,"column":4,"offset":1305},"end":{"line":24,"column":170,"offset":1471},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1302},"end":{"line":24,"column":170,"offset":1471},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1128},"end":{"line":24,"column":170,"offset":1471},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"When the comparison operator returns ","position":{"start":{"line":26,"column":1,"offset":1473},"end":{"line":26,"column":38,"offset":1510},"indent":[]}},{"type":"inlineCode","value":"true","position":{"start":{"line":26,"column":38,"offset":1510},"end":{"line":26,"column":44,"offset":1516},"indent":[]}},{"type":"text","value":", the request matches the expression.","position":{"start":{"line":26,"column":44,"offset":1516},"end":{"line":26,"column":81,"offset":1553},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1473},"end":{"line":26,"column":81,"offset":1553},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This example expression returns true when a request URI path contains ","position":{"start":{"line":28,"column":1,"offset":1555},"end":{"line":28,"column":71,"offset":1625},"indent":[]}},{"type":"inlineCode","value":"/content","position":{"start":{"line":28,"column":71,"offset":1625},"end":{"line":28,"column":81,"offset":1635},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":28,"column":81,"offset":1635},"end":{"line":28,"column":82,"offset":1636},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1555},"end":{"line":28,"column":82,"offset":1636},"indent":[]}},{"type":"code","lang":"sql","meta":null,"value":"(http.request.uri.path contains \"/content\")","position":{"start":{"line":30,"column":1,"offset":1638},"end":{"line":32,"column":4,"offset":1692},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"In general, simple expressions use this pattern:","position":{"start":{"line":34,"column":1,"offset":1694},"end":{"line":34,"column":49,"offset":1742},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":1694},"end":{"line":34,"column":49,"offset":1742},"indent":[]}},{"type":"code","lang":"sql","meta":null,"value":"<field> <operator> <value>","position":{"start":{"line":36,"column":1,"offset":1744},"end":{"line":38,"column":4,"offset":1781},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"For more, see ","position":{"start":{"line":40,"column":1,"offset":1783},"end":{"line":40,"column":15,"offset":1797},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/load-balancing-rules/supported-fields-and-operators","children":[{"type":"emphasis","children":[{"type":"text","value":"Supported fields and operators","position":{"start":{"line":40,"column":17,"offset":1799},"end":{"line":40,"column":47,"offset":1829},"indent":[]}}],"position":{"start":{"line":40,"column":16,"offset":1798},"end":{"line":40,"column":48,"offset":1830},"indent":[]}}],"position":{"start":{"line":40,"column":15,"offset":1797},"end":{"line":40,"column":121,"offset":1903},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":40,"column":121,"offset":1903},"end":{"line":40,"column":122,"offset":1904},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":1783},"end":{"line":40,"column":122,"offset":1904},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":42,"column":1,"offset":1906},"end":{"line":42,"column":4,"offset":1909},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Compound expressions","position":{"start":{"line":44,"column":4,"offset":1914},"end":{"line":44,"column":24,"offset":1934},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":1911},"end":{"line":44,"column":24,"offset":1934},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A compound expression uses a ","position":{"start":{"line":46,"column":1,"offset":1936},"end":{"line":46,"column":30,"offset":1965},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"logical operator","position":{"start":{"line":46,"column":32,"offset":1967},"end":{"line":46,"column":48,"offset":1983},"indent":[]}}],"position":{"start":{"line":46,"column":30,"offset":1965},"end":{"line":46,"column":50,"offset":1985},"indent":[]}},{"type":"text","value":" (","position":{"start":{"line":46,"column":50,"offset":1985},"end":{"line":46,"column":52,"offset":1987},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"and","position":{"start":{"line":46,"column":53,"offset":1988},"end":{"line":46,"column":56,"offset":1991},"indent":[]}}],"position":{"start":{"line":46,"column":52,"offset":1987},"end":{"line":46,"column":57,"offset":1992},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":46,"column":57,"offset":1992},"end":{"line":46,"column":59,"offset":1994},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"or","position":{"start":{"line":46,"column":60,"offset":1995},"end":{"line":46,"column":62,"offset":1997},"indent":[]}}],"position":{"start":{"line":46,"column":59,"offset":1994},"end":{"line":46,"column":63,"offset":1998},"indent":[]}},{"type":"text","value":", for example) to combine two or more expressions. Compound expressions are powerful because they allow you to build complex statements within a single expression.","position":{"start":{"line":46,"column":63,"offset":1998},"end":{"line":46,"column":226,"offset":2161},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":1936},"end":{"line":46,"column":226,"offset":2161},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This example expression returns true when both the HTTP request URI path contains ","position":{"start":{"line":48,"column":1,"offset":2163},"end":{"line":48,"column":83,"offset":2245},"indent":[]}},{"type":"inlineCode","value":"/content","position":{"start":{"line":48,"column":83,"offset":2245},"end":{"line":48,"column":93,"offset":2255},"indent":[]}},{"type":"text","value":" and the query string contains ","position":{"start":{"line":48,"column":93,"offset":2255},"end":{"line":48,"column":124,"offset":2286},"indent":[]}},{"type":"inlineCode","value":"stream1","position":{"start":{"line":48,"column":124,"offset":2286},"end":{"line":48,"column":133,"offset":2295},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":48,"column":133,"offset":2295},"end":{"line":48,"column":134,"offset":2296},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":2163},"end":{"line":48,"column":134,"offset":2296},"indent":[]}},{"type":"code","lang":"sql","meta":null,"value":"(http.request.uri.path contains \"/content\") \nand (http.request.uri.query contains \"webserver\")","position":{"start":{"line":50,"column":1,"offset":2298},"end":{"line":53,"column":4,"offset":2403},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"In general, compound expressions use this pattern:","position":{"start":{"line":55,"column":1,"offset":2405},"end":{"line":55,"column":51,"offset":2455},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":2405},"end":{"line":55,"column":51,"offset":2455},"indent":[]}},{"type":"code","lang":"sql","meta":null,"value":"<expression> <logical operator> <expression>","position":{"start":{"line":57,"column":1,"offset":2457},"end":{"line":59,"column":4,"offset":2512},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Note that a compound expression can itself be one of the operands of a logical operator. In this way, you can use multiple operators to construct a compound expression from many individual expressions.","position":{"start":{"line":61,"column":1,"offset":2514},"end":{"line":61,"column":202,"offset":2715},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":2514},"end":{"line":61,"column":202,"offset":2715},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For more, see ","position":{"start":{"line":63,"column":1,"offset":2717},"end":{"line":63,"column":15,"offset":2731},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/load-balancing-rules/supported-fields-and-operators","children":[{"type":"emphasis","children":[{"type":"text","value":"Supported fields and operators","position":{"start":{"line":63,"column":17,"offset":2733},"end":{"line":63,"column":47,"offset":2763},"indent":[]}}],"position":{"start":{"line":63,"column":16,"offset":2732},"end":{"line":63,"column":48,"offset":2764},"indent":[]}}],"position":{"start":{"line":63,"column":15,"offset":2731},"end":{"line":63,"column":121,"offset":2837},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":63,"column":121,"offset":2837},"end":{"line":63,"column":122,"offset":2838},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":2717},"end":{"line":63,"column":122,"offset":2838},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":65,"column":1,"offset":2840},"end":{"line":65,"column":4,"offset":2843},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Working with expressions","position":{"start":{"line":67,"column":4,"offset":2848},"end":{"line":67,"column":28,"offset":2872},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":2845},"end":{"line":67,"column":28,"offset":2872},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Expression Builder’s visual interface allows you to build expressions without worrying about field names and syntax.","position":{"start":{"line":69,"column":1,"offset":2874},"end":{"line":69,"column":121,"offset":2994},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":2874},"end":{"line":69,"column":121,"offset":2994},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"By comparison, the Expression Editor is text only, but it supports advanced features not available in the builder.","position":{"start":{"line":71,"column":1,"offset":2996},"end":{"line":71,"column":115,"offset":3110},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":2996},"end":{"line":71,"column":115,"offset":3110},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Expression Builder","position":{"start":{"line":73,"column":5,"offset":3116},"end":{"line":73,"column":23,"offset":3134},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":3112},"end":{"line":73,"column":23,"offset":3134},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Complex expressions are easier to scan when displayed in the Expression Builder’s visual interface:","position":{"start":{"line":75,"column":1,"offset":3136},"end":{"line":75,"column":100,"offset":3235},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":3136},"end":{"line":75,"column":100,"offset":3235},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../../static/images/rules-builder-1.png","alt":"Expression Builder in Load Balancing tab of Traffic app","position":{"start":{"line":77,"column":1,"offset":3237},"end":{"line":77,"column":100,"offset":3336},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":3237},"end":{"line":77,"column":100,"offset":3336},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Notice how the ","position":{"start":{"line":79,"column":1,"offset":3338},"end":{"line":79,"column":16,"offset":3353},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Expression Preview","position":{"start":{"line":79,"column":18,"offset":3355},"end":{"line":79,"column":36,"offset":3373},"indent":[]}}],"position":{"start":{"line":79,"column":16,"offset":3353},"end":{"line":79,"column":38,"offset":3375},"indent":[]}},{"type":"text","value":" displays the expression in text:","position":{"start":{"line":79,"column":38,"offset":3375},"end":{"line":79,"column":71,"offset":3408},"indent":[]}}],"position":{"start":{"line":79,"column":1,"offset":3338},"end":{"line":79,"column":71,"offset":3408},"indent":[]}},{"type":"code","lang":"sql","meta":null,"value":"(http.request.uri.path contains \"/content\") \nand (http.request.uri.query contains \"webserver\")","position":{"start":{"line":81,"column":1,"offset":3410},"end":{"line":84,"column":4,"offset":3515},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The Expression Preview is a great reference for learning to write more advanced expressions.","position":{"start":{"line":86,"column":1,"offset":3517},"end":{"line":86,"column":93,"offset":3609},"indent":[]}}],"position":{"start":{"line":86,"column":1,"offset":3517},"end":{"line":86,"column":93,"offset":3609},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For a walkthrough, see ","position":{"start":{"line":88,"column":1,"offset":3611},"end":{"line":88,"column":24,"offset":3634},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/load-balancing-rules/create-rules","children":[{"type":"emphasis","children":[{"type":"text","value":"Creating Load Balancing rules","position":{"start":{"line":88,"column":26,"offset":3636},"end":{"line":88,"column":55,"offset":3665},"indent":[]}}],"position":{"start":{"line":88,"column":25,"offset":3635},"end":{"line":88,"column":56,"offset":3666},"indent":[]}}],"position":{"start":{"line":88,"column":24,"offset":3634},"end":{"line":88,"column":111,"offset":3721},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":88,"column":111,"offset":3721},"end":{"line":88,"column":112,"offset":3722},"indent":[]}}],"position":{"start":{"line":88,"column":1,"offset":3611},"end":{"line":88,"column":112,"offset":3722},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Expression Editor","position":{"start":{"line":90,"column":5,"offset":3728},"end":{"line":90,"column":22,"offset":3745},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":3724},"end":{"line":90,"column":22,"offset":3745},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Expression Editor is a text-only interface for creating Load Balancing expressions. Although it lacks the visual simplicity of the Expression Builder, the Expression Editor editor supports advanced features, such as support for grouping symbols (parentheses).","position":{"start":{"line":92,"column":1,"offset":3747},"end":{"line":92,"column":264,"offset":4010},"indent":[]}}],"position":{"start":{"line":92,"column":1,"offset":3747},"end":{"line":92,"column":264,"offset":4010},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To access the Expression Editor in the ","position":{"start":{"line":94,"column":1,"offset":4012},"end":{"line":94,"column":40,"offset":4051},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Traffic","position":{"start":{"line":94,"column":42,"offset":4053},"end":{"line":94,"column":49,"offset":4060},"indent":[]}}],"position":{"start":{"line":94,"column":40,"offset":4051},"end":{"line":94,"column":51,"offset":4062},"indent":[]}},{"type":"text","value":" app, click ","position":{"start":{"line":94,"column":51,"offset":4062},"end":{"line":94,"column":63,"offset":4074},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Edit expression","position":{"start":{"line":94,"column":65,"offset":4076},"end":{"line":94,"column":80,"offset":4091},"indent":[]}}],"position":{"start":{"line":94,"column":63,"offset":4074},"end":{"line":94,"column":82,"offset":4093},"indent":[]}},{"type":"text","value":" in the ","position":{"start":{"line":94,"column":82,"offset":4093},"end":{"line":94,"column":90,"offset":4101},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create Custom Rule","position":{"start":{"line":94,"column":92,"offset":4103},"end":{"line":94,"column":110,"offset":4121},"indent":[]}}],"position":{"start":{"line":94,"column":90,"offset":4101},"end":{"line":94,"column":112,"offset":4123},"indent":[]}},{"type":"text","value":" dialog:","position":{"start":{"line":94,"column":112,"offset":4123},"end":{"line":94,"column":120,"offset":4131},"indent":[]}}],"position":{"start":{"line":94,"column":1,"offset":4012},"end":{"line":94,"column":120,"offset":4131},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../../static/images/rules-builder-edit-expression-link.png","alt":"Edit expression link in Create Custom Rule dialog","position":{"start":{"line":96,"column":1,"offset":4133},"end":{"line":96,"column":113,"offset":4245},"indent":[]}}],"position":{"start":{"line":96,"column":1,"offset":4133},"end":{"line":96,"column":113,"offset":4245},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Expression Editor displays:","position":{"start":{"line":98,"column":1,"offset":4247},"end":{"line":98,"column":32,"offset":4278},"indent":[]}}],"position":{"start":{"line":98,"column":1,"offset":4247},"end":{"line":98,"column":32,"offset":4278},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../../static/images/rules-editor-1.png","alt":"Expression Editor in Load Balancing tab of Traffic app","position":{"start":{"line":100,"column":1,"offset":4280},"end":{"line":100,"column":98,"offset":4377},"indent":[]}}],"position":{"start":{"line":100,"column":1,"offset":4280},"end":{"line":100,"column":98,"offset":4377},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To return to the builder, click ","position":{"start":{"line":102,"column":1,"offset":4379},"end":{"line":102,"column":33,"offset":4411},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Use expression builder","position":{"start":{"line":102,"column":35,"offset":4413},"end":{"line":102,"column":57,"offset":4435},"indent":[]}}],"position":{"start":{"line":102,"column":33,"offset":4411},"end":{"line":102,"column":59,"offset":4437},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":102,"column":59,"offset":4437},"end":{"line":102,"column":60,"offset":4438},"indent":[]}}],"position":{"start":{"line":102,"column":1,"offset":4379},"end":{"line":102,"column":60,"offset":4438},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Rules lists","position":{"start":{"line":104,"column":5,"offset":4444},"end":{"line":104,"column":16,"offset":4455},"indent":[]}}],"position":{"start":{"line":104,"column":1,"offset":4440},"end":{"line":104,"column":16,"offset":4455},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Rules lists allow you to create a group of IP addresses and refer to them collectively, by name, in your Load Balancing expressions.","position":{"start":{"line":106,"column":1,"offset":4457},"end":{"line":106,"column":133,"offset":4589},"indent":[]}}],"position":{"start":{"line":106,"column":1,"offset":4457},"end":{"line":106,"column":133,"offset":4589},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For example, you might create a list of known office IP addresses and use it in a Load Balancing rule that directs requests from that office to a specific origin pool.","position":{"start":{"line":108,"column":1,"offset":4591},"end":{"line":108,"column":168,"offset":4758},"indent":[]}}],"position":{"start":{"line":108,"column":1,"offset":4591},"end":{"line":108,"column":168,"offset":4758},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare stores your lists at the account level, so you can view, manage, and incorporate them into Load Balancing rules for any of your zones.","position":{"start":{"line":110,"column":1,"offset":4760},"end":{"line":110,"column":146,"offset":4905},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":4760},"end":{"line":110,"column":146,"offset":4905},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For more, see ","position":{"start":{"line":112,"column":1,"offset":4907},"end":{"line":112,"column":15,"offset":4921},"indent":[]}},{"type":"link","title":null,"url":"https://developers.cloudflare.com/firewall/cf-firewall-rules/rules-lists","children":[{"type":"emphasis","children":[{"type":"text","value":"Rules lists","position":{"start":{"line":112,"column":17,"offset":4923},"end":{"line":112,"column":28,"offset":4934},"indent":[]}}],"position":{"start":{"line":112,"column":16,"offset":4922},"end":{"line":112,"column":29,"offset":4935},"indent":[]}}],"position":{"start":{"line":112,"column":15,"offset":4921},"end":{"line":112,"column":104,"offset":5010},"indent":[]}},{"type":"text","value":" in the Firewall Rules documentation.","position":{"start":{"line":112,"column":104,"offset":5010},"end":{"line":112,"column":141,"offset":5047},"indent":[]}}],"position":{"start":{"line":112,"column":1,"offset":4907},"end":{"line":112,"column":141,"offset":5047},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Expressions\",\"order\":20}","position":{"start":{"line":115,"column":1,"offset":5050},"end":{"line":115,"column":63,"offset":5112},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":115,"column":63,"offset":5112}}}}},{"node":{"fields":{"slug":"/understand-basics/load-balancing-rules"},"frontmatter":{"order":17,"title":"","summary":null,"demo":null,"tags":null},"headings":[{"value":"Load Balancing rules"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Load Balancing rules","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":23,"offset":23},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":23,"offset":23},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Use Load Balancing rules to customize the behavior of your Cloudflare ","position":{"start":{"line":4,"column":1,"offset":25},"end":{"line":4,"column":71,"offset":95},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/load-balancers","children":[{"type":"text","value":"load balancer","position":{"start":{"line":4,"column":72,"offset":96},"end":{"line":4,"column":85,"offset":109},"indent":[]}}],"position":{"start":{"line":4,"column":71,"offset":95},"end":{"line":4,"column":121,"offset":145},"indent":[]}},{"type":"text","value":". For example, create a Load Balancing rule that selects an ","position":{"start":{"line":4,"column":121,"offset":145},"end":{"line":4,"column":181,"offset":205},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/pools","children":[{"type":"text","value":"origin pool","position":{"start":{"line":4,"column":182,"offset":206},"end":{"line":4,"column":193,"offset":217},"indent":[]}}],"position":{"start":{"line":4,"column":181,"offset":205},"end":{"line":4,"column":220,"offset":244},"indent":[]}},{"type":"text","value":" based on the URI path of an HTTP request.","position":{"start":{"line":4,"column":220,"offset":244},"end":{"line":4,"column":262,"offset":286},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":25},"end":{"line":4,"column":262,"offset":286},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can ","position":{"start":{"line":6,"column":1,"offset":288},"end":{"line":6,"column":9,"offset":296},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/load-balancing-rules/create-rules","children":[{"type":"text","value":"create Load Balancing rules","position":{"start":{"line":6,"column":10,"offset":297},"end":{"line":6,"column":37,"offset":324},"indent":[]}}],"position":{"start":{"line":6,"column":9,"offset":296},"end":{"line":6,"column":92,"offset":379},"indent":[]}},{"type":"text","value":", using the ","position":{"start":{"line":6,"column":92,"offset":379},"end":{"line":6,"column":104,"offset":391},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create Custom Rule","position":{"start":{"line":6,"column":106,"offset":393},"end":{"line":6,"column":124,"offset":411},"indent":[]}}],"position":{"start":{"line":6,"column":104,"offset":391},"end":{"line":6,"column":126,"offset":413},"indent":[]}},{"type":"text","value":" dialog, whenever you create or edit a load balancer in the ","position":{"start":{"line":6,"column":126,"offset":413},"end":{"line":6,"column":186,"offset":473},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Traffic","position":{"start":{"line":6,"column":188,"offset":475},"end":{"line":6,"column":195,"offset":482},"indent":[]}}],"position":{"start":{"line":6,"column":186,"offset":473},"end":{"line":6,"column":197,"offset":484},"indent":[]}},{"type":"text","value":" app:","position":{"start":{"line":6,"column":197,"offset":484},"end":{"line":6,"column":202,"offset":489},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":288},"end":{"line":6,"column":202,"offset":489},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../../static/images/traffic-app-create-custom-rule.png","alt":"Create Custom Rule card in Traffic app","position":{"start":{"line":8,"column":1,"offset":491},"end":{"line":8,"column":98,"offset":588},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":491},"end":{"line":8,"column":98,"offset":588},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"As with Cloudflare ","position":{"start":{"line":10,"column":1,"offset":590},"end":{"line":10,"column":20,"offset":609},"indent":[]}},{"type":"link","title":null,"url":"https://developers.cloudflare.com/firewall/cf-firewall-rules","children":[{"type":"text","value":"Firewall rules","position":{"start":{"line":10,"column":21,"offset":610},"end":{"line":10,"column":35,"offset":624},"indent":[]}}],"position":{"start":{"line":10,"column":20,"offset":609},"end":{"line":10,"column":98,"offset":687},"indent":[]}},{"type":"text","value":", each Load Balancing rule is a combination of two elements: an ","position":{"start":{"line":10,"column":98,"offset":687},"end":{"line":10,"column":162,"offset":751},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/load-balancing-rules/expressions","children":[{"type":"text","value":"expression","position":{"start":{"line":10,"column":163,"offset":752},"end":{"line":10,"column":173,"offset":762},"indent":[]}}],"position":{"start":{"line":10,"column":162,"offset":751},"end":{"line":10,"column":227,"offset":816},"indent":[]}},{"type":"text","value":" and an ","position":{"start":{"line":10,"column":227,"offset":816},"end":{"line":10,"column":235,"offset":824},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/load-balancing-rules/actions","children":[{"type":"text","value":"action","position":{"start":{"line":10,"column":236,"offset":825},"end":{"line":10,"column":242,"offset":831},"indent":[]}}],"position":{"start":{"line":10,"column":235,"offset":824},"end":{"line":10,"column":292,"offset":881},"indent":[]}},{"type":"text","value":". Expressions define the criteria for an HTTP request to trigger an action. The action tells Cloudflare how to handle the request.","position":{"start":{"line":10,"column":292,"offset":881},"end":{"line":10,"column":422,"offset":1011},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":590},"end":{"line":10,"column":422,"offset":1011},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When building expressions for Load Balancing rules, refer to ","position":{"start":{"line":12,"column":1,"offset":1013},"end":{"line":12,"column":62,"offset":1074},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/load-balancing-rules/reference","children":[{"type":"emphasis","children":[{"type":"text","value":"Supported fields and operators","position":{"start":{"line":12,"column":64,"offset":1076},"end":{"line":12,"column":94,"offset":1106},"indent":[]}}],"position":{"start":{"line":12,"column":63,"offset":1075},"end":{"line":12,"column":95,"offset":1107},"indent":[]}}],"position":{"start":{"line":12,"column":62,"offset":1074},"end":{"line":12,"column":147,"offset":1159},"indent":[]}},{"type":"text","value":" for definitions and usage.","position":{"start":{"line":12,"column":147,"offset":1159},"end":{"line":12,"column":174,"offset":1186},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":1013},"end":{"line":12,"column":174,"offset":1186},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"order\":17}","position":{"start":{"line":14,"column":1,"offset":1188},"end":{"line":14,"column":41,"offset":1228},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":14,"column":41,"offset":1228}}}}},{"node":{"fields":{"slug":"/troubleshooting"},"frontmatter":{"order":50,"title":"","summary":null,"demo":null,"tags":null},"headings":[{"value":"Troubleshooting"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Troubleshooting","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":18,"offset":18},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":18,"offset":18},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":4,"column":4,"offset":23},"end":{"line":4,"column":12,"offset":31},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":20},"end":{"line":4,"column":12,"offset":31},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Cloudflare Load Balancing API adds global health to each pool and origin server. It also gives you a view into what our network sees at a wider level. Cloudflare uses a quorum system to determine pool and origin health status. The quorum is taken from PoPs responsible for running health checks in a region, and the majority result is used.","position":{"start":{"line":6,"column":1,"offset":33},"end":{"line":6,"column":345,"offset":377},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":33},"end":{"line":6,"column":345,"offset":377},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When troubleshooting failures, use the Cloudflare API for programmatic access to Cloudflare Load Balancing. The Health Check Events and Load Balancer Monitors routes are excellent tools for accessing load balancing event logs and reconfiguring Cloudflare monitors.","position":{"start":{"line":8,"column":1,"offset":379},"end":{"line":8,"column":265,"offset":643},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":379},"end":{"line":8,"column":265,"offset":643},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can get a per-data center breakdown of the health of your origins from the Cloudflare API from the List Health Check Events command:","position":{"start":{"line":10,"column":1,"offset":645},"end":{"line":10,"column":137,"offset":781},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":645},"end":{"line":10,"column":137,"offset":781},"indent":[]}},{"type":"code","lang":"txt","meta":null,"value":"GET user/load_balancing_analytics/events","position":{"start":{"line":12,"column":1,"offset":783},"end":{"line":14,"column":4,"offset":834},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If a health check fails, the breakdown will include the reason.","position":{"start":{"line":16,"column":1,"offset":836},"end":{"line":16,"column":64,"offset":899},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":836},"end":{"line":16,"column":64,"offset":899},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For a list of optional parameters, which are useful for filtering log results, see ","position":{"start":{"line":18,"column":1,"offset":901},"end":{"line":18,"column":84,"offset":984},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"https://api.cloudflare.com/#load-balancer-healthcheck-events-list-healthcheck-events","children":[{"type":"text","value":"Cloudflare API: Health Check Events","position":{"start":{"line":18,"column":86,"offset":986},"end":{"line":18,"column":121,"offset":1021},"indent":[]}}],"position":{"start":{"line":18,"column":85,"offset":985},"end":{"line":18,"column":208,"offset":1108},"indent":[]}}],"position":{"start":{"line":18,"column":84,"offset":984},"end":{"line":18,"column":209,"offset":1109},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":18,"column":209,"offset":1109},"end":{"line":18,"column":210,"offset":1110},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":901},"end":{"line":18,"column":210,"offset":1110},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Common troubleshooting causes and solutions are listed below.","position":{"start":{"line":20,"column":1,"offset":1112},"end":{"line":20,"column":62,"offset":1173},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1112},"end":{"line":20,"column":62,"offset":1173},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":22,"column":1,"offset":1175},"end":{"line":22,"column":4,"offset":1178},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"TCP connection failed","position":{"start":{"line":24,"column":4,"offset":1183},"end":{"line":24,"column":25,"offset":1204},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1180},"end":{"line":24,"column":25,"offset":1204},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":26,"column":5,"offset":1210},"end":{"line":26,"column":10,"offset":1215},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1206},"end":{"line":26,"column":10,"offset":1215},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Our health checks failed to establish a TCP connection to your origin server.","position":{"start":{"line":28,"column":1,"offset":1217},"end":{"line":28,"column":78,"offset":1294},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1217},"end":{"line":28,"column":78,"offset":1294},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":30,"column":5,"offset":1300},"end":{"line":30,"column":13,"offset":1308},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":1296},"end":{"line":30,"column":13,"offset":1308},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This typically occurs when there is a network failure between Cloudflare and your origin, and/or a firewall refused to allow our connection. Ensure your network and firewall configurations are not interfering with load balancing traffic.","position":{"start":{"line":32,"column":1,"offset":1310},"end":{"line":32,"column":238,"offset":1547},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":1310},"end":{"line":32,"column":238,"offset":1547},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":34,"column":1,"offset":1549},"end":{"line":34,"column":4,"offset":1552},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"HTTP timeout occurred","position":{"start":{"line":36,"column":4,"offset":1557},"end":{"line":36,"column":25,"offset":1578},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":1554},"end":{"line":36,"column":25,"offset":1578},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":38,"column":5,"offset":1584},"end":{"line":38,"column":10,"offset":1589},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":1580},"end":{"line":38,"column":10,"offset":1589},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The origin failed to return an HTTP response within the timeout configured. This happens if you have the timeout set to a low number — 1 or 2 seconds, for instance.","position":{"start":{"line":40,"column":1,"offset":1591},"end":{"line":40,"column":165,"offset":1755},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":1591},"end":{"line":40,"column":165,"offset":1755},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":42,"column":5,"offset":1761},"end":{"line":42,"column":13,"offset":1769},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":1757},"end":{"line":42,"column":13,"offset":1769},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We recommend increasing the HTTP response timeout to allow the origin server to respond.","position":{"start":{"line":44,"column":1,"offset":1771},"end":{"line":44,"column":89,"offset":1859},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":1771},"end":{"line":44,"column":89,"offset":1859},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":46,"column":1,"offset":1861},"end":{"line":46,"column":4,"offset":1864},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Response code mismatch error","position":{"start":{"line":48,"column":4,"offset":1869},"end":{"line":48,"column":32,"offset":1897},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":1866},"end":{"line":48,"column":32,"offset":1897},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":50,"column":5,"offset":1903},"end":{"line":50,"column":10,"offset":1908},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":1899},"end":{"line":50,"column":10,"offset":1908},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare receives an HTTP status code that does not match the values defined in the ","position":{"start":{"line":52,"column":1,"offset":1910},"end":{"line":52,"column":87,"offset":1996},"indent":[]}},{"type":"inlineCode","value":"expected_codes","position":{"start":{"line":52,"column":87,"offset":1996},"end":{"line":52,"column":103,"offset":2012},"indent":[]}},{"type":"text","value":" property of your Cloudflare monitor configuration.","position":{"start":{"line":52,"column":103,"offset":2012},"end":{"line":52,"column":154,"offset":2063},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":1910},"end":{"line":52,"column":154,"offset":2063},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":54,"column":5,"offset":2069},"end":{"line":54,"column":13,"offset":2077},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":2065},"end":{"line":54,"column":13,"offset":2077},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Response codes must match the ","position":{"start":{"line":56,"column":1,"offset":2079},"end":{"line":56,"column":31,"offset":2109},"indent":[]}},{"type":"inlineCode","value":"expected_codes","position":{"start":{"line":56,"column":31,"offset":2109},"end":{"line":56,"column":47,"offset":2125},"indent":[]}},{"type":"text","value":". Use the List Monitors API command to confirm the values are correct.","position":{"start":{"line":56,"column":47,"offset":2125},"end":{"line":56,"column":117,"offset":2195},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":2079},"end":{"line":56,"column":117,"offset":2195},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Alternate cause","position":{"start":{"line":58,"column":5,"offset":2201},"end":{"line":58,"column":20,"offset":2216},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":2197},"end":{"line":58,"column":20,"offset":2216},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You may also see this issue if you have a monitor configured to use HTTP connections and your origin server is redirecting to HTTPS. In this case, the response code will often be 301, 302, or 303.","position":{"start":{"line":60,"column":1,"offset":2218},"end":{"line":60,"column":197,"offset":2414},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":2218},"end":{"line":60,"column":197,"offset":2414},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":62,"column":5,"offset":2420},"end":{"line":62,"column":13,"offset":2428},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":2416},"end":{"line":62,"column":13,"offset":2428},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Either change your Cloudflare monitor configuration to use HTTPS, or set the value of ","position":{"start":{"line":64,"column":1,"offset":2430},"end":{"line":64,"column":87,"offset":2516},"indent":[]}},{"type":"inlineCode","value":"follow_redirect","position":{"start":{"line":64,"column":87,"offset":2516},"end":{"line":64,"column":104,"offset":2533},"indent":[]}},{"type":"text","value":" to ","position":{"start":{"line":64,"column":104,"offset":2533},"end":{"line":64,"column":108,"offset":2537},"indent":[]}},{"type":"inlineCode","value":"true","position":{"start":{"line":64,"column":108,"offset":2537},"end":{"line":64,"column":114,"offset":2543},"indent":[]}},{"type":"text","value":" so that we can resolve the correct status code.","position":{"start":{"line":64,"column":114,"offset":2543},"end":{"line":64,"column":162,"offset":2591},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":2430},"end":{"line":64,"column":162,"offset":2591},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":66,"column":1,"offset":2593},"end":{"line":66,"column":4,"offset":2596},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Response body mismatch error","position":{"start":{"line":68,"column":4,"offset":2601},"end":{"line":68,"column":32,"offset":2629},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":2598},"end":{"line":68,"column":32,"offset":2629},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":70,"column":5,"offset":2635},"end":{"line":70,"column":10,"offset":2640},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":2631},"end":{"line":70,"column":10,"offset":2640},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The response body returns from your origin server and does not include the (case-insensitive) value of ","position":{"start":{"line":72,"column":1,"offset":2642},"end":{"line":72,"column":104,"offset":2745},"indent":[]}},{"type":"inlineCode","value":"expected_body","position":{"start":{"line":72,"column":104,"offset":2745},"end":{"line":72,"column":119,"offset":2760},"indent":[]}},{"type":"text","value":" configured in your monitor.","position":{"start":{"line":72,"column":119,"offset":2760},"end":{"line":72,"column":147,"offset":2788},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":2642},"end":{"line":72,"column":147,"offset":2788},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Note that we only read the first 10 KB of the response. If you return a larger response, and the expected_body is not in the first 10 KB, the health check will fail.","position":{"start":{"line":74,"column":1,"offset":2790},"end":{"line":74,"column":166,"offset":2955},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":2790},"end":{"line":74,"column":166,"offset":2955},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":76,"column":5,"offset":2961},"end":{"line":76,"column":13,"offset":2969},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":2957},"end":{"line":76,"column":13,"offset":2969},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Ensure the expected_body is in the first 10 KB of the response body.","position":{"start":{"line":78,"column":1,"offset":2971},"end":{"line":78,"column":69,"offset":3039},"indent":[]}}],"position":{"start":{"line":78,"column":1,"offset":2971},"end":{"line":78,"column":69,"offset":3039},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":80,"column":1,"offset":3041},"end":{"line":80,"column":4,"offset":3044},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"TLS untrusted certificate error","position":{"start":{"line":82,"column":4,"offset":3049},"end":{"line":82,"column":35,"offset":3080},"indent":[]}}],"position":{"start":{"line":82,"column":1,"offset":3046},"end":{"line":82,"column":35,"offset":3080},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":84,"column":5,"offset":3086},"end":{"line":84,"column":10,"offset":3091},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":3082},"end":{"line":84,"column":10,"offset":3091},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The certificate is not trusted by a public Certificate Authority (CA).","position":{"start":{"line":86,"column":1,"offset":3093},"end":{"line":86,"column":71,"offset":3163},"indent":[]}}],"position":{"start":{"line":86,"column":1,"offset":3093},"end":{"line":86,"column":71,"offset":3163},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":88,"column":5,"offset":3169},"end":{"line":88,"column":13,"offset":3177},"indent":[]}}],"position":{"start":{"line":88,"column":1,"offset":3165},"end":{"line":88,"column":13,"offset":3177},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you're using a self-signed certificate, we recommend either using a publicly trusted certificate or setting the ","position":{"start":{"line":90,"column":1,"offset":3179},"end":{"line":90,"column":116,"offset":3294},"indent":[]}},{"type":"inlineCode","value":"allow_insecure","position":{"start":{"line":90,"column":116,"offset":3294},"end":{"line":90,"column":132,"offset":3310},"indent":[]}},{"type":"text","value":" property on your monitor to ","position":{"start":{"line":90,"column":132,"offset":3310},"end":{"line":90,"column":161,"offset":3339},"indent":[]}},{"type":"inlineCode","value":"true","position":{"start":{"line":90,"column":161,"offset":3339},"end":{"line":90,"column":167,"offset":3345},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":90,"column":167,"offset":3345},"end":{"line":90,"column":168,"offset":3346},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":3179},"end":{"line":90,"column":168,"offset":3346},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":92,"column":1,"offset":3348},"end":{"line":92,"column":4,"offset":3351},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"TLS name mismatch error","position":{"start":{"line":94,"column":4,"offset":3356},"end":{"line":94,"column":27,"offset":3379},"indent":[]}}],"position":{"start":{"line":94,"column":1,"offset":3353},"end":{"line":94,"column":27,"offset":3379},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":96,"column":5,"offset":3385},"end":{"line":96,"column":10,"offset":3390},"indent":[]}}],"position":{"start":{"line":96,"column":1,"offset":3381},"end":{"line":96,"column":10,"offset":3390},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Our health check (client) was not able to match a name on the server certificate to the hostname of the request.","position":{"start":{"line":98,"column":1,"offset":3392},"end":{"line":98,"column":113,"offset":3504},"indent":[]}}],"position":{"start":{"line":98,"column":1,"offset":3392},"end":{"line":98,"column":113,"offset":3504},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":100,"column":5,"offset":3510},"end":{"line":100,"column":13,"offset":3518},"indent":[]}}],"position":{"start":{"line":100,"column":1,"offset":3506},"end":{"line":100,"column":13,"offset":3518},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Use the List Monitors command to confirm that the ","position":{"start":{"line":102,"column":1,"offset":3520},"end":{"line":102,"column":51,"offset":3570},"indent":[]}},{"type":"inlineCode","value":"header","position":{"start":{"line":102,"column":51,"offset":3570},"end":{"line":102,"column":59,"offset":3578},"indent":[]}},{"type":"text","value":" value set in the Cloudflare monitor is correct and the Update Monitors command to make any necessary changes.","position":{"start":{"line":102,"column":59,"offset":3578},"end":{"line":102,"column":169,"offset":3688},"indent":[]}}],"position":{"start":{"line":102,"column":1,"offset":3520},"end":{"line":102,"column":169,"offset":3688},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":104,"column":1,"offset":3690},"end":{"line":104,"column":4,"offset":3693},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"TLS protocol error","position":{"start":{"line":106,"column":4,"offset":3698},"end":{"line":106,"column":22,"offset":3716},"indent":[]}}],"position":{"start":{"line":106,"column":1,"offset":3695},"end":{"line":106,"column":22,"offset":3716},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":108,"column":5,"offset":3722},"end":{"line":108,"column":10,"offset":3727},"indent":[]}}],"position":{"start":{"line":108,"column":1,"offset":3718},"end":{"line":108,"column":10,"offset":3727},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This error can occur if you’re using an older version of TLS or your origin server is not configured for HTTPS.","position":{"start":{"line":110,"column":1,"offset":3729},"end":{"line":110,"column":112,"offset":3840},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":3729},"end":{"line":110,"column":112,"offset":3840},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":112,"column":5,"offset":3846},"end":{"line":112,"column":13,"offset":3854},"indent":[]}}],"position":{"start":{"line":112,"column":1,"offset":3842},"end":{"line":112,"column":13,"offset":3854},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Ensure that your origin server supports TLS 1.0 or greater and is configured for HTTPS.","position":{"start":{"line":114,"column":1,"offset":3856},"end":{"line":114,"column":88,"offset":3943},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":3856},"end":{"line":114,"column":88,"offset":3943},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":116,"column":1,"offset":3945},"end":{"line":116,"column":4,"offset":3948},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"TLS unrecognized name error","position":{"start":{"line":118,"column":4,"offset":3953},"end":{"line":118,"column":31,"offset":3980},"indent":[]}}],"position":{"start":{"line":118,"column":1,"offset":3950},"end":{"line":118,"column":31,"offset":3980},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":120,"column":5,"offset":3986},"end":{"line":120,"column":10,"offset":3991},"indent":[]}}],"position":{"start":{"line":120,"column":1,"offset":3982},"end":{"line":120,"column":10,"offset":3991},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The server did not recognize the name provided by the client. When a host header is set, we set this as the ServerName in the initial TLS handshake. If not set, we will not provide a ServerName, which can cause this error.","position":{"start":{"line":122,"column":1,"offset":3993},"end":{"line":122,"column":223,"offset":4215},"indent":[]}}],"position":{"start":{"line":122,"column":1,"offset":3993},"end":{"line":122,"column":223,"offset":4215},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":124,"column":5,"offset":4221},"end":{"line":124,"column":13,"offset":4229},"indent":[]}}],"position":{"start":{"line":124,"column":1,"offset":4217},"end":{"line":124,"column":13,"offset":4229},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Set the host header in your monitor object.","position":{"start":{"line":126,"column":1,"offset":4231},"end":{"line":126,"column":44,"offset":4274},"indent":[]}}],"position":{"start":{"line":126,"column":1,"offset":4231},"end":{"line":126,"column":44,"offset":4274},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":128,"column":1,"offset":4276},"end":{"line":128,"column":4,"offset":4279},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"No route to host error","position":{"start":{"line":130,"column":4,"offset":4284},"end":{"line":130,"column":26,"offset":4306},"indent":[]}}],"position":{"start":{"line":130,"column":1,"offset":4281},"end":{"line":130,"column":26,"offset":4306},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":132,"column":5,"offset":4312},"end":{"line":132,"column":10,"offset":4317},"indent":[]}}],"position":{"start":{"line":132,"column":1,"offset":4308},"end":{"line":132,"column":10,"offset":4317},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The IP address cannot be reached from our network. Common causes are ISP or hosting provider network issues (e.g. BGP level), or that the IP does not exist.","position":{"start":{"line":134,"column":1,"offset":4319},"end":{"line":134,"column":157,"offset":4475},"indent":[]}}],"position":{"start":{"line":134,"column":1,"offset":4319},"end":{"line":134,"column":157,"offset":4475},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":136,"column":5,"offset":4481},"end":{"line":136,"column":13,"offset":4489},"indent":[]}}],"position":{"start":{"line":136,"column":1,"offset":4477},"end":{"line":136,"column":13,"offset":4489},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Make sure IP is accurate, and if it is check if there is an ISP or hosting provider network issue.","position":{"start":{"line":138,"column":1,"offset":4491},"end":{"line":138,"column":99,"offset":4589},"indent":[]}}],"position":{"start":{"line":138,"column":1,"offset":4491},"end":{"line":138,"column":99,"offset":4589},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":140,"column":1,"offset":4591},"end":{"line":140,"column":4,"offset":4594},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Exceeded quota error","position":{"start":{"line":142,"column":4,"offset":4599},"end":{"line":142,"column":24,"offset":4619},"indent":[]}}],"position":{"start":{"line":142,"column":1,"offset":4596},"end":{"line":142,"column":24,"offset":4619},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":144,"column":5,"offset":4625},"end":{"line":144,"column":10,"offset":4630},"indent":[]}}],"position":{"start":{"line":144,"column":1,"offset":4621},"end":{"line":144,"column":10,"offset":4630},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you're using the Cloudflare API and receive a Quota Exceeded error, you have tried to create more objects than you are allowed. For example, if you are limited to 5 monitors and you attempt to create a sixth monitor object, you will see this error returned by the API. The Cloudflare dashboard will not allow you to create more objects. See the example below:","position":{"start":{"line":146,"column":1,"offset":4632},"end":{"line":146,"column":363,"offset":4994},"indent":[]}}],"position":{"start":{"line":146,"column":1,"offset":4632},"end":{"line":146,"column":363,"offset":4994},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Dashboard","position":{"start":{"line":148,"column":6,"offset":5001},"end":{"line":148,"column":15,"offset":5010},"indent":[]}}],"position":{"start":{"line":148,"column":1,"offset":4996},"end":{"line":148,"column":15,"offset":5010},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/troubleshooting-1.png","alt":null,"position":{"start":{"line":150,"column":1,"offset":5012},"end":{"line":150,"column":44,"offset":5055},"indent":[]}}],"position":{"start":{"line":150,"column":1,"offset":5012},"end":{"line":150,"column":44,"offset":5055},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"API","position":{"start":{"line":152,"column":6,"offset":5062},"end":{"line":152,"column":9,"offset":5065},"indent":[]}}],"position":{"start":{"line":152,"column":1,"offset":5057},"end":{"line":152,"column":9,"offset":5065},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"{\n  \"result\": null,\n  \"success\": false,\n  \"errors\": [\n    {\n      \"code\": 1006,\n      \"message\": \"Quota exceeded. You are currently allowed 5 monitors. Please re-use or delete any unused monitors.\"\n    }\n  ],\n  \"messages\": []\n}","position":{"start":{"line":154,"column":1,"offset":5067},"end":{"line":166,"column":4,"offset":5302},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":168,"column":5,"offset":5308},"end":{"line":168,"column":13,"offset":5316},"indent":[]}}],"position":{"start":{"line":168,"column":1,"offset":5304},"end":{"line":168,"column":13,"offset":5316},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Enterprise customers who need to create more objects (load balancers, pools, origins, or monitors) should reach out to their Customer Success Manager or contact ","position":{"start":{"line":170,"column":3,"offset":5320},"end":{"line":170,"column":164,"offset":5481},"indent":[]}},{"type":"link","title":null,"url":"mailto:support@cloudflare.com","children":[{"type":"text","value":"support@cloudflare.com","position":{"start":{"line":170,"column":164,"offset":5481},"end":{"line":170,"column":186,"offset":5503},"indent":[]}}],"position":{"start":{"line":170,"column":164,"offset":5481},"end":{"line":170,"column":186,"offset":5503},"indent":[]}},{"type":"text","value":" to discuss this issue.","position":{"start":{"line":170,"column":186,"offset":5503},"end":{"line":170,"column":209,"offset":5526},"indent":[]}}],"position":{"start":{"line":170,"column":3,"offset":5320},"end":{"line":170,"column":209,"offset":5526},"indent":[]}}],"position":{"start":{"line":170,"column":1,"offset":5318},"end":{"line":170,"column":209,"offset":5526},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Self-service customers upgrade their Load Balancing subscription with more origin servers to increase load balancing capacity.","position":{"start":{"line":171,"column":3,"offset":5529},"end":{"line":171,"column":129,"offset":5655},"indent":[]}}],"position":{"start":{"line":171,"column":3,"offset":5529},"end":{"line":171,"column":129,"offset":5655},"indent":[]}}],"position":{"start":{"line":171,"column":1,"offset":5527},"end":{"line":171,"column":129,"offset":5655},"indent":[]}}],"position":{"start":{"line":170,"column":1,"offset":5318},"end":{"line":171,"column":129,"offset":5655},"indent":[1]}},{"type":"thematicBreak","position":{"start":{"line":173,"column":1,"offset":5657},"end":{"line":173,"column":4,"offset":5660},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"TCP Timeout","position":{"start":{"line":175,"column":4,"offset":5665},"end":{"line":175,"column":15,"offset":5676},"indent":[]}}],"position":{"start":{"line":175,"column":1,"offset":5662},"end":{"line":175,"column":15,"offset":5676},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":177,"column":5,"offset":5682},"end":{"line":177,"column":10,"offset":5687},"indent":[]}}],"position":{"start":{"line":177,"column":1,"offset":5678},"end":{"line":177,"column":10,"offset":5687},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Data transmission was not acknowledged and retransmit of data did not succeed.","position":{"start":{"line":178,"column":1,"offset":5688},"end":{"line":178,"column":79,"offset":5766},"indent":[]}}],"position":{"start":{"line":178,"column":1,"offset":5688},"end":{"line":178,"column":79,"offset":5766},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":180,"column":5,"offset":5772},"end":{"line":180,"column":13,"offset":5780},"indent":[]}}],"position":{"start":{"line":180,"column":1,"offset":5768},"end":{"line":180,"column":13,"offset":5780},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Confirm whether the SYN-ACK for the handshake takes place at your origin and ","position":{"start":{"line":181,"column":1,"offset":5781},"end":{"line":181,"column":78,"offset":5858},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"https://support.cloudflare.com/hc/articles/200172476","children":[{"type":"text","value":"contact Cloudflare Support","position":{"start":{"line":181,"column":80,"offset":5860},"end":{"line":181,"column":106,"offset":5886},"indent":[]}}],"position":{"start":{"line":181,"column":79,"offset":5859},"end":{"line":181,"column":161,"offset":5941},"indent":[]}}],"position":{"start":{"line":181,"column":78,"offset":5858},"end":{"line":181,"column":162,"offset":5942},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":181,"column":162,"offset":5942},"end":{"line":181,"column":163,"offset":5943},"indent":[]}}],"position":{"start":{"line":181,"column":1,"offset":5781},"end":{"line":181,"column":163,"offset":5943},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":183,"column":1,"offset":5945},"end":{"line":183,"column":4,"offset":5948},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"TLS Handshake Failure","position":{"start":{"line":185,"column":4,"offset":5953},"end":{"line":185,"column":25,"offset":5974},"indent":[]}}],"position":{"start":{"line":185,"column":1,"offset":5950},"end":{"line":185,"column":25,"offset":5974},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":187,"column":5,"offset":5980},"end":{"line":187,"column":10,"offset":5985},"indent":[]}}],"position":{"start":{"line":187,"column":1,"offset":5976},"end":{"line":187,"column":10,"offset":5985},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Indicates that the browser's connection to the web server is not secure.","position":{"start":{"line":188,"column":1,"offset":5986},"end":{"line":188,"column":73,"offset":6058},"indent":[]}}],"position":{"start":{"line":188,"column":1,"offset":5986},"end":{"line":188,"column":73,"offset":6058},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":190,"column":5,"offset":6064},"end":{"line":190,"column":13,"offset":6072},"indent":[]}}],"position":{"start":{"line":190,"column":1,"offset":6060},"end":{"line":190,"column":13,"offset":6072},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Change wifi networks, connect to a wired network, or verify the network connection is stable.","position":{"start":{"line":191,"column":1,"offset":6073},"end":{"line":191,"column":94,"offset":6166},"indent":[]}}],"position":{"start":{"line":191,"column":1,"offset":6073},"end":{"line":191,"column":94,"offset":6166},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":193,"column":1,"offset":6168},"end":{"line":193,"column":4,"offset":6171},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Network Unreachable","position":{"start":{"line":195,"column":4,"offset":6176},"end":{"line":195,"column":23,"offset":6195},"indent":[]}}],"position":{"start":{"line":195,"column":1,"offset":6173},"end":{"line":195,"column":23,"offset":6195},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":197,"column":5,"offset":6201},"end":{"line":197,"column":10,"offset":6206},"indent":[]}}],"position":{"start":{"line":197,"column":1,"offset":6197},"end":{"line":197,"column":10,"offset":6206},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare cannot connect to the origin web server due to network unavailability.  This is usually caused by a network issue or incorrect origin IP.","position":{"start":{"line":198,"column":1,"offset":6207},"end":{"line":198,"column":149,"offset":6355},"indent":[]}}],"position":{"start":{"line":198,"column":1,"offset":6207},"end":{"line":198,"column":149,"offset":6355},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":200,"column":5,"offset":6361},"end":{"line":200,"column":13,"offset":6369},"indent":[]}}],"position":{"start":{"line":200,"column":1,"offset":6357},"end":{"line":200,"column":13,"offset":6369},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Check either the IP entered for the origin in Cloudflare's Load Balancer configuration or the IP returned via DNS for the origin hostname.","position":{"start":{"line":201,"column":1,"offset":6370},"end":{"line":201,"column":139,"offset":6508},"indent":[]}}],"position":{"start":{"line":201,"column":1,"offset":6370},"end":{"line":201,"column":139,"offset":6508},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":203,"column":1,"offset":6510},"end":{"line":203,"column":4,"offset":6513},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"HTTP Invalid Response","position":{"start":{"line":205,"column":4,"offset":6518},"end":{"line":205,"column":25,"offset":6539},"indent":[]}}],"position":{"start":{"line":205,"column":1,"offset":6515},"end":{"line":205,"column":25,"offset":6539},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":207,"column":5,"offset":6545},"end":{"line":207,"column":10,"offset":6550},"indent":[]}}],"position":{"start":{"line":207,"column":1,"offset":6541},"end":{"line":207,"column":10,"offset":6550},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Usually caused by an HTTP 502 error or bad gateway.","position":{"start":{"line":208,"column":1,"offset":6551},"end":{"line":208,"column":52,"offset":6602},"indent":[]}}],"position":{"start":{"line":208,"column":1,"offset":6551},"end":{"line":208,"column":52,"offset":6602},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":210,"column":5,"offset":6608},"end":{"line":210,"column":13,"offset":6616},"indent":[]}}],"position":{"start":{"line":210,"column":1,"offset":6604},"end":{"line":210,"column":13,"offset":6616},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Ensure the origin web server responds to requests and that no applications have crashed or are under high load.","position":{"start":{"line":211,"column":1,"offset":6617},"end":{"line":211,"column":112,"offset":6728},"indent":[]}}],"position":{"start":{"line":211,"column":1,"offset":6617},"end":{"line":211,"column":112,"offset":6728},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":213,"column":1,"offset":6730},"end":{"line":213,"column":4,"offset":6733},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"DNS Unknown Host","position":{"start":{"line":215,"column":4,"offset":6738},"end":{"line":215,"column":20,"offset":6754},"indent":[]}}],"position":{"start":{"line":215,"column":1,"offset":6735},"end":{"line":215,"column":20,"offset":6754},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":217,"column":5,"offset":6760},"end":{"line":217,"column":10,"offset":6765},"indent":[]}}],"position":{"start":{"line":217,"column":1,"offset":6756},"end":{"line":217,"column":10,"offset":6765},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The origin web server hostname does not exist.","position":{"start":{"line":218,"column":1,"offset":6766},"end":{"line":218,"column":47,"offset":6812},"indent":[]}}],"position":{"start":{"line":218,"column":1,"offset":6766},"end":{"line":218,"column":47,"offset":6812},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":220,"column":5,"offset":6818},"end":{"line":220,"column":13,"offset":6826},"indent":[]}}],"position":{"start":{"line":220,"column":1,"offset":6814},"end":{"line":220,"column":13,"offset":6826},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Confirm the origin web server resolves to an IP address.","position":{"start":{"line":221,"column":1,"offset":6827},"end":{"line":221,"column":57,"offset":6883},"indent":[]}}],"position":{"start":{"line":221,"column":1,"offset":6827},"end":{"line":221,"column":57,"offset":6883},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":223,"column":1,"offset":6885},"end":{"line":223,"column":4,"offset":6888},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Connection Reset by Peer","position":{"start":{"line":225,"column":4,"offset":6893},"end":{"line":225,"column":28,"offset":6917},"indent":[]}}],"position":{"start":{"line":225,"column":1,"offset":6890},"end":{"line":225,"column":28,"offset":6917},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":227,"column":5,"offset":6923},"end":{"line":227,"column":10,"offset":6928},"indent":[]}}],"position":{"start":{"line":227,"column":1,"offset":6919},"end":{"line":227,"column":10,"offset":6928},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A network error occurred while the client received data from the origin web server.","position":{"start":{"line":228,"column":1,"offset":6929},"end":{"line":228,"column":84,"offset":7012},"indent":[]}}],"position":{"start":{"line":228,"column":1,"offset":6929},"end":{"line":228,"column":84,"offset":7012},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":230,"column":5,"offset":7018},"end":{"line":230,"column":13,"offset":7026},"indent":[]}}],"position":{"start":{"line":230,"column":1,"offset":7014},"end":{"line":230,"column":13,"offset":7026},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Confirm whether the origin web server is experiencing a high amount of traffic or an error.","position":{"start":{"line":231,"column":1,"offset":7027},"end":{"line":231,"column":92,"offset":7118},"indent":[]}}],"position":{"start":{"line":231,"column":1,"offset":7027},"end":{"line":231,"column":92,"offset":7118},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":233,"column":1,"offset":7120},"end":{"line":233,"column":4,"offset":7123},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Monitor Config Error","position":{"start":{"line":235,"column":4,"offset":7128},"end":{"line":235,"column":24,"offset":7148},"indent":[]}}],"position":{"start":{"line":235,"column":1,"offset":7125},"end":{"line":235,"column":24,"offset":7148},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":237,"column":5,"offset":7154},"end":{"line":237,"column":10,"offset":7159},"indent":[]}}],"position":{"start":{"line":237,"column":1,"offset":7150},"end":{"line":237,"column":10,"offset":7159},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"There was a configuration error in the monitor and no checks are run against the pool origins.","position":{"start":{"line":238,"column":1,"offset":7160},"end":{"line":238,"column":95,"offset":7254},"indent":[]}}],"position":{"start":{"line":238,"column":1,"offset":7160},"end":{"line":238,"column":95,"offset":7254},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":240,"column":5,"offset":7260},"end":{"line":240,"column":13,"offset":7268},"indent":[]}}],"position":{"start":{"line":240,"column":1,"offset":7256},"end":{"line":240,"column":13,"offset":7268},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Review your monitor configuration to ensure it matches an expected request to your origin.  For further assistance, ","position":{"start":{"line":241,"column":1,"offset":7269},"end":{"line":241,"column":117,"offset":7385},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"https://support.cloudflare.com/hc/articles/200172476","children":[{"type":"text","value":"contact Cloudflare Support","position":{"start":{"line":241,"column":119,"offset":7387},"end":{"line":241,"column":145,"offset":7413},"indent":[]}}],"position":{"start":{"line":241,"column":118,"offset":7386},"end":{"line":241,"column":200,"offset":7468},"indent":[]}}],"position":{"start":{"line":241,"column":117,"offset":7385},"end":{"line":241,"column":201,"offset":7469},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":241,"column":201,"offset":7469},"end":{"line":241,"column":202,"offset":7470},"indent":[]}}],"position":{"start":{"line":241,"column":1,"offset":7269},"end":{"line":241,"column":202,"offset":7470},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":243,"column":1,"offset":7472},"end":{"line":243,"column":4,"offset":7475},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"DNS Internal","position":{"start":{"line":245,"column":4,"offset":7480},"end":{"line":245,"column":16,"offset":7492},"indent":[]}}],"position":{"start":{"line":245,"column":1,"offset":7477},"end":{"line":245,"column":16,"offset":7492},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":247,"column":5,"offset":7498},"end":{"line":247,"column":10,"offset":7503},"indent":[]}}],"position":{"start":{"line":247,"column":1,"offset":7494},"end":{"line":247,"column":10,"offset":7503},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The origin web server's hostname resolves to an internal or orange-clouded IP address.  No checks are run against the pool origins.","position":{"start":{"line":248,"column":1,"offset":7504},"end":{"line":248,"column":132,"offset":7635},"indent":[]}}],"position":{"start":{"line":248,"column":1,"offset":7504},"end":{"line":248,"column":132,"offset":7635},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":250,"column":5,"offset":7641},"end":{"line":250,"column":13,"offset":7649},"indent":[]}}],"position":{"start":{"line":250,"column":1,"offset":7637},"end":{"line":250,"column":13,"offset":7649},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare does not allow use of an origin web server hostname that is proxied by Cloudflare.","position":{"start":{"line":251,"column":1,"offset":7650},"end":{"line":251,"column":94,"offset":7743},"indent":[]}}],"position":{"start":{"line":251,"column":1,"offset":7650},"end":{"line":251,"column":94,"offset":7743},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":253,"column":1,"offset":7745},"end":{"line":253,"column":4,"offset":7748},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Other Failure","position":{"start":{"line":255,"column":4,"offset":7753},"end":{"line":255,"column":17,"offset":7766},"indent":[]}}],"position":{"start":{"line":255,"column":1,"offset":7750},"end":{"line":255,"column":17,"offset":7766},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":257,"column":5,"offset":7772},"end":{"line":257,"column":10,"offset":7777},"indent":[]}}],"position":{"start":{"line":257,"column":1,"offset":7768},"end":{"line":257,"column":10,"offset":7777},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If the failure cannot be classified as any other type of failure mentioned above.","position":{"start":{"line":258,"column":1,"offset":7778},"end":{"line":258,"column":82,"offset":7859},"indent":[]}}],"position":{"start":{"line":258,"column":1,"offset":7778},"end":{"line":258,"column":82,"offset":7859},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":260,"column":5,"offset":7865},"end":{"line":260,"column":13,"offset":7873},"indent":[]}}],"position":{"start":{"line":260,"column":1,"offset":7861},"end":{"line":260,"column":13,"offset":7873},"indent":[]}},{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"link","title":null,"url":"https://support.cloudflare.com/hc/articles/200172476","children":[{"type":"text","value":"Contact Cloudflare Support","position":{"start":{"line":261,"column":3,"offset":7876},"end":{"line":261,"column":29,"offset":7902},"indent":[]}}],"position":{"start":{"line":261,"column":2,"offset":7875},"end":{"line":261,"column":84,"offset":7957},"indent":[]}}],"position":{"start":{"line":261,"column":1,"offset":7874},"end":{"line":261,"column":85,"offset":7958},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":261,"column":85,"offset":7958},"end":{"line":261,"column":86,"offset":7959},"indent":[]}}],"position":{"start":{"line":261,"column":1,"offset":7874},"end":{"line":261,"column":86,"offset":7959},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":263,"column":1,"offset":7961},"end":{"line":263,"column":4,"offset":7964},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Load Balancing Not Enabled","position":{"start":{"line":265,"column":4,"offset":7969},"end":{"line":265,"column":30,"offset":7995},"indent":[]}}],"position":{"start":{"line":265,"column":1,"offset":7966},"end":{"line":265,"column":30,"offset":7995},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cause","position":{"start":{"line":267,"column":5,"offset":8001},"end":{"line":267,"column":10,"offset":8006},"indent":[]}}],"position":{"start":{"line":267,"column":1,"offset":7997},"end":{"line":267,"column":10,"offset":8006},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Load Balancing is not enabled for your account or zone.","position":{"start":{"line":268,"column":1,"offset":8007},"end":{"line":268,"column":56,"offset":8062},"indent":[]}}],"position":{"start":{"line":268,"column":1,"offset":8007},"end":{"line":268,"column":56,"offset":8062},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Solution","position":{"start":{"line":270,"column":5,"offset":8068},"end":{"line":270,"column":13,"offset":8076},"indent":[]}}],"position":{"start":{"line":270,"column":1,"offset":8064},"end":{"line":270,"column":13,"offset":8076},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For Enterprise customers, reach out to your Cloudflare Account Team.  Free, Pro, and Business customers ","position":{"start":{"line":271,"column":1,"offset":8077},"end":{"line":271,"column":105,"offset":8181},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"https://support.cloudflare.com/hc/articles/200172476","children":[{"type":"text","value":"contact Cloudflare Support","position":{"start":{"line":271,"column":107,"offset":8183},"end":{"line":271,"column":133,"offset":8209},"indent":[]}}],"position":{"start":{"line":271,"column":106,"offset":8182},"end":{"line":271,"column":188,"offset":8264},"indent":[]}}],"position":{"start":{"line":271,"column":105,"offset":8181},"end":{"line":271,"column":189,"offset":8265},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":271,"column":189,"offset":8265},"end":{"line":271,"column":190,"offset":8266},"indent":[]}}],"position":{"start":{"line":271,"column":1,"offset":8077},"end":{"line":271,"column":190,"offset":8266},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"order\":50}","position":{"start":{"line":274,"column":1,"offset":8269},"end":{"line":274,"column":41,"offset":8309},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":274,"column":41,"offset":8309}}}}},{"node":{"fields":{"slug":"/understand-basics/load-balancing-rules/reference"},"frontmatter":{"order":50,"title":"Supported fields and operators","summary":null,"demo":null,"tags":null},"headings":[{"value":"Supported fields and operators"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Supported fields and operators","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":33,"offset":33},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":33,"offset":33},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Fields","position":{"start":{"line":4,"column":4,"offset":38},"end":{"line":4,"column":10,"offset":44},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":35},"end":{"line":4,"column":10,"offset":44},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Load Balancing expressions support these fields:","position":{"start":{"line":6,"column":1,"offset":46},"end":{"line":6,"column":49,"offset":94},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":46},"end":{"line":6,"column":49,"offset":94},"indent":[]}},{"type":"jsx","value":"<table style=\"width:100%\">\n  <thead>\n    <tr>\n      <th style=\"width:40%\">Field</th>\n      <th style=\"width:20%\">Name in Expression Builder</th>\n      <th>Description</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td valign=\"top\"><code>http.request.version</code><br /><Type>Number</Type></td>\n      <td>HTTP version</td>\n      <td>\n        <p>The version of the HTTP protocol used. Use this field when you require different checks for different versions.\n        </p>\n        <p>Example Values:\n          <ul>\n              <li><code class=\"InlineCode\">HTTP/1.1</code></li>\n              <li><code class=\"InlineCode\">HTTP/3</code></li>\n          </ul>\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td valign=\"top\"><code>ip.src</code><br /><Type>IP&nbsp;address</Type></td>\n      <td>IP address</td>\n      <td>\n         <p>The client TCP IP address, which may be adjusted to reflect the actual address of the client by using, for example, HTTP headers such as\n         <code class=\"InlineCode\">X-Forwarded-For</code> or <code class=\"InlineCode\">X-Real-IP</code>.\n         </p>\n         <p>Example value:\n         <br /><code class=\"InlineCode\">93.184.216.34</code>\n         </p>\n      </td>\n    </tr>\n    <tr>\n      <td valign=\"top\"><code>http.request.uri</code><br /><Type>String</Type></td>\n      <td>URI</td>\n      <td>\n        <p>The absolute URI of the request.</p>\n        <p>Example value:\n        <br /><code class=\"InlineCode\">/articles/index?section=539061&expand=comments</code>\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td valign=\"top\"><code>http.request.uri.path</code><br /><Type>String</Type></td>\n      <td>URI path</td>\n      <td>\n        <p>The URI path of the request.</p>\n        <p>Example value:<br />\n        <code class=\"InlineCode\">/articles/index</code>\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td valign=\"top\"><code class>http.request.uri.query</code><br /><Type>String</Type></td>\n      <td>URI query string</td>\n      <td>\n        <p>The entire query string for the request, without the <code class=\"InlineCode\">?</code> delimiter.\n        </p>\n        <p>Example value:\n        <br /><code class=\"InlineCode\">section=539061&expand=comments</code>\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>","position":{"start":{"line":8,"column":1,"offset":96},"end":{"line":75,"column":9,"offset":2356},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":77,"column":1,"offset":2358},"end":{"line":77,"column":4,"offset":2361},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Operators","position":{"start":{"line":79,"column":4,"offset":2366},"end":{"line":79,"column":13,"offset":2375},"indent":[]}}],"position":{"start":{"line":79,"column":1,"offset":2363},"end":{"line":79,"column":13,"offset":2375},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Overview","position":{"start":{"line":81,"column":5,"offset":2381},"end":{"line":81,"column":13,"offset":2389},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":2377},"end":{"line":81,"column":13,"offset":2389},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"#comparison-operators","children":[{"type":"text","value":"Comparison operators","position":{"start":{"line":83,"column":2,"offset":2392},"end":{"line":83,"column":22,"offset":2412},"indent":[]}}],"position":{"start":{"line":83,"column":1,"offset":2391},"end":{"line":83,"column":46,"offset":2436},"indent":[]}},{"type":"text","value":" specify how values defined in an expression must relate to the actual HTTP request value for the expression to return true.","position":{"start":{"line":83,"column":46,"offset":2436},"end":{"line":83,"column":170,"offset":2560},"indent":[]}}],"position":{"start":{"line":83,"column":1,"offset":2391},"end":{"line":83,"column":170,"offset":2560},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"#logical-operators","children":[{"type":"text","value":"Logical operators","position":{"start":{"line":85,"column":2,"offset":2563},"end":{"line":85,"column":19,"offset":2580},"indent":[]}}],"position":{"start":{"line":85,"column":1,"offset":2562},"end":{"line":85,"column":40,"offset":2601},"indent":[]}},{"type":"text","value":" combine two expressions to form a compound expression and use order of precedence to determine how an expression is evaluated.","position":{"start":{"line":85,"column":40,"offset":2601},"end":{"line":85,"column":167,"offset":2728},"indent":[]}}],"position":{"start":{"line":85,"column":1,"offset":2562},"end":{"line":85,"column":167,"offset":2728},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Load Balancing expressions also support grouping symbols, which allow you to organize expressions, enforce operator precedence, and nest expressions. For examples and usage, see ","position":{"start":{"line":87,"column":1,"offset":2730},"end":{"line":87,"column":179,"offset":2908},"indent":[]}},{"type":"link","title":null,"url":"/cf-firewall-language/operators/#grouping-symbols","children":[{"type":"emphasis","children":[{"type":"text","value":"Grouping symbols","position":{"start":{"line":87,"column":181,"offset":2910},"end":{"line":87,"column":197,"offset":2926},"indent":[]}}],"position":{"start":{"line":87,"column":180,"offset":2909},"end":{"line":87,"column":198,"offset":2927},"indent":[]}}],"position":{"start":{"line":87,"column":179,"offset":2908},"end":{"line":87,"column":250,"offset":2979},"indent":[]}},{"type":"text","value":" in the Firewall Rules documentation.","position":{"start":{"line":87,"column":250,"offset":2979},"end":{"line":87,"column":287,"offset":3016},"indent":[]}}],"position":{"start":{"line":87,"column":1,"offset":2730},"end":{"line":87,"column":287,"offset":3016},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Comparison operators","position":{"start":{"line":89,"column":5,"offset":3022},"end":{"line":89,"column":25,"offset":3042},"indent":[]}}],"position":{"start":{"line":89,"column":1,"offset":3018},"end":{"line":89,"column":25,"offset":3042},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Comparison operators return ","position":{"start":{"line":91,"column":1,"offset":3044},"end":{"line":91,"column":29,"offset":3072},"indent":[]}},{"type":"inlineCode","value":"true","position":{"start":{"line":91,"column":29,"offset":3072},"end":{"line":91,"column":35,"offset":3078},"indent":[]}},{"type":"text","value":" when a value from an HTTP request matches a value defined in an expression.","position":{"start":{"line":91,"column":35,"offset":3078},"end":{"line":91,"column":111,"offset":3154},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":3044},"end":{"line":91,"column":111,"offset":3154},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This is the general pattern for using comparison operators:","position":{"start":{"line":93,"column":1,"offset":3156},"end":{"line":93,"column":60,"offset":3215},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":3156},"end":{"line":93,"column":60,"offset":3215},"indent":[]}},{"type":"code","lang":"sql","meta":null,"value":"<field> <comparison operator> <value>","position":{"start":{"line":95,"column":1,"offset":3217},"end":{"line":97,"column":4,"offset":3265},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Load Balancing expressions support these comparison operators:","position":{"start":{"line":99,"column":1,"offset":3267},"end":{"line":99,"column":63,"offset":3329},"indent":[]}}],"position":{"start":{"line":99,"column":1,"offset":3267},"end":{"line":99,"column":63,"offset":3329},"indent":[]}},{"type":"jsx","value":"<TableWrap style='width:100%'>\n  <table style='width:100%'>\n    <thead>\n    <tr>\n      <th>Name</th>\n      <th>Operator Notation</th>\n      <th colspan=\"3\" style=\"text-align:center\">Supported Data Types</th>\n      <th>Example (operator in bold)</th>\n    </tr>\n    <tr>\n      <td></td>\n      <td></td>\n      <th>String</th>\n      <th>IP</th>\n      <th>Rules list</th>\n      <th></th>\n    </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td>Equal</td>\n        <td><code class=\"InlineCode\">eq</code></td>\n        <td>&#x2705;</td>\n        <td>&#x2705;</td>\n        <td>&#x2705;</td>\n        <td>\n          <code class=\"InlineCode\">http.request.uri.path <strong>eq</strong> \"/articles/2008/\"</code>\n        </td>\n      </tr>\n      <tr>\n        <td>Not equal</td>\n        <td><code class=\"InlineCode\">ne</code></td>\n        <td>&#x2705;</td>\n        <td>&#x2705;</td>\n        <td>&#x2705;</td>\n        <td>\n          <code class=\"InlineCode\">ip.src <strong>ne</strong> 93.184.216.0</code>\n        </td>\n      </tr>\n      <tr>\n        <td>Exactly<br />contains</td>\n        <td><code class=\"InlineCode\">contains</code></td>\n        <td>&#x2705;</td>\n        <td>&#10060;</td>\n        <td>&#10060;</td>\n        <td>\n          <code class=\"InlineCode\">http.request.uri.path <strong>contains</strong> \"/articles/\"</code>\n        </td>\n      </tr>\n      <tr>\n        <td>Matches<br />RE2 regex</td>\n        <td><code class=\"InlineCode\">matches</code></td>\n        <td>&#x2705;</td>\n        <td>&#10060;</td>\n        <td>&#10060;</td>\n        <td>\n          <code class=\"InlineCode\">http.request.uri.path <strong>matches</strong> \"^/articles/200[7-8]/$\"</code>\n        </td>\n      </tr>\n      <tr>\n        <td>Value is in <br />a set of values</td>\n        <td><code class=\"InlineCode\">in</code></td>\n        <td>&#x2705;</td>\n        <td>&#x2705;</td>\n        <td>&#x2705;</td>\n        <td>\n          <code class=\"InlineCode\">ip.src <strong>in</strong> {'{ 93.184.216.0 93.184.216.1 }'}</code>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</TableWrap>","position":{"start":{"line":101,"column":1,"offset":3331},"end":{"line":172,"column":13,"offset":5379},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"<Aside type='warning' header='Important'>","position":{"start":{"line":174,"column":1,"offset":5381},"end":{"line":174,"column":42,"offset":5422},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":176,"column":1,"offset":5424},"end":{"line":176,"column":5,"offset":5428},"indent":[]}},{"type":"inlineCode","value":"matches","position":{"start":{"line":176,"column":5,"offset":5428},"end":{"line":176,"column":14,"offset":5437},"indent":[]}},{"type":"text","value":" operator requires a Cloudflare Business or Enterprise plan.","position":{"start":{"line":176,"column":14,"offset":5437},"end":{"line":176,"column":74,"offset":5497},"indent":[]}}],"position":{"start":{"line":176,"column":1,"offset":5424},"end":{"line":176,"column":74,"offset":5497},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":178,"column":1,"offset":5499},"end":{"line":178,"column":9,"offset":5507},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Logical operators","position":{"start":{"line":180,"column":5,"offset":5513},"end":{"line":180,"column":22,"offset":5530},"indent":[]}}],"position":{"start":{"line":180,"column":1,"offset":5509},"end":{"line":180,"column":22,"offset":5530},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Logical operators combine two or more expressions into a single compound expression. A compound expression has this general syntax:","position":{"start":{"line":182,"column":1,"offset":5532},"end":{"line":182,"column":132,"offset":5663},"indent":[]}}],"position":{"start":{"line":182,"column":1,"offset":5532},"end":{"line":182,"column":132,"offset":5663},"indent":[]}},{"type":"code","lang":"sql","meta":null,"value":"<expression> <logical operator> <expression>","position":{"start":{"line":184,"column":1,"offset":5665},"end":{"line":186,"column":4,"offset":5720},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Each logical operator has an ","position":{"start":{"line":188,"column":1,"offset":5722},"end":{"line":188,"column":30,"offset":5751},"indent":[]}},{"type":"link","title":null,"url":"#order-of-precedence","children":[{"type":"text","value":"order of precedence","position":{"start":{"line":188,"column":31,"offset":5752},"end":{"line":188,"column":50,"offset":5771},"indent":[]}}],"position":{"start":{"line":188,"column":30,"offset":5751},"end":{"line":188,"column":73,"offset":5794},"indent":[]}},{"type":"text","value":". The order of precedence (along with ","position":{"start":{"line":188,"column":73,"offset":5794},"end":{"line":188,"column":111,"offset":5832},"indent":[]}},{"type":"link","title":null,"url":"#grouping-symbols","children":[{"type":"text","value":"grouping symbols","position":{"start":{"line":188,"column":112,"offset":5833},"end":{"line":188,"column":128,"offset":5849},"indent":[]}}],"position":{"start":{"line":188,"column":111,"offset":5832},"end":{"line":188,"column":148,"offset":5869},"indent":[]}},{"type":"text","value":") determines the order in which Cloudflare evaluates logical operators in an expression. The ","position":{"start":{"line":188,"column":148,"offset":5869},"end":{"line":188,"column":241,"offset":5962},"indent":[]}},{"type":"inlineCode","value":"not","position":{"start":{"line":188,"column":241,"offset":5962},"end":{"line":188,"column":246,"offset":5967},"indent":[]}},{"type":"text","value":" operator ranks first in order of precedence. For more on how Cloudflare evaluates logical operators in expressions, see ","position":{"start":{"line":188,"column":246,"offset":5967},"end":{"line":188,"column":367,"offset":6088},"indent":[]}},{"type":"link","title":null,"url":"https://developers.cloudflare.com/firewall/cf-firewall-language/operators#order-of-precedence","children":[{"type":"emphasis","children":[{"type":"text","value":"Order of precedence","position":{"start":{"line":188,"column":369,"offset":6090},"end":{"line":188,"column":388,"offset":6109},"indent":[]}}],"position":{"start":{"line":188,"column":368,"offset":6089},"end":{"line":188,"column":389,"offset":6110},"indent":[]}}],"position":{"start":{"line":188,"column":367,"offset":6088},"end":{"line":188,"column":485,"offset":6206},"indent":[]}},{"type":"text","value":" in the Firewall Rules documentation.","position":{"start":{"line":188,"column":485,"offset":6206},"end":{"line":188,"column":522,"offset":6243},"indent":[]}}],"position":{"start":{"line":188,"column":1,"offset":5722},"end":{"line":188,"column":522,"offset":6243},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Load Balancing expressions support these logical operators:","position":{"start":{"line":190,"column":1,"offset":6245},"end":{"line":190,"column":60,"offset":6304},"indent":[]}}],"position":{"start":{"line":190,"column":1,"offset":6245},"end":{"line":190,"column":60,"offset":6304},"indent":[]}},{"type":"jsx","value":"<TableWrap>\n<table style='width:100%'>\n  <thead>\n   <tr>\n      <th>Name</th>\n      <th>English<br />Notation</th>\n      <th>C-like<br />Notation</th>\n      <th>Example</th>\n      <th>Order of Precedence</th>\n   </tr>\n  </thead>\n  <tbody>\n   <tr>\n      <td>Logical NOT</td>\n      <td><code class=\"InlineCode\">not</code></td>\n      <td><code class=\"InlineCode\">!</code></td>\n      <td>\n         <code class=\"InlineCode\"><strong>not</strong> ( http.host eq \"www.cloudflare.com\" and ip.src in 93.184.216.0/24 )</code>\n      </td>\n      <td>1</td>\n   </tr>\n   <tr>\n      <td>Logical AND</td>\n      <td><code class=\"InlineCode\">and</code></td>\n      <td><code class=\"InlineCode\">&amp;&amp;</code></td>\n      <td>\n         <code class=\"InlineCode\">http.host eq \"www.cloudflare.com\" <strong>and</strong> ip.src in 93.184.216.0/24</code>\n      </td>\n      <td>2</td>\n   </tr>\n   <tr>\n      <td>Logical XOR<br />\n        (exclusive OR)</td>\n      <td><code class=\"InlineCode\">xor</code></td>\n      <td><code class=\"InlineCode\">^^</code></td>\n      <td>\n         <code class=\"InlineCode\">http.host eq \"www.cloudflare.com\" <strong>xor</strong> ip.src in 93.184.216.0/24</code>\n      </td>\n      <td>3</td>\n   </tr>\n   <tr>\n      <td>Logical OR</td>\n      <td><code class=\"InlineCode\">or</code></td>\n      <td><code class=\"InlineCode\">||</code></td>\n      <td>\n         <code class=\"InlineCode\">http.host eq \"www.cloudflare.com\" <strong>or</strong> ip.src in 93.184.216.0/24</code>\n      </td>\n      <td>4</td>\n   </tr>\n  </tbody>\n</table>\n</TableWrap>","position":{"start":{"line":192,"column":1,"offset":6306},"end":{"line":243,"column":13,"offset":7845},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Supported fields and operators\",\"order\":50,\"type\":\"table\"}","position":{"start":{"line":246,"column":1,"offset":7848},"end":{"line":246,"column":97,"offset":7944},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":246,"column":97,"offset":7944}}}}},{"node":{"fields":{"slug":"/best-practices"},"frontmatter":{"order":40,"title":"","summary":null,"demo":null,"tags":null},"headings":[{"value":"Best practices"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Best practices","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":17,"offset":17},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":17,"offset":17},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Planned maintenance","position":{"start":{"line":4,"column":4,"offset":22},"end":{"line":4,"column":23,"offset":41},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":19},"end":{"line":4,"column":23,"offset":41},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When making changes to your applications or adding assets, you may want to roll out those changes one origin at a time to ensure they work properly. However, as the load balancer continues to direct traffic among multiple origins, both versions of your app are served and the user has an inconsistent experience.","position":{"start":{"line":6,"column":1,"offset":43},"end":{"line":6,"column":313,"offset":355},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":43},"end":{"line":6,"column":313,"offset":355},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To avoid an inconsistent user experience when rolling out application changes, you can temporarily configure load balancing not to direct traffic to each origin as you upgrade them.","position":{"start":{"line":8,"column":1,"offset":357},"end":{"line":8,"column":182,"offset":538},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":357},"end":{"line":8,"column":182,"offset":538},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Using the Load Balancing dashboard to temporarily ignore an origin server","position":{"start":{"line":10,"column":5,"offset":544},"end":{"line":10,"column":78,"offset":617},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":540},"end":{"line":10,"column":78,"offset":617},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To temporarily ignore an origin server:","position":{"start":{"line":12,"column":1,"offset":619},"end":{"line":12,"column":40,"offset":658},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":619},"end":{"line":12,"column":40,"offset":658},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Deliberately configure a monitor so that your origin will fail health checks and Cloudflare will consider the origin server unhealthy and route traffic away from it. For example, set the ","position":{"start":{"line":14,"column":4,"offset":663},"end":{"line":14,"column":191,"offset":850},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Response Code","position":{"start":{"line":14,"column":193,"offset":852},"end":{"line":14,"column":206,"offset":865},"indent":[]}}],"position":{"start":{"line":14,"column":191,"offset":850},"end":{"line":14,"column":208,"offset":867},"indent":[]}},{"type":"text","value":" to an HTTP status code you know your server does not return. Alternatively, you could set a value for ","position":{"start":{"line":14,"column":208,"offset":867},"end":{"line":14,"column":311,"offset":970},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Response Body","position":{"start":{"line":14,"column":313,"offset":972},"end":{"line":14,"column":326,"offset":985},"indent":[]}}],"position":{"start":{"line":14,"column":311,"offset":970},"end":{"line":14,"column":328,"offset":987},"indent":[]}},{"type":"text","value":" that will not match. For example, you can configure the Response Body in a monitor to look for specific text.","position":{"start":{"line":14,"column":328,"offset":987},"end":{"line":14,"column":438,"offset":1097},"indent":[]}}],"position":{"start":{"line":14,"column":4,"offset":663},"end":{"line":14,"column":438,"offset":1097},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/best-practices-1.png","alt":null,"position":{"start":{"line":16,"column":3,"offset":1101},"end":{"line":16,"column":45,"offset":1143},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":1101},"end":{"line":16,"column":45,"offset":1143},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":660},"end":{"line":17,"column":1,"offset":1144},"indent":[1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Confirm the origin server is not receiving traffic. Load Balancing will issue a notification email that the origin is down.","position":{"start":{"line":18,"column":4,"offset":1148},"end":{"line":18,"column":127,"offset":1271},"indent":[]}}],"position":{"start":{"line":18,"column":4,"offset":1148},"end":{"line":18,"column":127,"offset":1271},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1145},"end":{"line":19,"column":1,"offset":1272},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Upgrade the origin and test that the change is working as you intended.","position":{"start":{"line":20,"column":4,"offset":1276},"end":{"line":20,"column":75,"offset":1347},"indent":[]}}],"position":{"start":{"line":20,"column":4,"offset":1276},"end":{"line":20,"column":75,"offset":1347},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1273},"end":{"line":21,"column":1,"offset":1348},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Reenable load balancing for the upgraded origin server by restoring the values you modified in Step 1 to those expected for a healthy origin.","position":{"start":{"line":22,"column":4,"offset":1352},"end":{"line":22,"column":145,"offset":1493},"indent":[]}}],"position":{"start":{"line":22,"column":4,"offset":1352},"end":{"line":22,"column":145,"offset":1493},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1349},"end":{"line":23,"column":1,"offset":1494},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Repeat these steps for the other origins across which you are balancing application traffic.","position":{"start":{"line":24,"column":4,"offset":1498},"end":{"line":24,"column":96,"offset":1590},"indent":[]}}],"position":{"start":{"line":24,"column":4,"offset":1498},"end":{"line":24,"column":96,"offset":1590},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1495},"end":{"line":24,"column":96,"offset":1590},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":660},"end":{"line":24,"column":96,"offset":1590},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This process lets you make controlled changes to your origin servers without disrupting users.","position":{"start":{"line":26,"column":1,"offset":1592},"end":{"line":26,"column":95,"offset":1686},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1592},"end":{"line":26,"column":95,"offset":1686},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Using the Cloudflare API to temporarily set origin status to ","position":{"start":{"line":28,"column":5,"offset":1692},"end":{"line":28,"column":66,"offset":1753},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"disabled","position":{"start":{"line":28,"column":67,"offset":1754},"end":{"line":28,"column":75,"offset":1762},"indent":[]}}],"position":{"start":{"line":28,"column":66,"offset":1753},"end":{"line":28,"column":76,"offset":1763},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1688},"end":{"line":28,"column":76,"offset":1763},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can automate this process with the ","position":{"start":{"line":30,"column":1,"offset":1765},"end":{"line":30,"column":40,"offset":1804},"indent":[]}},{"type":"link","title":null,"url":"https://api.cloudflare.com/#load-balancer-pools-modify-a-pool","children":[{"type":"text","value":"Load Balancing Cloudflare API","position":{"start":{"line":30,"column":41,"offset":1805},"end":{"line":30,"column":70,"offset":1834},"indent":[]}}],"position":{"start":{"line":30,"column":40,"offset":1804},"end":{"line":30,"column":134,"offset":1898},"indent":[]}},{"type":"text","value":" by setting the status of an origin server to “disabled” so that Load Balancing does not route traffic to the origin while you are upgrading it.","position":{"start":{"line":30,"column":134,"offset":1898},"end":{"line":30,"column":278,"offset":2042},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":1765},"end":{"line":30,"column":278,"offset":2042},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To temporarily set origin status to ","position":{"start":{"line":32,"column":1,"offset":2044},"end":{"line":32,"column":37,"offset":2080},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"disabled","position":{"start":{"line":32,"column":38,"offset":2081},"end":{"line":32,"column":46,"offset":2089},"indent":[]}}],"position":{"start":{"line":32,"column":37,"offset":2080},"end":{"line":32,"column":47,"offset":2090},"indent":[]}},{"type":"text","value":", use the Update Load Balancer command to set the ","position":{"start":{"line":32,"column":47,"offset":2090},"end":{"line":32,"column":97,"offset":2140},"indent":[]}},{"type":"inlineCode","value":"enabled","position":{"start":{"line":32,"column":97,"offset":2140},"end":{"line":32,"column":106,"offset":2149},"indent":[]}},{"type":"text","value":" property for that origin object to ","position":{"start":{"line":32,"column":106,"offset":2149},"end":{"line":32,"column":142,"offset":2185},"indent":[]}},{"type":"inlineCode","value":"false","position":{"start":{"line":32,"column":142,"offset":2185},"end":{"line":32,"column":149,"offset":2192},"indent":[]}},{"type":"text","value":", as in the example below:","position":{"start":{"line":32,"column":149,"offset":2192},"end":{"line":32,"column":175,"offset":2218},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":2044},"end":{"line":32,"column":175,"offset":2218},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"// PUT https://api.cloudflare.com/client/v4/user/load_balancers/pools/<pool_id>\n{\n  \"description\": \"Production Datacenter #1 - US West \",\n  \"created_on\": \"2016-12-22T16:16:16.206253Z\",\n  \"modified_on\": \"2017-01-14T00:11:23.656655Z\",\n  \"id\": \"916167df7265e0ab2284400cee32282f\",\n  \"enabled\": true,\n  \"minimum_origins\": 1,\n  \"monitor\": null,\n  \"name\": \"Production Datacenter 1\",\n  \"notification_email\": \"you@example.com\",\n  \"origins\": [\n    {\n      \"name\": \"server-1\",\n      \"address\": \"0.0.1.1\",\n      \"enabled\": false\n    },\n    {\n      \"name\": \"server-2\",\n      \"address\": \"0.0.2.2\",\n      \"enabled\": true\n    }\n  ]\n}","position":{"start":{"line":34,"column":1,"offset":2220},"end":{"line":59,"column":4,"offset":2847},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":61,"column":1,"offset":2849},"end":{"line":61,"column":4,"offset":2852},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Load balancing containerized application deployments","position":{"start":{"line":63,"column":4,"offset":2857},"end":{"line":63,"column":56,"offset":2909},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":2854},"end":{"line":63,"column":56,"offset":2909},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare’s Load Balancer distributes global traffic intelligently across Google Kubernetes Engine (GKE) and Amazon Web Services EC2 (AWS). Cloudflare’s native Kubernetes support provides a multi-cloud deployment that is transparent to end users.","position":{"start":{"line":65,"column":1,"offset":2911},"end":{"line":65,"column":248,"offset":3158},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":2911},"end":{"line":65,"column":248,"offset":3158},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/best-practices-2.png","alt":null,"position":{"start":{"line":67,"column":1,"offset":3160},"end":{"line":67,"column":43,"offset":3202},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":3160},"end":{"line":67,"column":43,"offset":3202},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":69,"column":5,"offset":3208},"end":{"line":69,"column":18,"offset":3221},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":3204},"end":{"line":69,"column":18,"offset":3221},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Before you begin, be sure you have the following:","position":{"start":{"line":71,"column":1,"offset":3223},"end":{"line":71,"column":50,"offset":3272},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":3223},"end":{"line":71,"column":50,"offset":3272},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Access to Google Cloud Platform (GCP)","position":{"start":{"line":73,"column":3,"offset":3276},"end":{"line":73,"column":40,"offset":3313},"indent":[]}}],"position":{"start":{"line":73,"column":3,"offset":3276},"end":{"line":73,"column":40,"offset":3313},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":3274},"end":{"line":73,"column":40,"offset":3313},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Access to AWS","position":{"start":{"line":74,"column":3,"offset":3316},"end":{"line":74,"column":16,"offset":3329},"indent":[]}}],"position":{"start":{"line":74,"column":3,"offset":3316},"end":{"line":74,"column":16,"offset":3329},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":3314},"end":{"line":74,"column":16,"offset":3329},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Docker image","position":{"start":{"line":75,"column":3,"offset":3332},"end":{"line":75,"column":15,"offset":3344},"indent":[]}}],"position":{"start":{"line":75,"column":3,"offset":3332},"end":{"line":75,"column":15,"offset":3344},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":3330},"end":{"line":75,"column":15,"offset":3344},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A domain on Cloudflare (on the Free, Pro, or Business plan) with a Load Balancing subscription, configurable in the Traffic app","position":{"start":{"line":76,"column":3,"offset":3347},"end":{"line":76,"column":130,"offset":3474},"indent":[]}}],"position":{"start":{"line":76,"column":3,"offset":3347},"end":{"line":76,"column":130,"offset":3474},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":3345},"end":{"line":76,"column":130,"offset":3474},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":3274},"end":{"line":76,"column":130,"offset":3474},"indent":[1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Deploying a containerized web application on Google Kubernetes Engine","position":{"start":{"line":78,"column":5,"offset":3480},"end":{"line":78,"column":74,"offset":3549},"indent":[]}}],"position":{"start":{"line":78,"column":1,"offset":3476},"end":{"line":78,"column":74,"offset":3549},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We will be using ","position":{"start":{"line":80,"column":1,"offset":3551},"end":{"line":80,"column":18,"offset":3568},"indent":[]}},{"type":"link","title":null,"url":"https://cloud.google.com/shell/","children":[{"type":"text","value":"Google Cloud Shell","position":{"start":{"line":80,"column":19,"offset":3569},"end":{"line":80,"column":37,"offset":3587},"indent":[]}}],"position":{"start":{"line":80,"column":18,"offset":3568},"end":{"line":80,"column":71,"offset":3621},"indent":[]}},{"type":"text","value":" interface, which comes preinstalled with the gcloud console, docker, and kubectl command-line tools used below. If you use Cloud Shell, you don’t need to install these command-line tools on your workstation.","position":{"start":{"line":80,"column":71,"offset":3621},"end":{"line":80,"column":279,"offset":3829},"indent":[]}}],"position":{"start":{"line":80,"column":1,"offset":3551},"end":{"line":80,"column":279,"offset":3829},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Getting started","position":{"start":{"line":82,"column":6,"offset":3836},"end":{"line":82,"column":21,"offset":3851},"indent":[]}}],"position":{"start":{"line":82,"column":1,"offset":3831},"end":{"line":82,"column":21,"offset":3851},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Go to the ","position":{"start":{"line":84,"column":1,"offset":3853},"end":{"line":84,"column":11,"offset":3863},"indent":[]}},{"type":"link","title":null,"url":"https://console.cloud.google.com/kubernetes?_ga=2.151836153.-1932148812.1510627946","children":[{"type":"text","value":"Kubernetes Engine","position":{"start":{"line":84,"column":12,"offset":3864},"end":{"line":84,"column":29,"offset":3881},"indent":[]}}],"position":{"start":{"line":84,"column":11,"offset":3863},"end":{"line":84,"column":114,"offset":3966},"indent":[]}},{"type":"text","value":". Click the ","position":{"start":{"line":84,"column":114,"offset":3966},"end":{"line":84,"column":126,"offset":3978},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Activate Google Cloud Shell","position":{"start":{"line":84,"column":128,"offset":3980},"end":{"line":84,"column":155,"offset":4007},"indent":[]}}],"position":{"start":{"line":84,"column":126,"offset":3978},"end":{"line":84,"column":157,"offset":4009},"indent":[]}},{"type":"text","value":" button at the top of the console window. A Cloud Shell session with a command prompt will open in a new frame at the bottom of the console.","position":{"start":{"line":84,"column":157,"offset":4009},"end":{"line":84,"column":297,"offset":4149},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":3853},"end":{"line":84,"column":297,"offset":4149},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/best-practices-3.png","alt":null,"position":{"start":{"line":86,"column":1,"offset":4151},"end":{"line":86,"column":43,"offset":4193},"indent":[]}}],"position":{"start":{"line":86,"column":1,"offset":4151},"end":{"line":86,"column":43,"offset":4193},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Set default configuration values by running the following commands:","position":{"start":{"line":88,"column":1,"offset":4195},"end":{"line":88,"column":68,"offset":4262},"indent":[]}}],"position":{"start":{"line":88,"column":1,"offset":4195},"end":{"line":88,"column":68,"offset":4262},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"gcloud config set project PROJECT_ID","position":{"start":{"line":90,"column":3,"offset":4266},"end":{"line":90,"column":41,"offset":4304},"indent":[]}}],"position":{"start":{"line":90,"column":3,"offset":4266},"end":{"line":90,"column":41,"offset":4304},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":4264},"end":{"line":90,"column":41,"offset":4304},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"gcloud config set compute/zone us-west1-a","position":{"start":{"line":91,"column":3,"offset":4307},"end":{"line":91,"column":46,"offset":4350},"indent":[]}}],"position":{"start":{"line":91,"column":3,"offset":4307},"end":{"line":91,"column":46,"offset":4350},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":4305},"end":{"line":91,"column":46,"offset":4350},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":4264},"end":{"line":91,"column":46,"offset":4350},"indent":[1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Deploying a web application","position":{"start":{"line":93,"column":5,"offset":4356},"end":{"line":93,"column":32,"offset":4383},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":4352},"end":{"line":93,"column":32,"offset":4383},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create a container cluster to run the container image. A cluster consists of a pool of Compute Engine VM instances running Kubernetes.","position":{"start":{"line":95,"column":4,"offset":4388},"end":{"line":95,"column":138,"offset":4522},"indent":[]}}],"position":{"start":{"line":95,"column":4,"offset":4388},"end":{"line":95,"column":138,"offset":4522},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Run the following command to create a three-node cluster (our cluster name is ","position":{"start":{"line":97,"column":6,"offset":4529},"end":{"line":97,"column":84,"offset":4607},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"camilia-cluster","position":{"start":{"line":97,"column":85,"offset":4608},"end":{"line":97,"column":100,"offset":4623},"indent":[]}}],"position":{"start":{"line":97,"column":84,"offset":4607},"end":{"line":97,"column":101,"offset":4624},"indent":[]}},{"type":"text","value":"): ","position":{"start":{"line":97,"column":101,"offset":4624},"end":{"line":97,"column":104,"offset":4627},"indent":[]}},{"type":"inlineCode","value":"gcloud container clusters create camilia-cluster --num-nodes=3","position":{"start":{"line":97,"column":104,"offset":4627},"end":{"line":97,"column":168,"offset":4691},"indent":[]}}],"position":{"start":{"line":97,"column":6,"offset":4529},"end":{"line":97,"column":168,"offset":4691},"indent":[]}}],"position":{"start":{"line":97,"column":4,"offset":4527},"end":{"line":98,"column":1,"offset":4692},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"It may take several minutes for the cluster to be created. Once the command is complete, run the following command to see the cluster’s three worker VM instances: ","position":{"start":{"line":99,"column":6,"offset":4698},"end":{"line":99,"column":169,"offset":4861},"indent":[]}},{"type":"inlineCode","value":"gcloud compute instances list","position":{"start":{"line":99,"column":169,"offset":4861},"end":{"line":99,"column":200,"offset":4892},"indent":[]}}],"position":{"start":{"line":99,"column":6,"offset":4698},"end":{"line":99,"column":200,"offset":4892},"indent":[]}}],"position":{"start":{"line":99,"column":4,"offset":4696},"end":{"line":99,"column":200,"offset":4892},"indent":[]}}],"position":{"start":{"line":97,"column":4,"offset":4527},"end":{"line":99,"column":200,"offset":4892},"indent":[1,4]}}],"position":{"start":{"line":95,"column":1,"offset":4385},"end":{"line":100,"column":1,"offset":4893},"indent":[1,1,1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Deploy the application to the cluster. Use the kubectl command-line tool to deploy and manage applications on a Kubernetes Engine cluster.\nYou can create a simple nginx docker container, for example, using the following command","position":{"start":{"line":101,"column":4,"offset":4897},"end":{"line":102,"column":92,"offset":5127},"indent":[4]}},{"type":"emphasis","children":[{"type":"text","value":" (camilia-nginx","position":{"start":{"line":102,"column":93,"offset":5128},"end":{"line":102,"column":108,"offset":5143},"indent":[]}}],"position":{"start":{"line":102,"column":92,"offset":5127},"end":{"line":102,"column":109,"offset":5144},"indent":[]}},{"type":"text","value":" is the name for the deployment):\n","position":{"start":{"line":102,"column":109,"offset":5144},"end":{"line":103,"column":4,"offset":5181},"indent":[4]}},{"type":"inlineCode","value":"kubectl run camilia-nginx --image=nginx --port 80","position":{"start":{"line":103,"column":4,"offset":5181},"end":{"line":103,"column":55,"offset":5232},"indent":[]}}],"position":{"start":{"line":101,"column":4,"offset":4897},"end":{"line":103,"column":55,"offset":5232},"indent":[4,4]}}],"position":{"start":{"line":101,"column":1,"offset":4894},"end":{"line":103,"column":55,"offset":5232},"indent":[1,1]}}],"position":{"start":{"line":95,"column":1,"offset":4385},"end":{"line":103,"column":55,"offset":5232},"indent":[1,1,1,1,1,1,1,1]}},{"type":"export","value":"export const _frontmatter = {\"order\":40}","position":{"start":{"line":106,"column":1,"offset":5235},"end":{"line":106,"column":41,"offset":5275},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":106,"column":41,"offset":5275}}}}},{"node":{"fields":{"slug":"/create-load-balancer-api"},"frontmatter":{"order":30,"title":"Create via API","summary":null,"demo":null,"tags":null},"headings":[{"value":"Create a load balancer via the API"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Create a load balancer via the API","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":37,"offset":37},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":37,"offset":37},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":4,"column":4,"offset":42},"end":{"line":4,"column":12,"offset":50},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":39},"end":{"line":4,"column":12,"offset":50},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In this walkthrough, you will use the Cloudflare API to set up an active-passive failover configuration for your load balancer. An active-passive failover configuration sends traffic to the servers in your active pool until a failure threshold (configurable) occurs. At the point of failure, Cloudflare then redirects traffic to the passive pool.","position":{"start":{"line":6,"column":1,"offset":52},"end":{"line":6,"column":347,"offset":398},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":52},"end":{"line":6,"column":347,"offset":398},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We will walk through the following steps to create and configure your load balancer via the Cloudflare API:","position":{"start":{"line":8,"column":1,"offset":400},"end":{"line":8,"column":108,"offset":507},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":400},"end":{"line":8,"column":108,"offset":507},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Creating a monitor","position":{"start":{"line":10,"column":6,"offset":514},"end":{"line":10,"column":24,"offset":532},"indent":[]}}],"position":{"start":{"line":10,"column":4,"offset":512},"end":{"line":10,"column":26,"offset":534},"indent":[]}},{"type":"text","value":" — You’ll start by creating a monitor so that you can configure health checks for your load balancer. When you attach a monitor to a pool of origin servers, Cloudflare will use the monitor configuration to start running health checks on those servers.","position":{"start":{"line":10,"column":26,"offset":534},"end":{"line":10,"column":277,"offset":785},"indent":[]}}],"position":{"start":{"line":10,"column":4,"offset":512},"end":{"line":10,"column":277,"offset":785},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":509},"end":{"line":10,"column":277,"offset":785},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Creating pools","position":{"start":{"line":11,"column":6,"offset":791},"end":{"line":11,"column":20,"offset":805},"indent":[]}}],"position":{"start":{"line":11,"column":4,"offset":789},"end":{"line":11,"column":22,"offset":807},"indent":[]}},{"type":"text","value":" — Next you’ll create a couple of pools for your load balancer to manage.","position":{"start":{"line":11,"column":22,"offset":807},"end":{"line":11,"column":95,"offset":880},"indent":[]}}],"position":{"start":{"line":11,"column":4,"offset":789},"end":{"line":11,"column":95,"offset":880},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":786},"end":{"line":11,"column":95,"offset":880},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Validating pool health","position":{"start":{"line":12,"column":6,"offset":886},"end":{"line":12,"column":28,"offset":908},"indent":[]}}],"position":{"start":{"line":12,"column":4,"offset":884},"end":{"line":12,"column":30,"offset":910},"indent":[]}},{"type":"text","value":" — Before going further, you’ll attach your monitor to your new pools and run a health check to confirm their availability.","position":{"start":{"line":12,"column":30,"offset":910},"end":{"line":12,"column":153,"offset":1033},"indent":[]}}],"position":{"start":{"line":12,"column":4,"offset":884},"end":{"line":12,"column":153,"offset":1033},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":881},"end":{"line":12,"column":153,"offset":1033},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Creating a load balancer","position":{"start":{"line":13,"column":6,"offset":1039},"end":{"line":13,"column":30,"offset":1063},"indent":[]}}],"position":{"start":{"line":13,"column":4,"offset":1037},"end":{"line":13,"column":32,"offset":1065},"indent":[]}},{"type":"text","value":" — Next you will create and configure a load balancer to manage traffic for your pools.","position":{"start":{"line":13,"column":32,"offset":1065},"end":{"line":13,"column":119,"offset":1152},"indent":[]}}],"position":{"start":{"line":13,"column":4,"offset":1037},"end":{"line":13,"column":119,"offset":1152},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":1034},"end":{"line":13,"column":119,"offset":1152},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Configuring Geo Steering (optional)","position":{"start":{"line":14,"column":6,"offset":1158},"end":{"line":14,"column":41,"offset":1193},"indent":[]}}],"position":{"start":{"line":14,"column":4,"offset":1156},"end":{"line":14,"column":43,"offset":1195},"indent":[]}},{"type":"text","value":" — Finally, you will see how to programmatically enable Geo Steering for your load balancer.","position":{"start":{"line":14,"column":43,"offset":1195},"end":{"line":14,"column":135,"offset":1287},"indent":[]}}],"position":{"start":{"line":14,"column":4,"offset":1156},"end":{"line":14,"column":135,"offset":1287},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":1153},"end":{"line":14,"column":135,"offset":1287},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":509},"end":{"line":14,"column":135,"offset":1287},"indent":[1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":16,"column":1,"offset":1289},"end":{"line":16,"column":4,"offset":1292},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Using the Cloudflare API","position":{"start":{"line":18,"column":4,"offset":1297},"end":{"line":18,"column":28,"offset":1321},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1294},"end":{"line":18,"column":28,"offset":1321},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Cloudflare API provides a standardized programmatic interface for accessing Cloudflare applications and resources, including Load Balancing. The Cloudflare API is implemented as a RESTful service using HTTPS requests and JSON responses.","position":{"start":{"line":20,"column":1,"offset":1323},"end":{"line":20,"column":241,"offset":1563},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1323},"end":{"line":20,"column":241,"offset":1563},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Users access the Cloudflare API by making HTTPS requests. The Cloudflare API is only available via SSL-enabled HTTPS connections over port 443.","position":{"start":{"line":22,"column":1,"offset":1565},"end":{"line":22,"column":144,"offset":1708},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1565},"end":{"line":22,"column":144,"offset":1708},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A valid request includes the following, which define what command to execute:","position":{"start":{"line":24,"column":1,"offset":1710},"end":{"line":24,"column":78,"offset":1787},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1710},"end":{"line":24,"column":78,"offset":1787},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A ","position":{"start":{"line":26,"column":3,"offset":1791},"end":{"line":26,"column":5,"offset":1793},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"URL","position":{"start":{"line":26,"column":7,"offset":1795},"end":{"line":26,"column":10,"offset":1798},"indent":[]}}],"position":{"start":{"line":26,"column":5,"offset":1793},"end":{"line":26,"column":12,"offset":1800},"indent":[]}},{"type":"text","value":" that identifies a path to a Cloudflare resource","position":{"start":{"line":26,"column":12,"offset":1800},"end":{"line":26,"column":60,"offset":1848},"indent":[]}}],"position":{"start":{"line":26,"column":3,"offset":1791},"end":{"line":26,"column":60,"offset":1848},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1789},"end":{"line":26,"column":60,"offset":1848},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"An ","position":{"start":{"line":27,"column":3,"offset":1851},"end":{"line":27,"column":6,"offset":1854},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"HTTP method","position":{"start":{"line":27,"column":8,"offset":1856},"end":{"line":27,"column":19,"offset":1867},"indent":[]}}],"position":{"start":{"line":27,"column":6,"offset":1854},"end":{"line":27,"column":21,"offset":1869},"indent":[]}},{"type":"text","value":" that defines the action to take on the resource","position":{"start":{"line":27,"column":21,"offset":1869},"end":{"line":27,"column":69,"offset":1917},"indent":[]}}],"position":{"start":{"line":27,"column":3,"offset":1851},"end":{"line":27,"column":69,"offset":1917},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1849},"end":{"line":27,"column":69,"offset":1917},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"An ","position":{"start":{"line":28,"column":3,"offset":1920},"end":{"line":28,"column":6,"offset":1923},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"HTTP","position":{"start":{"line":28,"column":8,"offset":1925},"end":{"line":28,"column":12,"offset":1929},"indent":[]}}],"position":{"start":{"line":28,"column":6,"offset":1923},"end":{"line":28,"column":14,"offset":1931},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":28,"column":14,"offset":1931},"end":{"line":28,"column":15,"offset":1932},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"header","position":{"start":{"line":28,"column":17,"offset":1934},"end":{"line":28,"column":23,"offset":1940},"indent":[]}}],"position":{"start":{"line":28,"column":15,"offset":1932},"end":{"line":28,"column":25,"offset":1942},"indent":[]}},{"type":"text","value":" that specifies authorization details and the content type for request and response bodies","position":{"start":{"line":28,"column":25,"offset":1942},"end":{"line":28,"column":115,"offset":2032},"indent":[]}}],"position":{"start":{"line":28,"column":3,"offset":1920},"end":{"line":28,"column":115,"offset":2032},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1918},"end":{"line":28,"column":115,"offset":2032},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"An optional ","position":{"start":{"line":29,"column":3,"offset":2035},"end":{"line":29,"column":15,"offset":2047},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"payload","position":{"start":{"line":29,"column":17,"offset":2049},"end":{"line":29,"column":24,"offset":2056},"indent":[]}}],"position":{"start":{"line":29,"column":15,"offset":2047},"end":{"line":29,"column":26,"offset":2058},"indent":[]}},{"type":"text","value":" for specifying parameters and values","position":{"start":{"line":29,"column":26,"offset":2058},"end":{"line":29,"column":63,"offset":2095},"indent":[]}}],"position":{"start":{"line":29,"column":3,"offset":2035},"end":{"line":29,"column":63,"offset":2095},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":2033},"end":{"line":29,"column":63,"offset":2095},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1789},"end":{"line":29,"column":63,"offset":2095},"indent":[1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Request URL","position":{"start":{"line":31,"column":5,"offset":2101},"end":{"line":31,"column":16,"offset":2112},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":2097},"end":{"line":31,"column":16,"offset":2112},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The request URL is composed of a ","position":{"start":{"line":33,"column":1,"offset":2114},"end":{"line":33,"column":34,"offset":2147},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"base path","position":{"start":{"line":33,"column":36,"offset":2149},"end":{"line":33,"column":45,"offset":2158},"indent":[]}}],"position":{"start":{"line":33,"column":34,"offset":2147},"end":{"line":33,"column":47,"offset":2160},"indent":[]}},{"type":"text","value":" and an ","position":{"start":{"line":33,"column":47,"offset":2160},"end":{"line":33,"column":55,"offset":2168},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"endpoint","position":{"start":{"line":33,"column":57,"offset":2170},"end":{"line":33,"column":65,"offset":2178},"indent":[]}}],"position":{"start":{"line":33,"column":55,"offset":2168},"end":{"line":33,"column":67,"offset":2180},"indent":[]}},{"type":"text","value":". The stable base URL for Version 4 of the Cloudflare API is:","position":{"start":{"line":33,"column":67,"offset":2180},"end":{"line":33,"column":128,"offset":2241},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":2114},"end":{"line":33,"column":128,"offset":2241},"indent":[]}},{"type":"code","lang":"txt","meta":null,"value":"https://api.cloudflare.com/client/v4","position":{"start":{"line":35,"column":1,"offset":2243},"end":{"line":37,"column":4,"offset":2290},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The endpoint is a URI that represents the path to a given resource, such as a Cloudflare load balancer. For example, the Cloudflare API endpoint for load balancers is:","position":{"start":{"line":39,"column":1,"offset":2292},"end":{"line":39,"column":168,"offset":2459},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":2292},"end":{"line":39,"column":168,"offset":2459},"indent":[]}},{"type":"code","lang":"txt","meta":null,"value":"/zones/:identifier/load_balancers/:identifier","position":{"start":{"line":41,"column":1,"offset":2461},"end":{"line":43,"column":4,"offset":2517},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"When an endpoint specifies an ","position":{"start":{"line":45,"column":1,"offset":2519},"end":{"line":45,"column":31,"offset":2549},"indent":[]}},{"type":"inlineCode","value":":identifier","position":{"start":{"line":45,"column":31,"offset":2549},"end":{"line":45,"column":44,"offset":2562},"indent":[]}},{"type":"text","value":" term, the identifier must be replaced with the Cloudflare ID for an instance of the resource type that precedes it. The load balancer example above requires two Cloudflare IDs: one to identify the zone and one to identify a specific load balancer, respectively. Cloudflare IDs are represented by 32-byte strings.","position":{"start":{"line":45,"column":44,"offset":2562},"end":{"line":45,"column":357,"offset":2875},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":2519},"end":{"line":45,"column":357,"offset":2875},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To form a request URL, append the endpoint to the base path, as in the example below:","position":{"start":{"line":47,"column":1,"offset":2877},"end":{"line":47,"column":86,"offset":2962},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":2877},"end":{"line":47,"column":86,"offset":2962},"indent":[]}},{"type":"code","lang":"txt","meta":null,"value":"https://api.cloudflare.com/client/v4/zones/cd7d0123e3012345da9420df9514dad0/load_balancers/699d98642c564d2e855e9661899b7252","position":{"start":{"line":49,"column":1,"offset":2964},"end":{"line":51,"column":4,"offset":3098},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"HTTP methods","position":{"start":{"line":53,"column":5,"offset":3104},"end":{"line":53,"column":17,"offset":3116},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":3100},"end":{"line":53,"column":17,"offset":3116},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare API endpoints accept one or more of the following HTTP methods, which typically behave as outlined:","position":{"start":{"line":55,"column":1,"offset":3118},"end":{"line":55,"column":111,"offset":3228},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":3118},"end":{"line":55,"column":111,"offset":3228},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"GET","position":{"start":{"line":57,"column":3,"offset":3232},"end":{"line":57,"column":8,"offset":3237},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":57,"column":8,"offset":3237},"end":{"line":57,"column":9,"offset":3238},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"retrieves a representation/information","position":{"start":{"line":57,"column":11,"offset":3240},"end":{"line":57,"column":49,"offset":3278},"indent":[]}}],"position":{"start":{"line":57,"column":9,"offset":3238},"end":{"line":57,"column":51,"offset":3280},"indent":[]}},{"type":"text","value":" about a resource or collection of resources without modifying them in any way.","position":{"start":{"line":57,"column":51,"offset":3280},"end":{"line":57,"column":130,"offset":3359},"indent":[]}}],"position":{"start":{"line":57,"column":3,"offset":3232},"end":{"line":57,"column":130,"offset":3359},"indent":[]}}],"position":{"start":{"line":57,"column":1,"offset":3230},"end":{"line":57,"column":130,"offset":3359},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"POST","position":{"start":{"line":58,"column":3,"offset":3362},"end":{"line":58,"column":9,"offset":3368},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":58,"column":9,"offset":3368},"end":{"line":58,"column":10,"offset":3369},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"creates a new resource","position":{"start":{"line":58,"column":12,"offset":3371},"end":{"line":58,"column":34,"offset":3393},"indent":[]}}],"position":{"start":{"line":58,"column":10,"offset":3369},"end":{"line":58,"column":36,"offset":3395},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":58,"column":36,"offset":3395},"end":{"line":58,"column":37,"offset":3396},"indent":[]}}],"position":{"start":{"line":58,"column":3,"offset":3362},"end":{"line":58,"column":37,"offset":3396},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":3360},"end":{"line":58,"column":37,"offset":3396},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"PUT","position":{"start":{"line":59,"column":3,"offset":3399},"end":{"line":59,"column":8,"offset":3404},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":59,"column":8,"offset":3404},"end":{"line":59,"column":9,"offset":3405},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"updates an existing resource","position":{"start":{"line":59,"column":11,"offset":3407},"end":{"line":59,"column":39,"offset":3435},"indent":[]}}],"position":{"start":{"line":59,"column":9,"offset":3405},"end":{"line":59,"column":41,"offset":3437},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":59,"column":41,"offset":3437},"end":{"line":59,"column":42,"offset":3438},"indent":[]}}],"position":{"start":{"line":59,"column":3,"offset":3399},"end":{"line":59,"column":42,"offset":3438},"indent":[]}}],"position":{"start":{"line":59,"column":1,"offset":3397},"end":{"line":59,"column":42,"offset":3438},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"PATCH","position":{"start":{"line":60,"column":3,"offset":3441},"end":{"line":60,"column":10,"offset":3448},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":60,"column":10,"offset":3448},"end":{"line":60,"column":11,"offset":3449},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"partially updates an existing resource","position":{"start":{"line":60,"column":13,"offset":3451},"end":{"line":60,"column":51,"offset":3489},"indent":[]}}],"position":{"start":{"line":60,"column":11,"offset":3449},"end":{"line":60,"column":53,"offset":3491},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":60,"column":53,"offset":3491},"end":{"line":60,"column":54,"offset":3492},"indent":[]}}],"position":{"start":{"line":60,"column":3,"offset":3441},"end":{"line":60,"column":54,"offset":3492},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":3439},"end":{"line":60,"column":54,"offset":3492},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"DELETE","position":{"start":{"line":61,"column":3,"offset":3495},"end":{"line":61,"column":11,"offset":3503},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":61,"column":11,"offset":3503},"end":{"line":61,"column":12,"offset":3504},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"removes an existing resource","position":{"start":{"line":61,"column":14,"offset":3506},"end":{"line":61,"column":42,"offset":3534},"indent":[]}}],"position":{"start":{"line":61,"column":12,"offset":3504},"end":{"line":61,"column":44,"offset":3536},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":61,"column":44,"offset":3536},"end":{"line":61,"column":45,"offset":3537},"indent":[]}}],"position":{"start":{"line":61,"column":3,"offset":3495},"end":{"line":61,"column":45,"offset":3537},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":3493},"end":{"line":61,"column":45,"offset":3537},"indent":[]}}],"position":{"start":{"line":57,"column":1,"offset":3230},"end":{"line":61,"column":45,"offset":3537},"indent":[1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"HTTP header","position":{"start":{"line":63,"column":5,"offset":3543},"end":{"line":63,"column":16,"offset":3554},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":3539},"end":{"line":63,"column":16,"offset":3554},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Cloudflare API requires that headers include the following:","position":{"start":{"line":65,"column":1,"offset":3556},"end":{"line":65,"column":64,"offset":3619},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":3556},"end":{"line":65,"column":64,"offset":3619},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Authorization","position":{"start":{"line":67,"column":5,"offset":3625},"end":{"line":67,"column":18,"offset":3638},"indent":[]}}],"position":{"start":{"line":67,"column":3,"offset":3623},"end":{"line":67,"column":20,"offset":3640},"indent":[]}}],"position":{"start":{"line":67,"column":3,"offset":3623},"end":{"line":67,"column":20,"offset":3640},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"When authorizing via ","position":{"start":{"line":68,"column":5,"offset":3645},"end":{"line":68,"column":26,"offset":3666},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"API Token","position":{"start":{"line":68,"column":28,"offset":3668},"end":{"line":68,"column":37,"offset":3677},"indent":[]}}],"position":{"start":{"line":68,"column":26,"offset":3666},"end":{"line":68,"column":39,"offset":3679},"indent":[]}},{"type":"text","value":", use ","position":{"start":{"line":68,"column":39,"offset":3679},"end":{"line":68,"column":45,"offset":3685},"indent":[]}},{"type":"inlineCode","value":"\"Authorization: Bearer <API token>\".","position":{"start":{"line":68,"column":45,"offset":3685},"end":{"line":68,"column":83,"offset":3723},"indent":[]}}],"position":{"start":{"line":68,"column":5,"offset":3645},"end":{"line":68,"column":83,"offset":3723},"indent":[]}}],"position":{"start":{"line":68,"column":3,"offset":3643},"end":{"line":68,"column":83,"offset":3723},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"When authorizing via ","position":{"start":{"line":69,"column":5,"offset":3728},"end":{"line":69,"column":26,"offset":3749},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"API Key","position":{"start":{"line":69,"column":28,"offset":3751},"end":{"line":69,"column":35,"offset":3758},"indent":[]}}],"position":{"start":{"line":69,"column":26,"offset":3749},"end":{"line":69,"column":37,"offset":3760},"indent":[]}},{"type":"text","value":", both ","position":{"start":{"line":69,"column":37,"offset":3760},"end":{"line":69,"column":44,"offset":3767},"indent":[]}},{"type":"inlineCode","value":"\"X-Auth-Key: <API key>\"","position":{"start":{"line":69,"column":44,"offset":3767},"end":{"line":69,"column":69,"offset":3792},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":69,"column":69,"offset":3792},"end":{"line":69,"column":74,"offset":3797},"indent":[]}},{"type":"inlineCode","value":"\"X-Auth-Email:<account_email>\"","position":{"start":{"line":69,"column":74,"offset":3797},"end":{"line":69,"column":106,"offset":3829},"indent":[]}},{"type":"text","value":" are required.","position":{"start":{"line":69,"column":106,"offset":3829},"end":{"line":69,"column":120,"offset":3843},"indent":[]}}],"position":{"start":{"line":69,"column":5,"offset":3728},"end":{"line":69,"column":120,"offset":3843},"indent":[]}}],"position":{"start":{"line":69,"column":3,"offset":3726},"end":{"line":69,"column":120,"offset":3843},"indent":[]}}],"position":{"start":{"line":68,"column":3,"offset":3643},"end":{"line":69,"column":120,"offset":3843},"indent":[3]}}],"position":{"start":{"line":67,"column":1,"offset":3621},"end":{"line":69,"column":120,"offset":3843},"indent":[1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Content Type","position":{"start":{"line":70,"column":5,"offset":3848},"end":{"line":70,"column":17,"offset":3860},"indent":[]}}],"position":{"start":{"line":70,"column":3,"offset":3846},"end":{"line":70,"column":19,"offset":3862},"indent":[]}},{"type":"text","value":"—The Cloudflare API supports JSON-formatted request and response bodies only. Set ","position":{"start":{"line":70,"column":19,"offset":3862},"end":{"line":70,"column":101,"offset":3944},"indent":[]}},{"type":"inlineCode","value":"\"Content-Type:application/json\"","position":{"start":{"line":70,"column":101,"offset":3944},"end":{"line":70,"column":134,"offset":3977},"indent":[]}},{"type":"text","value":"in request headers.","position":{"start":{"line":70,"column":134,"offset":3977},"end":{"line":70,"column":153,"offset":3996},"indent":[]}}],"position":{"start":{"line":70,"column":3,"offset":3846},"end":{"line":70,"column":153,"offset":3996},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":3844},"end":{"line":70,"column":153,"offset":3996},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":3621},"end":{"line":70,"column":153,"offset":3996},"indent":[1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"API documentation conventions","position":{"start":{"line":72,"column":5,"offset":4002},"end":{"line":72,"column":34,"offset":4031},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":3998},"end":{"line":72,"column":34,"offset":4031},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Throughout this guide, API references will omit the base path for simplicity.","position":{"start":{"line":74,"column":1,"offset":4033},"end":{"line":74,"column":78,"offset":4110},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":4033},"end":{"line":74,"column":78,"offset":4110},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"See ","position":{"start":{"line":76,"column":1,"offset":4112},"end":{"line":76,"column":5,"offset":4116},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"https://api.cloudflare.com","children":[{"type":"text","value":"Cloudflare API Documentation v4","position":{"start":{"line":76,"column":7,"offset":4118},"end":{"line":76,"column":38,"offset":4149},"indent":[]}}],"position":{"start":{"line":76,"column":6,"offset":4117},"end":{"line":76,"column":67,"offset":4178},"indent":[]}}],"position":{"start":{"line":76,"column":5,"offset":4116},"end":{"line":76,"column":68,"offset":4179},"indent":[]}},{"type":"text","value":" for a complete reference to the latest version of the API.","position":{"start":{"line":76,"column":68,"offset":4179},"end":{"line":76,"column":127,"offset":4238},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":4112},"end":{"line":76,"column":127,"offset":4238},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":78,"column":1,"offset":4240},"end":{"line":78,"column":4,"offset":4243},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Before you begin","position":{"start":{"line":80,"column":4,"offset":4248},"end":{"line":80,"column":20,"offset":4264},"indent":[]}}],"position":{"start":{"line":80,"column":1,"offset":4245},"end":{"line":80,"column":20,"offset":4264},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Be sure that you have the following:","position":{"start":{"line":82,"column":1,"offset":4266},"end":{"line":82,"column":37,"offset":4302},"indent":[]}}],"position":{"start":{"line":82,"column":1,"offset":4266},"end":{"line":82,"column":37,"offset":4302},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Access to Load Balancing","position":{"start":{"line":84,"column":5,"offset":4308},"end":{"line":84,"column":29,"offset":4332},"indent":[]}}],"position":{"start":{"line":84,"column":3,"offset":4306},"end":{"line":84,"column":31,"offset":4334},"indent":[]}},{"type":"text","value":" via one of the following:","position":{"start":{"line":84,"column":31,"offset":4334},"end":{"line":84,"column":57,"offset":4360},"indent":[]}}],"position":{"start":{"line":84,"column":3,"offset":4306},"end":{"line":84,"column":57,"offset":4360},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"An Enterprise account with Load Balancing enabled.","position":{"start":{"line":85,"column":5,"offset":4365},"end":{"line":85,"column":55,"offset":4415},"indent":[]}}],"position":{"start":{"line":85,"column":5,"offset":4365},"end":{"line":85,"column":55,"offset":4415},"indent":[]}}],"position":{"start":{"line":85,"column":3,"offset":4363},"end":{"line":85,"column":55,"offset":4415},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"An existing Free, Pro, or Business account with a Load Balancing subscription. (Enable Load Balancing in the Traffic app.)","position":{"start":{"line":86,"column":5,"offset":4420},"end":{"line":86,"column":127,"offset":4542},"indent":[]}}],"position":{"start":{"line":86,"column":5,"offset":4420},"end":{"line":86,"column":127,"offset":4542},"indent":[]}}],"position":{"start":{"line":86,"column":3,"offset":4418},"end":{"line":86,"column":127,"offset":4542},"indent":[]}}],"position":{"start":{"line":85,"column":3,"offset":4363},"end":{"line":86,"column":127,"offset":4542},"indent":[3]}}],"position":{"start":{"line":84,"column":1,"offset":4304},"end":{"line":86,"column":127,"offset":4542},"indent":[1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Load balancer hostname","position":{"start":{"line":87,"column":5,"offset":4547},"end":{"line":87,"column":27,"offset":4569},"indent":[]}}],"position":{"start":{"line":87,"column":3,"offset":4545},"end":{"line":87,"column":29,"offset":4571},"indent":[]}},{"type":"text","value":": The hostname for which the Cloudflare Load Balancer will manage traffic. The default hostname is the root hostname.","position":{"start":{"line":87,"column":29,"offset":4571},"end":{"line":87,"column":146,"offset":4688},"indent":[]}}],"position":{"start":{"line":87,"column":3,"offset":4545},"end":{"line":87,"column":146,"offset":4688},"indent":[]}}],"position":{"start":{"line":87,"column":1,"offset":4543},"end":{"line":87,"column":146,"offset":4688},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Origin servers (2):","position":{"start":{"line":88,"column":5,"offset":4693},"end":{"line":88,"column":24,"offset":4712},"indent":[]}}],"position":{"start":{"line":88,"column":3,"offset":4691},"end":{"line":88,"column":26,"offset":4714},"indent":[]}},{"type":"text","value":" You will need access to at least two origin servers (","position":{"start":{"line":88,"column":26,"offset":4714},"end":{"line":88,"column":80,"offset":4768},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"origin-server-1","position":{"start":{"line":88,"column":81,"offset":4769},"end":{"line":88,"column":96,"offset":4784},"indent":[]}}],"position":{"start":{"line":88,"column":80,"offset":4768},"end":{"line":88,"column":97,"offset":4785},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":88,"column":97,"offset":4785},"end":{"line":88,"column":102,"offset":4790},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"origin-server-2","position":{"start":{"line":88,"column":103,"offset":4791},"end":{"line":88,"column":118,"offset":4806},"indent":[]}}],"position":{"start":{"line":88,"column":102,"offset":4790},"end":{"line":88,"column":119,"offset":4807},"indent":[]}},{"type":"text","value":", for example).","position":{"start":{"line":88,"column":119,"offset":4807},"end":{"line":88,"column":134,"offset":4822},"indent":[]}}],"position":{"start":{"line":88,"column":3,"offset":4691},"end":{"line":88,"column":134,"offset":4822},"indent":[]}}],"position":{"start":{"line":88,"column":1,"offset":4689},"end":{"line":88,"column":134,"offset":4822},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Location:","position":{"start":{"line":89,"column":5,"offset":4827},"end":{"line":89,"column":14,"offset":4836},"indent":[]}}],"position":{"start":{"line":89,"column":3,"offset":4825},"end":{"line":89,"column":16,"offset":4838},"indent":[]}},{"type":"text","value":" Initially, we will configure only a single geographic region.","position":{"start":{"line":89,"column":16,"offset":4838},"end":{"line":89,"column":78,"offset":4900},"indent":[]}}],"position":{"start":{"line":89,"column":3,"offset":4825},"end":{"line":89,"column":78,"offset":4900},"indent":[]}}],"position":{"start":{"line":89,"column":1,"offset":4823},"end":{"line":89,"column":78,"offset":4900},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":4304},"end":{"line":89,"column":78,"offset":4900},"indent":[1,1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":91,"column":1,"offset":4902},"end":{"line":91,"column":4,"offset":4905},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Step 1: Create a monitor","position":{"start":{"line":93,"column":4,"offset":4910},"end":{"line":93,"column":28,"offset":4934},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":4907},"end":{"line":93,"column":28,"offset":4934},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Monitors are configurations that describe how to run health checks on your origin servers. When a monitor is attached to a pool, Cloudflare will run health checks on that pool’s origin servers from our data centers around the world. Because monitors exist independently, you can attach them to multiple pools. This way you can make a change to a single monitor and automatically update the health check policy for every pool that uses it.","position":{"start":{"line":95,"column":1,"offset":4936},"end":{"line":95,"column":439,"offset":5374},"indent":[]}}],"position":{"start":{"line":95,"column":1,"offset":4936},"end":{"line":95,"column":439,"offset":5374},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Use the Create Monitor command to create a new monitor, as in the example below. If you are using virtual hosting, it is important to define a ","position":{"start":{"line":97,"column":1,"offset":5376},"end":{"line":97,"column":144,"offset":5519},"indent":[]}},{"type":"inlineCode","value":"host","position":{"start":{"line":97,"column":144,"offset":5519},"end":{"line":97,"column":150,"offset":5525},"indent":[]}},{"type":"text","value":" value for the ","position":{"start":{"line":97,"column":150,"offset":5525},"end":{"line":97,"column":165,"offset":5540},"indent":[]}},{"type":"inlineCode","value":"header","position":{"start":{"line":97,"column":165,"offset":5540},"end":{"line":97,"column":173,"offset":5548},"indent":[]}},{"type":"text","value":" property so that your web server knows which virtual host to serve. In most cases, this will be the same hostname as the one you intend the load balancer to manage—the same one you will use to name the load balancer. (See ","position":{"start":{"line":97,"column":173,"offset":5548},"end":{"line":97,"column":396,"offset":5771},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"/understand-basics/monitors/","children":[{"type":"text","value":"Monitors","position":{"start":{"line":97,"column":398,"offset":5773},"end":{"line":97,"column":406,"offset":5781},"indent":[]}}],"position":{"start":{"line":97,"column":397,"offset":5772},"end":{"line":97,"column":437,"offset":5812},"indent":[]}}],"position":{"start":{"line":97,"column":396,"offset":5771},"end":{"line":97,"column":438,"offset":5813},"indent":[]}},{"type":"text","value":" for a full list of monitor properties and available commands.)","position":{"start":{"line":97,"column":438,"offset":5813},"end":{"line":97,"column":501,"offset":5876},"indent":[]}}],"position":{"start":{"line":97,"column":1,"offset":5376},"end":{"line":97,"column":501,"offset":5876},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Request example","position":{"start":{"line":99,"column":3,"offset":5880},"end":{"line":99,"column":18,"offset":5895},"indent":[]}}],"position":{"start":{"line":99,"column":1,"offset":5878},"end":{"line":99,"column":20,"offset":5897},"indent":[]}}],"position":{"start":{"line":99,"column":1,"offset":5878},"end":{"line":99,"column":20,"offset":5897},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"# POST https://api.cloudflare.com/client/v4/user/load_balancers/monitors\n{\n  \"type\": \"https\",\n  \"description\": \"www.example.com Health Check\",\n  \"method\": \"GET\",\n  \"path\": \"/health\",\n  \"header\": {\n    \"Host\": [\n      \"example.com\"\n    ],\n    \"X-App-ID\": [\n      \"abc123\"\n    ]\n  },\n  \"port\": 8080,\n  \"timeout\": 3,\n  \"retries\": 0,\n  \"interval\": 90,\n  \"expected_body\": \"alive\",\n  \"expected_codes\": \"2xx\",\n  \"follow_redirects\": true,\n  \"allow_insecure\": true\n}","position":{"start":{"line":101,"column":1,"offset":5899},"end":{"line":125,"column":4,"offset":6368},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Response","position":{"start":{"line":127,"column":3,"offset":6372},"end":{"line":127,"column":11,"offset":6380},"indent":[]}}],"position":{"start":{"line":127,"column":1,"offset":6370},"end":{"line":127,"column":13,"offset":6382},"indent":[]}}],"position":{"start":{"line":127,"column":1,"offset":6370},"end":{"line":127,"column":13,"offset":6382},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": \"f1aba936b94213e5b8dca0c0dbf1f9cc\",\n    \"created_on\": \"2014-01-01T05:20:00.12345Z\",\n    \"modified_on\": \"2014-01-01T05:20:00.12345Z\",\n    \"type\": \"https\",\n    \"description\": \"www.example.com Health Check\",\n    \"method\": \"GET\",\n    \"path\": \"/health\",\n    \"header\": {\n      \"Host\": [\n        \"example.com\"\n      ],\n      \"X-App-ID\": [\n        \"abc123\"\n      ]\n    },\n    \"port\": 8080,\n    \"timeout\": 3,\n    \"retries\": 0,\n    \"interval\": 90,\n    \"expected_body\": \"alive\",\n    \"expected_codes\": \"2xx\",\n    \"follow_redirects\": true,\n    \"allow_insecure\": true\n  }\n}","position":{"start":{"line":129,"column":1,"offset":6384},"end":{"line":160,"column":4,"offset":7034},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Locate the Monitor ID in the response","position":{"start":{"line":162,"column":3,"offset":7038},"end":{"line":162,"column":40,"offset":7075},"indent":[]}}],"position":{"start":{"line":162,"column":1,"offset":7036},"end":{"line":162,"column":42,"offset":7077},"indent":[]}},{"type":"text","value":" and record it. Your new monitor won’t trigger any health checks until we attach the monitor to a pool, and to do that we will need the Monitor ID.","position":{"start":{"line":162,"column":42,"offset":7077},"end":{"line":162,"column":189,"offset":7224},"indent":[]}}],"position":{"start":{"line":162,"column":1,"offset":7036},"end":{"line":162,"column":189,"offset":7224},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":164,"column":1,"offset":7226},"end":{"line":164,"column":4,"offset":7229},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Step 2: Create pools","position":{"start":{"line":166,"column":4,"offset":7234},"end":{"line":166,"column":24,"offset":7254},"indent":[]}}],"position":{"start":{"line":166,"column":1,"offset":7231},"end":{"line":166,"column":24,"offset":7254},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A Cloudflare pool represents a group of origin servers, each identified by their IP address or hostname. If you're familiar with DNS terminology, think of a pool as a ","position":{"start":{"line":168,"column":1,"offset":7256},"end":{"line":168,"column":168,"offset":7423},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"record set","position":{"start":{"line":168,"column":169,"offset":7424},"end":{"line":168,"column":179,"offset":7434},"indent":[]}}],"position":{"start":{"line":168,"column":168,"offset":7423},"end":{"line":168,"column":180,"offset":7435},"indent":[]}},{"type":"text","value":", except we only return addresses that are considered healthy.","position":{"start":{"line":168,"column":180,"offset":7435},"end":{"line":168,"column":242,"offset":7497},"indent":[]}}],"position":{"start":{"line":168,"column":1,"offset":7256},"end":{"line":168,"column":242,"offset":7497},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Before you continue, gather the following:","position":{"start":{"line":170,"column":1,"offset":7499},"end":{"line":170,"column":43,"offset":7541},"indent":[]}}],"position":{"start":{"line":170,"column":1,"offset":7499},"end":{"line":170,"column":43,"offset":7541},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The IP addresses or hostnames of your origin servers","position":{"start":{"line":172,"column":3,"offset":7545},"end":{"line":172,"column":55,"offset":7597},"indent":[]}}],"position":{"start":{"line":172,"column":3,"offset":7545},"end":{"line":172,"column":55,"offset":7597},"indent":[]}}],"position":{"start":{"line":172,"column":1,"offset":7543},"end":{"line":172,"column":55,"offset":7597},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The ID of the monitor you just created. (Use the List Monitors command, ","position":{"start":{"line":173,"column":3,"offset":7600},"end":{"line":173,"column":75,"offset":7672},"indent":[]}},{"type":"inlineCode","value":"GET /load_balancers/monitors","position":{"start":{"line":173,"column":75,"offset":7672},"end":{"line":173,"column":105,"offset":7702},"indent":[]}},{"type":"text","value":", to fetch the Monitor ID.)","position":{"start":{"line":173,"column":105,"offset":7702},"end":{"line":173,"column":132,"offset":7729},"indent":[]}}],"position":{"start":{"line":173,"column":3,"offset":7600},"end":{"line":173,"column":132,"offset":7729},"indent":[]}}],"position":{"start":{"line":173,"column":1,"offset":7598},"end":{"line":173,"column":132,"offset":7729},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"An email address for receiving health check notifications","position":{"start":{"line":174,"column":3,"offset":7732},"end":{"line":174,"column":60,"offset":7789},"indent":[]}}],"position":{"start":{"line":174,"column":3,"offset":7732},"end":{"line":174,"column":60,"offset":7789},"indent":[]}}],"position":{"start":{"line":174,"column":1,"offset":7730},"end":{"line":174,"column":60,"offset":7789},"indent":[]}}],"position":{"start":{"line":172,"column":1,"offset":7543},"end":{"line":174,"column":60,"offset":7789},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Create Pool 1","position":{"start":{"line":176,"column":5,"offset":7795},"end":{"line":176,"column":18,"offset":7808},"indent":[]}}],"position":{"start":{"line":176,"column":1,"offset":7791},"end":{"line":176,"column":18,"offset":7808},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Use the Create Pool command on the Cloudflare API to create a new pool, as in the example below. Set the ","position":{"start":{"line":178,"column":1,"offset":7810},"end":{"line":178,"column":106,"offset":7915},"indent":[]}},{"type":"inlineCode","value":"origins","position":{"start":{"line":178,"column":106,"offset":7915},"end":{"line":178,"column":115,"offset":7924},"indent":[]}},{"type":"text","value":" array to supply a list of origin server objects. In this example, use the two origin servers you reserved for this exercise. (See ","position":{"start":{"line":178,"column":115,"offset":7924},"end":{"line":178,"column":246,"offset":8055},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"/understand-basics/pools/","children":[{"type":"text","value":"Pools","position":{"start":{"line":178,"column":248,"offset":8057},"end":{"line":178,"column":253,"offset":8062},"indent":[]}}],"position":{"start":{"line":178,"column":247,"offset":8056},"end":{"line":178,"column":281,"offset":8090},"indent":[]}}],"position":{"start":{"line":178,"column":246,"offset":8055},"end":{"line":178,"column":282,"offset":8091},"indent":[]}},{"type":"text","value":" for a list of pool properties and available commands.)","position":{"start":{"line":178,"column":282,"offset":8091},"end":{"line":178,"column":337,"offset":8146},"indent":[]}}],"position":{"start":{"line":178,"column":1,"offset":7810},"end":{"line":178,"column":337,"offset":8146},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Setting the pool’s ","position":{"start":{"line":180,"column":1,"offset":8148},"end":{"line":180,"column":20,"offset":8167},"indent":[]}},{"type":"inlineCode","value":"monitor","position":{"start":{"line":180,"column":20,"offset":8167},"end":{"line":180,"column":29,"offset":8176},"indent":[]}},{"type":"text","value":" property will attach your monitor to the pool and enable health checks. For this example, use the Monitor ID you generated in the previous step.","position":{"start":{"line":180,"column":29,"offset":8176},"end":{"line":180,"column":174,"offset":8321},"indent":[]}}],"position":{"start":{"line":180,"column":1,"offset":8148},"end":{"line":180,"column":174,"offset":8321},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Request","position":{"start":{"line":182,"column":3,"offset":8325},"end":{"line":182,"column":10,"offset":8332},"indent":[]}}],"position":{"start":{"line":182,"column":1,"offset":8323},"end":{"line":182,"column":12,"offset":8334},"indent":[]}}],"position":{"start":{"line":182,"column":1,"offset":8323},"end":{"line":182,"column":12,"offset":8334},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"// POST https://api.cloudflare.com/client/v4/user/load_balancers/pools\n{\n  \"name\": \"primary-dc-1\",\n  \"description\": \"Primary data center - Provider XYZ\",\n  \"monitor\": \"f1aba936b94213e5b8dca0c0dbf1f9cc\",\n  \"origins\": [\n    {\n      \"name\": \"app-server-1\",\n      \"address\": \"0.0.0.0\",\n    },\n    {\n      \"name\": \"app-server-2\",\n      \"address\": \"0.0.2.0\",\n      \"enabled\": true\n    }\n  ],\n  \"notification_email\": \"someone@example.com\"\n}","position":{"start":{"line":184,"column":1,"offset":8336},"end":{"line":203,"column":4,"offset":8779},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Response","position":{"start":{"line":205,"column":3,"offset":8783},"end":{"line":205,"column":11,"offset":8791},"indent":[]}}],"position":{"start":{"line":205,"column":1,"offset":8781},"end":{"line":205,"column":13,"offset":8793},"indent":[]}}],"position":{"start":{"line":205,"column":1,"offset":8781},"end":{"line":205,"column":13,"offset":8793},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"result\": {\n    \"id\": \"17b5962d775c646f3f9725cbc7a53df4\",\n    \"created_on\": \"2014-01-01T05:20:00.12345Z\",\n    \"modified_on\": \"2014-01-01T05:20:00.12345Z\",\n    \"description\": \"Primary data center - Provider XYZ\",\n    \"name\": \"primary-dc-1\",\n    \"enabled\": true,\n    \"monitor\": \"f1aba936b94213e5b8dca0c0dbf1f9cc\",\n    \"origins\": [\n      {\n        \"name\": \"app-server-1\",\n        \"address\": \"0.0.1.0\",\n        \"enabled\": true\n      },\n      {\n        \"name\": \"app-server-2\",\n        \"address\": \"0.0.2.0\",\n        \"enabled\": true\n      }\n    ],\n    \"notification_email\": \"someone@example.com\",\n    \"healthy\": true\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}","position":{"start":{"line":207,"column":1,"offset":8795},"end":{"line":236,"column":4,"offset":9479},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If the response is an error, check the error message for a suggestion. If you’re using ","position":{"start":{"line":238,"column":1,"offset":9481},"end":{"line":238,"column":88,"offset":9568},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"curl","position":{"start":{"line":238,"column":89,"offset":9569},"end":{"line":238,"column":93,"offset":9573},"indent":[]}}],"position":{"start":{"line":238,"column":88,"offset":9568},"end":{"line":238,"column":94,"offset":9574},"indent":[]}},{"type":"text","value":" to make requests, check that any shell escaping isn’t breaking your JSON request body.","position":{"start":{"line":238,"column":94,"offset":9574},"end":{"line":238,"column":181,"offset":9661},"indent":[]}}],"position":{"start":{"line":238,"column":1,"offset":9481},"end":{"line":238,"column":181,"offset":9661},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Create Pool 2","position":{"start":{"line":240,"column":5,"offset":9667},"end":{"line":240,"column":18,"offset":9680},"indent":[]}}],"position":{"start":{"line":240,"column":1,"offset":9663},"end":{"line":240,"column":18,"offset":9680},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To create a second pool, use the same command you did to create Pool 1, but give Pool 2 a different ","position":{"start":{"line":242,"column":1,"offset":9682},"end":{"line":242,"column":101,"offset":9782},"indent":[]}},{"type":"inlineCode","value":"name","position":{"start":{"line":242,"column":101,"offset":9782},"end":{"line":242,"column":107,"offset":9788},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":242,"column":107,"offset":9788},"end":{"line":242,"column":108,"offset":9789},"indent":[]}}],"position":{"start":{"line":242,"column":1,"offset":9682},"end":{"line":242,"column":108,"offset":9789},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Request","position":{"start":{"line":244,"column":3,"offset":9793},"end":{"line":244,"column":10,"offset":9800},"indent":[]}}],"position":{"start":{"line":244,"column":1,"offset":9791},"end":{"line":244,"column":12,"offset":9802},"indent":[]}}],"position":{"start":{"line":244,"column":1,"offset":9791},"end":{"line":244,"column":12,"offset":9802},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"// POST https://api.cloudflare.com/client/v4/user/load_balancers/pools\"\n{\n  \"name\": \"secondary-dc-1\",\n  \"description\": \"Secondary data center - Provider QRS\",\n  \"monitor\": \"f1aba936b94213e5b8dca0c0dbf1f9cc\",\n  \"origins\": [\n    {\n      \"name\": \"backup-server-3\",\n      \"address\": \"0.0.3.0\",\n    },\n    {\n      \"name\": \"backup-server-4\",\n      \"address\": \"0.0.4.0\",\n    }\n  ],\n  \"notification_email\": \"someone@example.com\"\n}","position":{"start":{"line":246,"column":1,"offset":9804},"end":{"line":264,"column":4,"offset":10236},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Response","position":{"start":{"line":266,"column":3,"offset":10240},"end":{"line":266,"column":11,"offset":10248},"indent":[]}}],"position":{"start":{"line":266,"column":1,"offset":10238},"end":{"line":266,"column":13,"offset":10250},"indent":[]}}],"position":{"start":{"line":266,"column":1,"offset":10238},"end":{"line":266,"column":13,"offset":10250},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The response will be similar as for Pool 1, but the ID and timestamps will be different.","position":{"start":{"line":268,"column":1,"offset":10252},"end":{"line":268,"column":89,"offset":10340},"indent":[]}}],"position":{"start":{"line":268,"column":1,"offset":10252},"end":{"line":268,"column":89,"offset":10340},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now that you’ve created your pools and attached a monitor, Cloudflare will initiate health checks from each of our data centers. (See ","position":{"start":{"line":270,"column":1,"offset":10342},"end":{"line":270,"column":135,"offset":10476},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"/understand-basics/monitors/","children":[{"type":"text","value":"Monitors","position":{"start":{"line":270,"column":137,"offset":10478},"end":{"line":270,"column":145,"offset":10486},"indent":[]}}],"position":{"start":{"line":270,"column":136,"offset":10477},"end":{"line":270,"column":176,"offset":10517},"indent":[]}}],"position":{"start":{"line":270,"column":135,"offset":10476},"end":{"line":270,"column":177,"offset":10518},"indent":[]}},{"type":"text","value":" for more on how health checks work.)","position":{"start":{"line":270,"column":177,"offset":10518},"end":{"line":270,"column":214,"offset":10555},"indent":[]}}],"position":{"start":{"line":270,"column":1,"offset":10342},"end":{"line":270,"column":214,"offset":10555},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":272,"column":1,"offset":10557},"end":{"line":272,"column":4,"offset":10560},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Step 3: Validate pool health","position":{"start":{"line":274,"column":4,"offset":10565},"end":{"line":274,"column":32,"offset":10593},"indent":[]}}],"position":{"start":{"line":274,"column":1,"offset":10562},"end":{"line":274,"column":32,"offset":10593},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Use the List Pools command to verify you have configured your monitor and pools correctly. The value for the ","position":{"start":{"line":276,"column":1,"offset":10595},"end":{"line":276,"column":110,"offset":10704},"indent":[]}},{"type":"inlineCode","value":"healthy","position":{"start":{"line":276,"column":110,"offset":10704},"end":{"line":276,"column":119,"offset":10713},"indent":[]}},{"type":"text","value":" property should be ","position":{"start":{"line":276,"column":119,"offset":10713},"end":{"line":276,"column":139,"offset":10733},"indent":[]}},{"type":"inlineCode","value":"true","position":{"start":{"line":276,"column":139,"offset":10733},"end":{"line":276,"column":145,"offset":10739},"indent":[]}},{"type":"text","value":", indicating that health checks are configured and the pool is available.","position":{"start":{"line":276,"column":145,"offset":10739},"end":{"line":276,"column":218,"offset":10812},"indent":[]}}],"position":{"start":{"line":276,"column":1,"offset":10595},"end":{"line":276,"column":218,"offset":10812},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Request","position":{"start":{"line":278,"column":3,"offset":10816},"end":{"line":278,"column":10,"offset":10823},"indent":[]}}],"position":{"start":{"line":278,"column":1,"offset":10814},"end":{"line":278,"column":12,"offset":10825},"indent":[]}}],"position":{"start":{"line":278,"column":1,"offset":10814},"end":{"line":278,"column":12,"offset":10825},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"// /load_balancers/pools *OR* GET /load_balancers/pools/:pool_id\n{\n  // ...\n  \"healthy\": true\n  // ...\n}","position":{"start":{"line":280,"column":1,"offset":10827},"end":{"line":287,"column":4,"offset":10941},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Response","position":{"start":{"line":289,"column":3,"offset":10945},"end":{"line":289,"column":11,"offset":10953},"indent":[]}}],"position":{"start":{"line":289,"column":1,"offset":10943},"end":{"line":289,"column":13,"offset":10955},"indent":[]}}],"position":{"start":{"line":289,"column":1,"offset":10943},"end":{"line":289,"column":13,"offset":10955},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"{\n  \"result\": {\n    \"pool_id\": \"ff02c959d17f7bb2b1184a202e3c0af7\",\n    \"pop_health\": {\n      \"Newark, NJ\": {\n        \"healthy\": true,\n        \"origins\": [\n          {\n            \"52.22.68.195\": {\n              \"healthy\": true,\n              \"rtt\": \"161.1ms\",\n              \"failure_reason\": \"No failures\",\n              \"response_code\": 200\n            }\n          },\n          // Each origin will appear in this array\n        ]\n      }\n    },\n    // Each Cloudflare Point-of-Presence will be listed here.\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}","position":{"start":{"line":291,"column":1,"offset":10957},"end":{"line":317,"column":4,"offset":11532},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The response breaks down results for each Cloudflare PoP, as well as the origin servers associated with them.","position":{"start":{"line":319,"column":1,"offset":11534},"end":{"line":319,"column":110,"offset":11643},"indent":[]}}],"position":{"start":{"line":319,"column":1,"offset":11534},"end":{"line":319,"column":110,"offset":11643},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For most use cases, using the List Pools command—","position":{"start":{"line":321,"column":1,"offset":11645},"end":{"line":321,"column":50,"offset":11694},"indent":[]}},{"type":"inlineCode","value":"GET /load_balancers/pools","position":{"start":{"line":321,"column":50,"offset":11694},"end":{"line":321,"column":77,"offset":11721},"indent":[]}},{"type":"text","value":"—is sufficient. Responses from the Pool Health Details command—","position":{"start":{"line":321,"column":77,"offset":11721},"end":{"line":321,"column":140,"offset":11784},"indent":[]}},{"type":"inlineCode","value":"GET pools/:pool_id/health","position":{"start":{"line":321,"column":140,"offset":11784},"end":{"line":321,"column":167,"offset":11811},"indent":[]}},{"type":"text","value":"—can be verbose, so it’s a better tool for drilling into isolated failures.","position":{"start":{"line":321,"column":167,"offset":11811},"end":{"line":321,"column":242,"offset":11886},"indent":[]}}],"position":{"start":{"line":321,"column":1,"offset":11645},"end":{"line":321,"column":242,"offset":11886},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":323,"column":1,"offset":11888},"end":{"line":323,"column":4,"offset":11891},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Step 4: Create a load balancer","position":{"start":{"line":325,"column":4,"offset":11896},"end":{"line":325,"column":34,"offset":11926},"indent":[]}}],"position":{"start":{"line":325,"column":1,"offset":11893},"end":{"line":325,"column":34,"offset":11926},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To start delivering traffic to your pools, you must attach them to a load balancer. Load balancers are identified by the DNS hostname whose traffic you want to balance (","position":{"start":{"line":327,"column":1,"offset":11928},"end":{"line":327,"column":170,"offset":12097},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"http://www.example.com","children":[{"type":"text","value":"www.example.com","position":{"start":{"line":327,"column":171,"offset":12098},"end":{"line":327,"column":186,"offset":12113},"indent":[]}}],"position":{"start":{"line":327,"column":171,"offset":12098},"end":{"line":327,"column":186,"offset":12113},"indent":[]}}],"position":{"start":{"line":327,"column":170,"offset":12097},"end":{"line":327,"column":187,"offset":12114},"indent":[]}},{"type":"text","value":", for example). The load balancer defines which origin server pools to use, the order in which they should be used, and how to geographically distribute traffic among them.","position":{"start":{"line":327,"column":187,"offset":12114},"end":{"line":327,"column":359,"offset":12286},"indent":[]}}],"position":{"start":{"line":327,"column":1,"offset":11928},"end":{"line":327,"column":359,"offset":12286},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Important load balancer properties","position":{"start":{"line":329,"column":5,"offset":12292},"end":{"line":329,"column":39,"offset":12326},"indent":[]}}],"position":{"start":{"line":329,"column":1,"offset":12288},"end":{"line":329,"column":39,"offset":12326},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The following load balancer properties are important for this step. (See ","position":{"start":{"line":331,"column":1,"offset":12328},"end":{"line":331,"column":74,"offset":12401},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"/understand-basics/load-balancers","children":[{"type":"text","value":"Load Balancers","position":{"start":{"line":331,"column":76,"offset":12403},"end":{"line":331,"column":90,"offset":12417},"indent":[]}}],"position":{"start":{"line":331,"column":75,"offset":12402},"end":{"line":331,"column":126,"offset":12453},"indent":[]}}],"position":{"start":{"line":331,"column":74,"offset":12401},"end":{"line":331,"column":127,"offset":12454},"indent":[]}},{"type":"text","value":" for a complete list of properties.)","position":{"start":{"line":331,"column":127,"offset":12454},"end":{"line":331,"column":163,"offset":12490},"indent":[]}}],"position":{"start":{"line":331,"column":1,"offset":12328},"end":{"line":331,"column":163,"offset":12490},"indent":[]}},{"type":"jsx","value":"<TableWrap>","position":{"start":{"line":333,"column":1,"offset":12492},"end":{"line":333,"column":12,"offset":12503},"indent":[]}},{"type":"table","align":[null,null,null],"children":[{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Property","position":{"start":{"line":335,"column":3,"offset":12507},"end":{"line":335,"column":11,"offset":12515},"indent":[]}}],"position":{"start":{"line":335,"column":3,"offset":12507},"end":{"line":335,"column":11,"offset":12515},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Description","position":{"start":{"line":335,"column":14,"offset":12518},"end":{"line":335,"column":25,"offset":12529},"indent":[]}}],"position":{"start":{"line":335,"column":14,"offset":12518},"end":{"line":335,"column":25,"offset":12529},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Constraints","position":{"start":{"line":335,"column":28,"offset":12532},"end":{"line":335,"column":39,"offset":12543},"indent":[]}}],"position":{"start":{"line":335,"column":28,"offset":12532},"end":{"line":335,"column":39,"offset":12543},"indent":[]}}],"position":{"start":{"line":335,"column":1,"offset":12505},"end":{"line":335,"column":41,"offset":12545},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"jsx","value":"<strong>","position":{"start":{"line":337,"column":3,"offset":12589},"end":{"line":337,"column":11,"offset":12597},"indent":[]}},{"type":"inlineCode","value":"name","position":{"start":{"line":337,"column":11,"offset":12597},"end":{"line":337,"column":17,"offset":12603},"indent":[]}},{"type":"jsx","value":"</strong>","position":{"start":{"line":337,"column":17,"offset":12603},"end":{"line":337,"column":26,"offset":12612},"indent":[]}},{"type":"jsx","value":"<br/>","position":{"start":{"line":337,"column":26,"offset":12612},"end":{"line":337,"column":31,"offset":12617},"indent":[]}},{"type":"jsx","value":"<Type>","position":{"start":{"line":337,"column":31,"offset":12617},"end":{"line":337,"column":37,"offset":12623},"indent":[]}},{"type":"text","value":"string","position":{"start":{"line":337,"column":37,"offset":12623},"end":{"line":337,"column":43,"offset":12629},"indent":[]}},{"type":"jsx","value":"</Type>","position":{"start":{"line":337,"column":43,"offset":12629},"end":{"line":337,"column":50,"offset":12636},"indent":[]}}],"position":{"start":{"line":337,"column":3,"offset":12589},"end":{"line":337,"column":50,"offset":12636},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"The public DNS hostname of your Cloudflare load balancer.","position":{"start":{"line":337,"column":53,"offset":12639},"end":{"line":337,"column":110,"offset":12696},"indent":[]}},{"type":"jsx","value":"<br/>","position":{"start":{"line":337,"column":110,"offset":12696},"end":{"line":337,"column":115,"offset":12701},"indent":[]}},{"type":"jsx","value":"<br/>","position":{"start":{"line":337,"column":115,"offset":12701},"end":{"line":337,"column":120,"offset":12706},"indent":[]}},{"type":"text","value":"If you have an existing DNS record with the same name as your load balancer, the load balancer will have precedence. The pre-existing DNS record is not used unless you delete the Cloudflare Load Balancer.","position":{"start":{"line":337,"column":120,"offset":12706},"end":{"line":337,"column":324,"offset":12910},"indent":[]}},{"type":"jsx","value":"<br/>","position":{"start":{"line":337,"column":324,"offset":12910},"end":{"line":337,"column":329,"offset":12915},"indent":[]}},{"type":"jsx","value":"<br/>","position":{"start":{"line":337,"column":329,"offset":12915},"end":{"line":337,"column":334,"offset":12920},"indent":[]}},{"type":"inlineCode","value":"\"www.example.com\"","position":{"start":{"line":337,"column":334,"offset":12920},"end":{"line":337,"column":353,"offset":12939},"indent":[]}}],"position":{"start":{"line":337,"column":53,"offset":12639},"end":{"line":337,"column":353,"offset":12939},"indent":[]}},{"type":"tableCell","children":[],"position":{"start":{"line":337,"column":356,"offset":12942},"end":{"line":337,"column":356,"offset":12942},"indent":[]}}],"position":{"start":{"line":337,"column":1,"offset":12587},"end":{"line":337,"column":357,"offset":12943},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"jsx","value":"<strong>","position":{"start":{"line":338,"column":3,"offset":12946},"end":{"line":338,"column":11,"offset":12954},"indent":[]}},{"type":"inlineCode","value":"default_pools","position":{"start":{"line":338,"column":11,"offset":12954},"end":{"line":338,"column":26,"offset":12969},"indent":[]}},{"type":"jsx","value":"</strong>","position":{"start":{"line":338,"column":26,"offset":12969},"end":{"line":338,"column":35,"offset":12978},"indent":[]}},{"type":"jsx","value":"<br/>","position":{"start":{"line":338,"column":35,"offset":12978},"end":{"line":338,"column":40,"offset":12983},"indent":[]}},{"type":"jsx","value":"<Type>","position":{"start":{"line":338,"column":40,"offset":12983},"end":{"line":338,"column":46,"offset":12989},"indent":[]}},{"type":"text","value":"array","position":{"start":{"line":338,"column":46,"offset":12989},"end":{"line":338,"column":51,"offset":12994},"indent":[]}},{"type":"jsx","value":"</Type>","position":{"start":{"line":338,"column":51,"offset":12994},"end":{"line":338,"column":58,"offset":13001},"indent":[]}}],"position":{"start":{"line":338,"column":3,"offset":12946},"end":{"line":338,"column":58,"offset":13001},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"A list of pool IDs ordered by failover priority. Cloudflare steers traffic to the first pool in the list, failing over to the next healthy pool, and so on down the list.","position":{"start":{"line":338,"column":61,"offset":13004},"end":{"line":338,"column":230,"offset":13173},"indent":[]}},{"type":"jsx","value":"<br/>","position":{"start":{"line":338,"column":230,"offset":13173},"end":{"line":338,"column":235,"offset":13178},"indent":[]}},{"type":"jsx","value":"<br/>","position":{"start":{"line":338,"column":235,"offset":13178},"end":{"line":338,"column":240,"offset":13183},"indent":[]}},{"type":"text","value":"Pools defined here are used by default, or when region_pools are not configured for a given region.","position":{"start":{"line":338,"column":240,"offset":13183},"end":{"line":338,"column":339,"offset":13282},"indent":[]}},{"type":"jsx","value":"<br/>","position":{"start":{"line":338,"column":339,"offset":13282},"end":{"line":338,"column":344,"offset":13287},"indent":[]}},{"type":"jsx","value":"<br/>","position":{"start":{"line":338,"column":344,"offset":13287},"end":{"line":338,"column":349,"offset":13292},"indent":[]}},{"type":"inlineCode","value":"[\"17b5962d775c646f3f9725cbc7a53df4\",  \"9290f38c5d07c2e2f4df57b1f61d4196\", \"00920f38ce07c2e2f4df50b1f61d4194\"]","position":{"start":{"line":338,"column":349,"offset":13292},"end":{"line":338,"column":460,"offset":13403},"indent":[]}}],"position":{"start":{"line":338,"column":61,"offset":13004},"end":{"line":338,"column":460,"offset":13403},"indent":[]}},{"type":"tableCell","children":[],"position":{"start":{"line":338,"column":463,"offset":13406},"end":{"line":338,"column":463,"offset":13406},"indent":[]}}],"position":{"start":{"line":338,"column":1,"offset":12944},"end":{"line":338,"column":464,"offset":13407},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"jsx","value":"<strong>","position":{"start":{"line":339,"column":3,"offset":13410},"end":{"line":339,"column":11,"offset":13418},"indent":[]}},{"type":"inlineCode","value":"fallback_pool","position":{"start":{"line":339,"column":11,"offset":13418},"end":{"line":339,"column":26,"offset":13433},"indent":[]}},{"type":"jsx","value":"</strong>","position":{"start":{"line":339,"column":26,"offset":13433},"end":{"line":339,"column":35,"offset":13442},"indent":[]}},{"type":"jsx","value":"<br/>","position":{"start":{"line":339,"column":35,"offset":13442},"end":{"line":339,"column":40,"offset":13447},"indent":[]}},{"type":"jsx","value":"<Type>","position":{"start":{"line":339,"column":40,"offset":13447},"end":{"line":339,"column":46,"offset":13453},"indent":[]}},{"type":"text","value":"string","position":{"start":{"line":339,"column":46,"offset":13453},"end":{"line":339,"column":52,"offset":13459},"indent":[]}},{"type":"jsx","value":"</Type>","position":{"start":{"line":339,"column":52,"offset":13459},"end":{"line":339,"column":59,"offset":13466},"indent":[]}}],"position":{"start":{"line":339,"column":3,"offset":13410},"end":{"line":339,"column":59,"offset":13466},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"The pool ID for the “pool of last resort,” the pool the load balancer should direct traffic to if all other pools are unhealthy. In most configurations, this is the secondary/passive pool.","position":{"start":{"line":339,"column":62,"offset":13469},"end":{"line":339,"column":250,"offset":13657},"indent":[]}},{"type":"jsx","value":"<br/>","position":{"start":{"line":339,"column":250,"offset":13657},"end":{"line":339,"column":255,"offset":13662},"indent":[]}},{"type":"jsx","value":"<br/>","position":{"start":{"line":339,"column":255,"offset":13662},"end":{"line":339,"column":260,"offset":13667},"indent":[]}},{"type":"inlineCode","value":"\"17b5962d775c646f3f9725cbc7a53df4\"","position":{"start":{"line":339,"column":260,"offset":13667},"end":{"line":339,"column":296,"offset":13703},"indent":[]}}],"position":{"start":{"line":339,"column":62,"offset":13469},"end":{"line":339,"column":296,"offset":13703},"indent":[]}},{"type":"tableCell","children":[{"type":"jsx","value":"<span style=\"white-space: nowrap\">","position":{"start":{"line":339,"column":299,"offset":13706},"end":{"line":339,"column":333,"offset":13740},"indent":[]}},{"type":"jsx","value":"<PropMeta>","position":{"start":{"line":339,"column":333,"offset":13740},"end":{"line":339,"column":343,"offset":13750},"indent":[]}},{"type":"text","value":"max-length: 32","position":{"start":{"line":339,"column":343,"offset":13750},"end":{"line":339,"column":357,"offset":13764},"indent":[]}},{"type":"jsx","value":"</PropMeta>","position":{"start":{"line":339,"column":357,"offset":13764},"end":{"line":339,"column":368,"offset":13775},"indent":[]}},{"type":"jsx","value":"</span>","position":{"start":{"line":339,"column":368,"offset":13775},"end":{"line":339,"column":375,"offset":13782},"indent":[]}},{"type":"jsx","value":"<br/>","position":{"start":{"line":339,"column":375,"offset":13782},"end":{"line":339,"column":380,"offset":13787},"indent":[]}},{"type":"jsx","value":"<PropMeta>","position":{"start":{"line":339,"column":380,"offset":13787},"end":{"line":339,"column":390,"offset":13797},"indent":[]}},{"type":"text","value":"read-only","position":{"start":{"line":339,"column":390,"offset":13797},"end":{"line":339,"column":399,"offset":13806},"indent":[]}},{"type":"jsx","value":"</PropMeta>","position":{"start":{"line":339,"column":399,"offset":13806},"end":{"line":339,"column":410,"offset":13817},"indent":[]}}],"position":{"start":{"line":339,"column":299,"offset":13706},"end":{"line":339,"column":410,"offset":13817},"indent":[]}}],"position":{"start":{"line":339,"column":1,"offset":13408},"end":{"line":339,"column":412,"offset":13819},"indent":[]}}],"position":{"start":{"line":335,"column":1,"offset":12505},"end":{"line":339,"column":412,"offset":13819},"indent":[1,1,1,1]}},{"type":"jsx","value":"</TableWrap>","position":{"start":{"line":341,"column":1,"offset":13821},"end":{"line":341,"column":13,"offset":13833},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Cloudflare Zone IDs","position":{"start":{"line":343,"column":5,"offset":13839},"end":{"line":343,"column":24,"offset":13858},"indent":[]}}],"position":{"start":{"line":343,"column":1,"offset":13835},"end":{"line":343,"column":24,"offset":13858},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Notice that the Create Load Balancer command requires a ","position":{"start":{"line":345,"column":1,"offset":13860},"end":{"line":345,"column":57,"offset":13916},"indent":[]}},{"type":"inlineCode","value":"zone_id","position":{"start":{"line":345,"column":57,"offset":13916},"end":{"line":345,"column":66,"offset":13925},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":345,"column":66,"offset":13925},"end":{"line":345,"column":67,"offset":13926},"indent":[]}}],"position":{"start":{"line":345,"column":1,"offset":13860},"end":{"line":345,"column":67,"offset":13926},"indent":[]}},{"type":"code","lang":"txt","meta":null,"value":"POST /zones/:zone_id/load_balancers","position":{"start":{"line":347,"column":1,"offset":13928},"end":{"line":349,"column":4,"offset":13974},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This represents the Cloudflare ID of the DNS zone associated with your load balancer.","position":{"start":{"line":351,"column":1,"offset":13976},"end":{"line":351,"column":86,"offset":14061},"indent":[]}}],"position":{"start":{"line":351,"column":1,"offset":13976},"end":{"line":351,"column":86,"offset":14061},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A DNS zone is a portion of the DNS namespace that is managed by a specific organization or administrator. The domain name space is a hierarchical tree, with the DNS root domain at the top. A DNS zone starts at a domain within the tree and can also extend down into subdomains so that multiple subdomains can be managed by one entity.","position":{"start":{"line":353,"column":1,"offset":14063},"end":{"line":353,"column":334,"offset":14396},"indent":[]}}],"position":{"start":{"line":353,"column":1,"offset":14063},"end":{"line":353,"column":334,"offset":14396},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can get the Cloudflare Zone ID for your hostname by using the List Zones command:","position":{"start":{"line":355,"column":1,"offset":14398},"end":{"line":355,"column":86,"offset":14483},"indent":[]}}],"position":{"start":{"line":355,"column":1,"offset":14398},"end":{"line":355,"column":86,"offset":14483},"indent":[]}},{"type":"code","lang":"txt","meta":null,"value":"GET /zones","position":{"start":{"line":357,"column":1,"offset":14485},"end":{"line":359,"column":4,"offset":14506},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This command returns a list of zones, each with an associated hostname and Cloudflare Zone ID. You can filter the list by setting values for properties, as in the following ","position":{"start":{"line":361,"column":1,"offset":14508},"end":{"line":361,"column":174,"offset":14681},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"curl","position":{"start":{"line":361,"column":175,"offset":14682},"end":{"line":361,"column":179,"offset":14686},"indent":[]}}],"position":{"start":{"line":361,"column":174,"offset":14681},"end":{"line":361,"column":180,"offset":14687},"indent":[]}},{"type":"text","value":" example, which queries for the zone associated with the hostname ","position":{"start":{"line":361,"column":180,"offset":14687},"end":{"line":361,"column":246,"offset":14753},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"example.com","position":{"start":{"line":361,"column":247,"offset":14754},"end":{"line":361,"column":258,"offset":14765},"indent":[]}}],"position":{"start":{"line":361,"column":246,"offset":14753},"end":{"line":361,"column":259,"offset":14766},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":361,"column":259,"offset":14766},"end":{"line":361,"column":260,"offset":14767},"indent":[]}}],"position":{"start":{"line":361,"column":1,"offset":14508},"end":{"line":361,"column":260,"offset":14767},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Request example (curl)","position":{"start":{"line":363,"column":3,"offset":14771},"end":{"line":363,"column":25,"offset":14793},"indent":[]}}],"position":{"start":{"line":363,"column":1,"offset":14769},"end":{"line":363,"column":27,"offset":14795},"indent":[]}}],"position":{"start":{"line":363,"column":1,"offset":14769},"end":{"line":363,"column":27,"offset":14795},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"curl -X GET \"https://api.cloudflare.com/client/v4/zones?name=example.com&status=active&account.id=01a7362d577a6c3019a474fd6f485823&account.name=Demo Account&page=1&per_page=20&order=status&direction=desc&match=all\" \\\n     -H \"X-Auth-Email: user@example.com\" \\\n     -H \"X-Auth-Key: c2547eb745079dac9320b638f5e225cf483cc5cfdda41\" \\\n     -H \"Content-Type: application/json\"\n","position":{"start":{"line":365,"column":1,"offset":14797},"end":{"line":371,"column":4,"offset":15180},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Response","position":{"start":{"line":373,"column":3,"offset":15184},"end":{"line":373,"column":11,"offset":15192},"indent":[]}}],"position":{"start":{"line":373,"column":1,"offset":15182},"end":{"line":373,"column":13,"offset":15194},"indent":[]}}],"position":{"start":{"line":373,"column":1,"offset":15182},"end":{"line":373,"column":13,"offset":15194},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Notice that the response includes data not only for example.com but also for each of its subdomains:","position":{"start":{"line":375,"column":1,"offset":15196},"end":{"line":375,"column":101,"offset":15296},"indent":[]}}],"position":{"start":{"line":375,"column":1,"offset":15196},"end":{"line":375,"column":101,"offset":15296},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": [\n    {\n      \"id\": \"023e105f4ecef8ad9ca31a8372d0c353\",\n      \"name\": \"example.com\",\n      \"development_mode\": 7200,\n      \"original_name_servers\": [\n        \"ns1.originaldnshost.com\",\n        \"ns2.originaldnshost.com\"\n      ],\n      \"original_registrar\": \"GoDaddy\",\n      \"original_dnshost\": \"NameCheap\",\n      \"created_on\": \"2014-01-01T05:20:00.12345Z\",\n      \"modified_on\": \"2014-01-01T05:20:00.12345Z\",\n      \"activated_on\": \"2014-01-02T00:01:00.12345Z\",\n      \"owner\": {\n        \"id\": {},\n        \"email\": {},\n        \"type\": \"user\"\n      },\n      \"account\": {\n        \"id\": \"01a7362d577a6c3019a474fd6f485823\",\n        \"name\": \"Demo Account\"\n      },\n      \"permissions\": [\n        \"#zone:read\",\n        \"#zone:edit\"\n      ],\n      \"plan\": {\n        \"id\": \"e592fd9519420ba7405e1307bff33214\",\n        \"name\": \"Pro Plan\",\n        \"price\": 20,\n        \"currency\": \"USD\",\n        \"frequency\": \"monthly\",\n        \"legacy_id\": \"pro\",\n        \"is_subscribed\": true,\n        \"can_subscribe\": true\n      },\n      \"plan_pending\": {\n        \"id\": \"e592fd9519420ba7405e1307bff33214\",\n        \"name\": \"Pro Plan\",\n        \"price\": 20,\n        \"currency\": \"USD\",\n        \"frequency\": \"monthly\",\n        \"legacy_id\": \"pro\",\n        \"is_subscribed\": true,\n        \"can_subscribe\": true\n      },\n      \"status\": \"active\",\n      \"paused\": false,\n      \"type\": \"full\",\n      \"name_servers\": [\n        \"tony.ns.cloudflare.com\",\n        \"woz.ns.cloudflare.com\"\n      ]\n    }\n  ]\n}","position":{"start":{"line":377,"column":1,"offset":15298},"end":{"line":439,"column":4,"offset":16840},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Use the List Zones command to retrieve the zone for the DNS hostname you want to use to create a load balancer. Review the response and record the zone’s ID","position":{"start":{"line":441,"column":1,"offset":16842},"end":{"line":441,"column":157,"offset":16998},"indent":[]}},{"type":"inlineCode","value":".","position":{"start":{"line":441,"column":157,"offset":16998},"end":{"line":441,"column":160,"offset":17001},"indent":[]}}],"position":{"start":{"line":441,"column":1,"offset":16842},"end":{"line":441,"column":160,"offset":17001},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Create your load balancer","position":{"start":{"line":443,"column":5,"offset":17007},"end":{"line":443,"column":30,"offset":17032},"indent":[]}}],"position":{"start":{"line":443,"column":1,"offset":17003},"end":{"line":443,"column":30,"offset":17032},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Use the Create Load Balancer command to create your new load balancer, as in the example below. Remember to set ","position":{"start":{"line":445,"column":1,"offset":17034},"end":{"line":445,"column":113,"offset":17146},"indent":[]}},{"type":"inlineCode","value":"zone_id","position":{"start":{"line":445,"column":113,"offset":17146},"end":{"line":445,"column":122,"offset":17155},"indent":[]}},{"type":"text","value":" to the value you found in the previous section.","position":{"start":{"line":445,"column":122,"offset":17155},"end":{"line":445,"column":170,"offset":17203},"indent":[]}}],"position":{"start":{"line":445,"column":1,"offset":17034},"end":{"line":445,"column":170,"offset":17203},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Request example","position":{"start":{"line":447,"column":3,"offset":17207},"end":{"line":447,"column":18,"offset":17222},"indent":[]}}],"position":{"start":{"line":447,"column":1,"offset":17205},"end":{"line":447,"column":20,"offset":17224},"indent":[]}}],"position":{"start":{"line":447,"column":1,"offset":17205},"end":{"line":447,"column":20,"offset":17224},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"// POST /zones/:zone_id/load_balancers\n{\n  \"description\": \"Load Balancer for www.example.com\",\n  \"name\": \"www.example.com\",\n  \"ttl\": 30,\n  \"proxied\": true,\n  \"fallback_pool\": \"ff02c959d17f7bb2b1184a202e3c0af7\",\n  \"default_pools\": [\"17b5962d775c646f3f9725cbc7a53df4\", \"ff02c959d17f7bb2b1184a202e3c0af7\"]\n  \"region_pools\": {}\n}","position":{"start":{"line":449,"column":1,"offset":17226},"end":{"line":460,"column":4,"offset":17561},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Response","position":{"start":{"line":462,"column":3,"offset":17565},"end":{"line":462,"column":11,"offset":17573},"indent":[]}}],"position":{"start":{"line":462,"column":1,"offset":17563},"end":{"line":462,"column":13,"offset":17575},"indent":[]}}],"position":{"start":{"line":462,"column":1,"offset":17563},"end":{"line":462,"column":13,"offset":17575},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": \"699d98642c564d2e855e9661899b7252\",\n    \"created_on\": \"2014-01-01T05:20:00.12345Z\",\n    \"modified_on\": \"2014-01-01T05:20:00.12345Z\",\n    \"description\": \"Load Balancer for www.example.com\",\n    \"name\": \"www.example.com\",\n    \"enabled\": true,\n    \"ttl\": 30,\n    \"fallback_pool\": \"17b5962d775c646f3f9725cbc7a53df4\",\n    \"default_pools\": [\n      \"17b5962d775c646f3f9725cbc7a53df4\",\n      \"9290f38c5d07c2e2f4df57b1f61d4196\",\n      \"00920f38ce07c2e2f4df50b1f61d4194\"\n    ],\n    \"region_pools\": {}\n  }\n}","position":{"start":{"line":464,"column":1,"offset":17577},"end":{"line":486,"column":4,"offset":18164},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"<Aside type=\"note\">","position":{"start":{"line":488,"column":1,"offset":18166},"end":{"line":488,"column":20,"offset":18185},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Deleting a Load Balancer does not delete associated pools and monitors.  Delete pools and monitors via the respective ","position":{"start":{"line":490,"column":1,"offset":18187},"end":{"line":490,"column":119,"offset":18305},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Manage Pools","position":{"start":{"line":490,"column":121,"offset":18307},"end":{"line":490,"column":133,"offset":18319},"indent":[]}}],"position":{"start":{"line":490,"column":119,"offset":18305},"end":{"line":490,"column":135,"offset":18321},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":490,"column":135,"offset":18321},"end":{"line":490,"column":140,"offset":18326},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Manage Monitors","position":{"start":{"line":490,"column":142,"offset":18328},"end":{"line":490,"column":157,"offset":18343},"indent":[]}}],"position":{"start":{"line":490,"column":140,"offset":18326},"end":{"line":490,"column":159,"offset":18345},"indent":[]}},{"type":"text","value":" buttons within the ","position":{"start":{"line":490,"column":159,"offset":18345},"end":{"line":490,"column":179,"offset":18365},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Load Balancing","position":{"start":{"line":490,"column":181,"offset":18367},"end":{"line":490,"column":195,"offset":18381},"indent":[]}}],"position":{"start":{"line":490,"column":179,"offset":18365},"end":{"line":490,"column":197,"offset":18383},"indent":[]}},{"type":"text","value":" tab under the ","position":{"start":{"line":490,"column":197,"offset":18383},"end":{"line":490,"column":212,"offset":18398},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Traffic","position":{"start":{"line":490,"column":214,"offset":18400},"end":{"line":490,"column":221,"offset":18407},"indent":[]}}],"position":{"start":{"line":490,"column":212,"offset":18398},"end":{"line":490,"column":223,"offset":18409},"indent":[]}},{"type":"text","value":" app of the Cloudflare dashboard.","position":{"start":{"line":490,"column":223,"offset":18409},"end":{"line":490,"column":256,"offset":18442},"indent":[]}}],"position":{"start":{"line":490,"column":1,"offset":18187},"end":{"line":490,"column":256,"offset":18442},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":492,"column":1,"offset":18444},"end":{"line":492,"column":9,"offset":18452},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":494,"column":1,"offset":18454},"end":{"line":494,"column":4,"offset":18457},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Step 5: Configuring Geo Steering (optional)","position":{"start":{"line":496,"column":4,"offset":18462},"end":{"line":496,"column":47,"offset":18505},"indent":[]}}],"position":{"start":{"line":496,"column":1,"offset":18459},"end":{"line":496,"column":47,"offset":18505},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you have servers in different geographic regions, you may want to steer traffic to pools based on the region from which visitors are connecting. For example, your European visitors should land on your European pool first, and then on your US pool if the European pool is down. Your North American users would have the reverse configuration.","position":{"start":{"line":498,"column":1,"offset":18507},"end":{"line":498,"column":344,"offset":18850},"indent":[]}}],"position":{"start":{"line":498,"column":1,"offset":18507},"end":{"line":498,"column":344,"offset":18850},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare Geo Steering directs traffic to pools based on the client’s region or PoP (Enterprise accounts only). You can configure Geo Steering to implement this use case as follows:","position":{"start":{"line":500,"column":1,"offset":18852},"end":{"line":500,"column":183,"offset":19034},"indent":[]}}],"position":{"start":{"line":500,"column":1,"offset":18852},"end":{"line":500,"column":183,"offset":19034},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Direct EU users to the pool in Europe first, followed by the US pool.","position":{"start":{"line":502,"column":3,"offset":19038},"end":{"line":502,"column":72,"offset":19107},"indent":[]}}],"position":{"start":{"line":502,"column":3,"offset":19038},"end":{"line":502,"column":72,"offset":19107},"indent":[]}}],"position":{"start":{"line":502,"column":1,"offset":19036},"end":{"line":502,"column":72,"offset":19107},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Direct North American clients to the US pool first and the EU pool second.","position":{"start":{"line":503,"column":3,"offset":19110},"end":{"line":503,"column":77,"offset":19184},"indent":[]}}],"position":{"start":{"line":503,"column":3,"offset":19110},"end":{"line":503,"column":77,"offset":19184},"indent":[]}}],"position":{"start":{"line":503,"column":1,"offset":19108},"end":{"line":503,"column":77,"offset":19184},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"All other regions will use the default pools.","position":{"start":{"line":504,"column":3,"offset":19187},"end":{"line":504,"column":48,"offset":19232},"indent":[]}}],"position":{"start":{"line":504,"column":3,"offset":19187},"end":{"line":504,"column":48,"offset":19232},"indent":[]}}],"position":{"start":{"line":504,"column":1,"offset":19185},"end":{"line":504,"column":48,"offset":19232},"indent":[]}}],"position":{"start":{"line":502,"column":1,"offset":19036},"end":{"line":504,"column":48,"offset":19232},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Use the regions_pool property of the Update Load Balancers command—","position":{"start":{"line":506,"column":1,"offset":19234},"end":{"line":506,"column":68,"offset":19301},"indent":[]}},{"type":"inlineCode","value":"PUT /zones/:zone_id/load_balancers","position":{"start":{"line":506,"column":68,"offset":19301},"end":{"line":506,"column":104,"offset":19337},"indent":[]}},{"type":"text","value":"— to specify an array of regions. Specify each region using the appropriate region code followed by a list of origin servers to use for that region. In the example below, ","position":{"start":{"line":506,"column":104,"offset":19337},"end":{"line":506,"column":275,"offset":19508},"indent":[]}},{"type":"inlineCode","value":"WNAM","position":{"start":{"line":506,"column":275,"offset":19508},"end":{"line":506,"column":281,"offset":19514},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":506,"column":281,"offset":19514},"end":{"line":506,"column":286,"offset":19519},"indent":[]}},{"type":"inlineCode","value":"ENAM","position":{"start":{"line":506,"column":286,"offset":19519},"end":{"line":506,"column":292,"offset":19525},"indent":[]}},{"type":"text","value":" represent the West and East Coasts of North America, respectively.","position":{"start":{"line":506,"column":292,"offset":19525},"end":{"line":506,"column":359,"offset":19592},"indent":[]}}],"position":{"start":{"line":506,"column":1,"offset":19234},"end":{"line":506,"column":359,"offset":19592},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Request example","position":{"start":{"line":508,"column":3,"offset":19596},"end":{"line":508,"column":18,"offset":19611},"indent":[]}}],"position":{"start":{"line":508,"column":1,"offset":19594},"end":{"line":508,"column":20,"offset":19613},"indent":[]}}],"position":{"start":{"line":508,"column":1,"offset":19594},"end":{"line":508,"column":20,"offset":19613},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"// PUT /zones/:zone_id/load_balancers\n{\n  \"description\": \"Load Balancer for www.example.com\",\n  \"name\": \"www.example.com\",\n  \"ttl\": 30,\n  \"proxied\": true,\n  \"fallback_pool\": \"ff02c959d17f7bb2b1184a202e3c0af7\",\n  \"default_pools\": [\"17b5962d775c646f3f9725cbc7a53df4\", \"ff02c959d17f7bb2b1184a202e3c0af7\"]\n  \"region_pools\": {\n  \"WNAM\": [\"17b5962d775c646f3f9725cbc7a53df4\", \"ff02c959d17f7bb2b1184a202e3c0af7\"],\n  \"ENAM\": [\"17b5962d775c646f3f9725cbc7a53df4\", \"ff02c959d17f7bb2b1184a202e3c0af7\"],\n  \"EU\": [\"ff02c959d17f7bb2b1184a202e3c0af7\", \"17b5962d775c646f3f9725cbc7a53df4\"]}\n}","position":{"start":{"line":510,"column":1,"offset":19615},"end":{"line":524,"column":4,"offset":20198},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If you only define ","position":{"start":{"line":526,"column":1,"offset":20200},"end":{"line":526,"column":20,"offset":20219},"indent":[]}},{"type":"inlineCode","value":"WNAM","position":{"start":{"line":526,"column":20,"offset":20219},"end":{"line":526,"column":26,"offset":20225},"indent":[]}},{"type":"text","value":", then traffic from the East Coast will be routed to the ","position":{"start":{"line":526,"column":26,"offset":20225},"end":{"line":526,"column":83,"offset":20282},"indent":[]}},{"type":"inlineCode","value":"default_pools","position":{"start":{"line":526,"column":83,"offset":20282},"end":{"line":526,"column":98,"offset":20297},"indent":[]}},{"type":"text","value":". You can test this using a client in each of those locations.","position":{"start":{"line":526,"column":98,"offset":20297},"end":{"line":526,"column":160,"offset":20359},"indent":[]}}],"position":{"start":{"line":526,"column":1,"offset":20200},"end":{"line":526,"column":160,"offset":20359},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Create via API\",\"order\":30}","position":{"start":{"line":529,"column":1,"offset":20362},"end":{"line":529,"column":66,"offset":20427},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":529,"column":66,"offset":20427}}}}},{"node":{"fields":{"slug":"/create-load-balancer-ui"},"frontmatter":{"order":20,"title":"Create via Cloudflare dashboard","summary":null,"demo":null,"tags":null},"headings":[{"value":"Create a load balancer in the Cloudflare dashboard"}],"parent":{"__typename":"File","modifiedTime":"2021-02-18"},"mdxAST":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Create a load balancer in the Cloudflare dashboard","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":53,"offset":53},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":53,"offset":53},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":4,"column":4,"offset":58},"end":{"line":4,"column":12,"offset":66},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":55},"end":{"line":4,"column":12,"offset":66},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This walkthrough uses the Load Balancing interface in the ","position":{"start":{"line":6,"column":1,"offset":68},"end":{"line":6,"column":59,"offset":126},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Traffic","position":{"start":{"line":6,"column":61,"offset":128},"end":{"line":6,"column":68,"offset":135},"indent":[]}}],"position":{"start":{"line":6,"column":59,"offset":126},"end":{"line":6,"column":70,"offset":137},"indent":[]}},{"type":"text","value":" app of the Cloudflare dashboard to create a load balancer in ","position":{"start":{"line":6,"column":70,"offset":137},"end":{"line":6,"column":132,"offset":199},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"active-passive failover","position":{"start":{"line":6,"column":134,"offset":201},"end":{"line":6,"column":157,"offset":224},"indent":[]}}],"position":{"start":{"line":6,"column":132,"offset":199},"end":{"line":6,"column":159,"offset":226},"indent":[]}},{"type":"text","value":" configuration.","position":{"start":{"line":6,"column":159,"offset":226},"end":{"line":6,"column":174,"offset":241},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":68},"end":{"line":6,"column":174,"offset":241},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"An active-passive failover configuration sends traffic to the servers in your active pool until a failure threshold (configurable) is reached. At the point of failure, Cloudflare then redirects traffic to the passive pool.","position":{"start":{"line":8,"column":1,"offset":243},"end":{"line":8,"column":223,"offset":465},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":243},"end":{"line":8,"column":223,"offset":465},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In the event that all pools are marked down, Cloudflare uses the ","position":{"start":{"line":10,"column":1,"offset":467},"end":{"line":10,"column":66,"offset":532},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"fallback pool","position":{"start":{"line":10,"column":68,"offset":534},"end":{"line":10,"column":81,"offset":547},"indent":[]}}],"position":{"start":{"line":10,"column":66,"offset":532},"end":{"line":10,"column":83,"offset":549},"indent":[]}},{"type":"text","value":", which is the option of last resort for successfully sending traffic to an origin. Since the fallback pool is a last resort, its health is not taken into account, and Cloudflare reports  its status as 'No Health'. You can nominate the fallback pool via the API or in the Cloudflare dashboard. For more on working with fallback pools, see ","position":{"start":{"line":10,"column":83,"offset":549},"end":{"line":10,"column":422,"offset":888},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/traffic-steering","children":[{"type":"emphasis","children":[{"type":"text","value":"Traffic steering","position":{"start":{"line":10,"column":424,"offset":890},"end":{"line":10,"column":440,"offset":906},"indent":[]}}],"position":{"start":{"line":10,"column":423,"offset":889},"end":{"line":10,"column":441,"offset":907},"indent":[]}}],"position":{"start":{"line":10,"column":422,"offset":888},"end":{"line":10,"column":479,"offset":945},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":10,"column":479,"offset":945},"end":{"line":10,"column":480,"offset":946},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":467},"end":{"line":10,"column":480,"offset":946},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":12,"column":1,"offset":948},"end":{"line":12,"column":4,"offset":951},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":14,"column":4,"offset":956},"end":{"line":14,"column":17,"offset":969},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":953},"end":{"line":14,"column":17,"offset":969},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Access to Load Balancing:","position":{"start":{"line":16,"column":5,"offset":975},"end":{"line":16,"column":30,"offset":1000},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":973},"end":{"line":16,"column":32,"offset":1002},"indent":[]}},{"type":"text","value":" Load Balancing requires one of the following:","position":{"start":{"line":16,"column":32,"offset":1002},"end":{"line":16,"column":78,"offset":1048},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":973},"end":{"line":16,"column":78,"offset":1048},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A Cloudflare Enterprise plan with Load Balancing enabled.","position":{"start":{"line":17,"column":5,"offset":1053},"end":{"line":17,"column":62,"offset":1110},"indent":[]}}],"position":{"start":{"line":17,"column":5,"offset":1053},"end":{"line":17,"column":62,"offset":1110},"indent":[]}}],"position":{"start":{"line":17,"column":3,"offset":1051},"end":{"line":17,"column":62,"offset":1110},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"An existing Free, Pro, or Business plan with a Load Balancing subscription.","position":{"start":{"line":18,"column":5,"offset":1115},"end":{"line":18,"column":80,"offset":1190},"indent":[]}}],"position":{"start":{"line":18,"column":5,"offset":1115},"end":{"line":18,"column":80,"offset":1190},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":1113},"end":{"line":18,"column":80,"offset":1190},"indent":[]}}],"position":{"start":{"line":17,"column":3,"offset":1051},"end":{"line":18,"column":80,"offset":1190},"indent":[3]}}],"position":{"start":{"line":16,"column":1,"offset":971},"end":{"line":18,"column":80,"offset":1190},"indent":[1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Load balancer hostname:","position":{"start":{"line":19,"column":5,"offset":1195},"end":{"line":19,"column":28,"offset":1218},"indent":[]}}],"position":{"start":{"line":19,"column":3,"offset":1193},"end":{"line":19,"column":30,"offset":1220},"indent":[]}},{"type":"text","value":" The hostname for which the Cloudflare Load Balancer will manage traffic. The default hostname is the root hostname.","position":{"start":{"line":19,"column":30,"offset":1220},"end":{"line":19,"column":146,"offset":1336},"indent":[]}}],"position":{"start":{"line":19,"column":3,"offset":1193},"end":{"line":19,"column":146,"offset":1336},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":1191},"end":{"line":19,"column":146,"offset":1336},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Origin servers (2):","position":{"start":{"line":20,"column":5,"offset":1341},"end":{"line":20,"column":24,"offset":1360},"indent":[]}}],"position":{"start":{"line":20,"column":3,"offset":1339},"end":{"line":20,"column":26,"offset":1362},"indent":[]}},{"type":"text","value":" This walkthrough requires at least two origin servers (","position":{"start":{"line":20,"column":26,"offset":1362},"end":{"line":20,"column":82,"offset":1418},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"origin-server-1","position":{"start":{"line":20,"column":83,"offset":1419},"end":{"line":20,"column":98,"offset":1434},"indent":[]}}],"position":{"start":{"line":20,"column":82,"offset":1418},"end":{"line":20,"column":99,"offset":1435},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":20,"column":99,"offset":1435},"end":{"line":20,"column":104,"offset":1440},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"origin-server-2","position":{"start":{"line":20,"column":105,"offset":1441},"end":{"line":20,"column":120,"offset":1456},"indent":[]}}],"position":{"start":{"line":20,"column":104,"offset":1440},"end":{"line":20,"column":121,"offset":1457},"indent":[]}},{"type":"text","value":", for example).","position":{"start":{"line":20,"column":121,"offset":1457},"end":{"line":20,"column":136,"offset":1472},"indent":[]}}],"position":{"start":{"line":20,"column":3,"offset":1339},"end":{"line":20,"column":136,"offset":1472},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1337},"end":{"line":20,"column":136,"offset":1472},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Location:","position":{"start":{"line":21,"column":5,"offset":1477},"end":{"line":21,"column":14,"offset":1486},"indent":[]}}],"position":{"start":{"line":21,"column":3,"offset":1475},"end":{"line":21,"column":16,"offset":1488},"indent":[]}},{"type":"text","value":" This walkthrough configures only a single geographic region.","position":{"start":{"line":21,"column":16,"offset":1488},"end":{"line":21,"column":77,"offset":1549},"indent":[]}}],"position":{"start":{"line":21,"column":3,"offset":1475},"end":{"line":21,"column":77,"offset":1549},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":1473},"end":{"line":21,"column":77,"offset":1549},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":971},"end":{"line":21,"column":77,"offset":1549},"indent":[1,1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":23,"column":1,"offset":1551},"end":{"line":23,"column":4,"offset":1554},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Workflow","position":{"start":{"line":25,"column":4,"offset":1559},"end":{"line":25,"column":12,"offset":1567},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1556},"end":{"line":25,"column":12,"offset":1567},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When creating a load balancer in the Cloudflare dashboard, follow this workflow:","position":{"start":{"line":27,"column":1,"offset":1569},"end":{"line":27,"column":81,"offset":1649},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1569},"end":{"line":27,"column":81,"offset":1649},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#create-a-load-balancer","children":[{"type":"text","value":"Create a load balancer","position":{"start":{"line":29,"column":5,"offset":1655},"end":{"line":29,"column":27,"offset":1677},"indent":[]}}],"position":{"start":{"line":29,"column":4,"offset":1654},"end":{"line":29,"column":53,"offset":1703},"indent":[]}}],"position":{"start":{"line":29,"column":4,"offset":1654},"end":{"line":29,"column":53,"offset":1703},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1651},"end":{"line":30,"column":1,"offset":1704},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#create-and-add-origin-pools","children":[{"type":"text","value":"Create and add origin pools","position":{"start":{"line":31,"column":5,"offset":1709},"end":{"line":31,"column":32,"offset":1736},"indent":[]}}],"position":{"start":{"line":31,"column":4,"offset":1708},"end":{"line":31,"column":63,"offset":1767},"indent":[]}}],"position":{"start":{"line":31,"column":4,"offset":1708},"end":{"line":31,"column":63,"offset":1767},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":1705},"end":{"line":32,"column":1,"offset":1768},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#create-attach-and-configure-health-checks","children":[{"type":"text","value":"Create, attach, and configure health checks","position":{"start":{"line":33,"column":5,"offset":1773},"end":{"line":33,"column":48,"offset":1816},"indent":[]}}],"position":{"start":{"line":33,"column":4,"offset":1772},"end":{"line":33,"column":93,"offset":1861},"indent":[]}}],"position":{"start":{"line":33,"column":4,"offset":1772},"end":{"line":33,"column":93,"offset":1861},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":1769},"end":{"line":34,"column":1,"offset":1862},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#configure-geo-routing","children":[{"type":"text","value":"Configure Geo Routing","position":{"start":{"line":35,"column":5,"offset":1867},"end":{"line":35,"column":26,"offset":1888},"indent":[]}}],"position":{"start":{"line":35,"column":4,"offset":1866},"end":{"line":35,"column":51,"offset":1913},"indent":[]}}],"position":{"start":{"line":35,"column":4,"offset":1866},"end":{"line":35,"column":51,"offset":1913},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":1863},"end":{"line":36,"column":1,"offset":1914},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#create-custom-load-balancing-rules","children":[{"type":"text","value":"Create custom Load Balancing rules","position":{"start":{"line":37,"column":5,"offset":1919},"end":{"line":37,"column":39,"offset":1953},"indent":[]}}],"position":{"start":{"line":37,"column":4,"offset":1918},"end":{"line":37,"column":77,"offset":1991},"indent":[]}}],"position":{"start":{"line":37,"column":4,"offset":1918},"end":{"line":37,"column":77,"offset":1991},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":1915},"end":{"line":38,"column":1,"offset":1992},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#review-your-load-balancer-configuration","children":[{"type":"text","value":"Review your load balancer configuration","position":{"start":{"line":39,"column":5,"offset":1997},"end":{"line":39,"column":44,"offset":2036},"indent":[]}}],"position":{"start":{"line":39,"column":4,"offset":1996},"end":{"line":39,"column":87,"offset":2079},"indent":[]}}],"position":{"start":{"line":39,"column":4,"offset":1996},"end":{"line":39,"column":87,"offset":2079},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":1993},"end":{"line":40,"column":1,"offset":2080},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#share-your-load-balancer-with-other-sites","children":[{"type":"text","value":"Share your load balancer with other sites","position":{"start":{"line":41,"column":5,"offset":2085},"end":{"line":41,"column":46,"offset":2126},"indent":[]}}],"position":{"start":{"line":41,"column":4,"offset":2084},"end":{"line":41,"column":91,"offset":2171},"indent":[]}}],"position":{"start":{"line":41,"column":4,"offset":2084},"end":{"line":41,"column":91,"offset":2171},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":2081},"end":{"line":41,"column":91,"offset":2171},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1651},"end":{"line":41,"column":91,"offset":2171},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":43,"column":1,"offset":2173},"end":{"line":43,"column":4,"offset":2176},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Create a load balancer","position":{"start":{"line":45,"column":4,"offset":2181},"end":{"line":45,"column":26,"offset":2203},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":2178},"end":{"line":45,"column":26,"offset":2203},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To start, create a load balancer using the ","position":{"start":{"line":47,"column":1,"offset":2205},"end":{"line":47,"column":44,"offset":2248},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create a Load Balancer","position":{"start":{"line":47,"column":46,"offset":2250},"end":{"line":47,"column":68,"offset":2272},"indent":[]}}],"position":{"start":{"line":47,"column":44,"offset":2248},"end":{"line":47,"column":70,"offset":2274},"indent":[]}},{"type":"text","value":" wizard in the Cloudflare Traffic app:","position":{"start":{"line":47,"column":70,"offset":2274},"end":{"line":47,"column":108,"offset":2312},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":2205},"end":{"line":47,"column":108,"offset":2312},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Log in to your Cloudflare Account Home and click site for which you want to create a load balancer.","position":{"start":{"line":49,"column":4,"offset":2317},"end":{"line":49,"column":103,"offset":2416},"indent":[]}}],"position":{"start":{"line":49,"column":4,"offset":2317},"end":{"line":49,"column":103,"offset":2416},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":2314},"end":{"line":50,"column":1,"offset":2417},"indent":[1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Open the ","position":{"start":{"line":51,"column":4,"offset":2421},"end":{"line":51,"column":13,"offset":2430},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Traffic","position":{"start":{"line":51,"column":15,"offset":2432},"end":{"line":51,"column":22,"offset":2439},"indent":[]}}],"position":{"start":{"line":51,"column":13,"offset":2430},"end":{"line":51,"column":24,"offset":2441},"indent":[]}},{"type":"text","value":" app. If you see the ","position":{"start":{"line":51,"column":24,"offset":2441},"end":{"line":51,"column":45,"offset":2462},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Enable Load Balancing","position":{"start":{"line":51,"column":47,"offset":2464},"end":{"line":51,"column":68,"offset":2485},"indent":[]}}],"position":{"start":{"line":51,"column":45,"offset":2462},"end":{"line":51,"column":70,"offset":2487},"indent":[]}},{"type":"text","value":" action instead of ","position":{"start":{"line":51,"column":70,"offset":2487},"end":{"line":51,"column":89,"offset":2506},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create a Load Balancer","position":{"start":{"line":51,"column":91,"offset":2508},"end":{"line":51,"column":113,"offset":2530},"indent":[]}}],"position":{"start":{"line":51,"column":89,"offset":2506},"end":{"line":51,"column":115,"offset":2532},"indent":[]}},{"type":"text","value":", you need to add the Load Balancing service to your customer plan before you can proceed.","position":{"start":{"line":51,"column":115,"offset":2532},"end":{"line":51,"column":205,"offset":2622},"indent":[]}}],"position":{"start":{"line":51,"column":4,"offset":2421},"end":{"line":51,"column":205,"offset":2622},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/create-load-balancer.png","alt":null,"position":{"start":{"line":53,"column":4,"offset":2627},"end":{"line":53,"column":50,"offset":2673},"indent":[]}}],"position":{"start":{"line":53,"column":4,"offset":2627},"end":{"line":53,"column":50,"offset":2673},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":2418},"end":{"line":54,"column":1,"offset":2674},"indent":[1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":55,"column":4,"offset":2678},"end":{"line":55,"column":10,"offset":2684},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create a Load Balancer","position":{"start":{"line":55,"column":12,"offset":2686},"end":{"line":55,"column":34,"offset":2708},"indent":[]}}],"position":{"start":{"line":55,"column":10,"offset":2684},"end":{"line":55,"column":36,"offset":2710},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":55,"column":36,"offset":2710},"end":{"line":55,"column":37,"offset":2711},"indent":[]}}],"position":{"start":{"line":55,"column":4,"offset":2678},"end":{"line":55,"column":37,"offset":2711},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":2675},"end":{"line":56,"column":1,"offset":2712},"indent":[1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"In the ","position":{"start":{"line":57,"column":4,"offset":2716},"end":{"line":57,"column":11,"offset":2723},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Hostname","position":{"start":{"line":57,"column":13,"offset":2725},"end":{"line":57,"column":21,"offset":2733},"indent":[]}}],"position":{"start":{"line":57,"column":11,"offset":2723},"end":{"line":57,"column":23,"offset":2735},"indent":[]}},{"type":"text","value":" page, enter the hostname for your load balancer—the DNS name at which the load balancer is available.","position":{"start":{"line":57,"column":23,"offset":2735},"end":{"line":57,"column":125,"offset":2837},"indent":[]}}],"position":{"start":{"line":57,"column":4,"offset":2716},"end":{"line":57,"column":125,"offset":2837},"indent":[]}},{"type":"jsx","value":"<Aside type=\"note\" header=\"Note\">","position":{"start":{"line":59,"column":3,"offset":2841},"end":{"line":59,"column":36,"offset":2874},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The orange cloud icon to the right of the hostname indicates that the load balancer will run in proxy mode. In proxy mode, Cloudflare announces Cloudflare IP addresses externally, but masks origin server IP addresses for security. See ","position":{"start":{"line":61,"column":3,"offset":2878},"end":{"line":61,"column":238,"offset":3113},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"/understand-basics/proxy-modes/","children":[{"type":"text","value":"Proxy Modes","position":{"start":{"line":61,"column":240,"offset":3115},"end":{"line":61,"column":251,"offset":3126},"indent":[]}}],"position":{"start":{"line":61,"column":239,"offset":3114},"end":{"line":61,"column":285,"offset":3160},"indent":[]}}],"position":{"start":{"line":61,"column":238,"offset":3113},"end":{"line":61,"column":286,"offset":3161},"indent":[]}},{"type":"text","value":" for more detail.","position":{"start":{"line":61,"column":286,"offset":3161},"end":{"line":61,"column":303,"offset":3178},"indent":[]}}],"position":{"start":{"line":61,"column":3,"offset":2878},"end":{"line":61,"column":303,"offset":3178},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":62,"column":3,"offset":3181},"end":{"line":62,"column":11,"offset":3189},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/create-load-balancer-hostname.png","alt":"test","position":{"start":{"line":64,"column":3,"offset":3195},"end":{"line":64,"column":62,"offset":3254},"indent":[]}}],"position":{"start":{"line":64,"column":3,"offset":3195},"end":{"line":64,"column":62,"offset":3254},"indent":[]}}],"position":{"start":{"line":57,"column":1,"offset":2713},"end":{"line":65,"column":1,"offset":3255},"indent":[1,1,1,1,1,1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"To enable session affinity, select the ","position":{"start":{"line":66,"column":4,"offset":3259},"end":{"line":66,"column":43,"offset":3298},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"By Cloudflare cookie only","position":{"start":{"line":66,"column":45,"offset":3300},"end":{"line":66,"column":70,"offset":3325},"indent":[]}}],"position":{"start":{"line":66,"column":43,"offset":3298},"end":{"line":66,"column":72,"offset":3327},"indent":[]}},{"type":"text","value":" radio button and toggle the ","position":{"start":{"line":66,"column":72,"offset":3327},"end":{"line":66,"column":101,"offset":3356},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Session Affinity","position":{"start":{"line":66,"column":103,"offset":3358},"end":{"line":66,"column":119,"offset":3374},"indent":[]}}],"position":{"start":{"line":66,"column":101,"offset":3356},"end":{"line":66,"column":121,"offset":3376},"indent":[]}},{"type":"text","value":" switch.","position":{"start":{"line":66,"column":121,"offset":3376},"end":{"line":66,"column":129,"offset":3384},"indent":[]}}],"position":{"start":{"line":66,"column":4,"offset":3259},"end":{"line":66,"column":129,"offset":3384},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":3256},"end":{"line":67,"column":1,"offset":3385},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":68,"column":4,"offset":3389},"end":{"line":68,"column":10,"offset":3395},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Next","position":{"start":{"line":68,"column":12,"offset":3397},"end":{"line":68,"column":16,"offset":3401},"indent":[]}}],"position":{"start":{"line":68,"column":10,"offset":3395},"end":{"line":68,"column":18,"offset":3403},"indent":[]}},{"type":"text","value":" to continue.","position":{"start":{"line":68,"column":18,"offset":3403},"end":{"line":68,"column":31,"offset":3416},"indent":[]}}],"position":{"start":{"line":68,"column":4,"offset":3389},"end":{"line":68,"column":31,"offset":3416},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":3386},"end":{"line":68,"column":31,"offset":3416},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":2314},"end":{"line":68,"column":31,"offset":3416},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You are now ready to create and ","position":{"start":{"line":70,"column":1,"offset":3418},"end":{"line":70,"column":33,"offset":3450},"indent":[]}},{"type":"link","title":null,"url":"#create-and-add-origin-pools","children":[{"type":"text","value":"add origin pools","position":{"start":{"line":70,"column":34,"offset":3451},"end":{"line":70,"column":50,"offset":3467},"indent":[]}}],"position":{"start":{"line":70,"column":33,"offset":3450},"end":{"line":70,"column":81,"offset":3498},"indent":[]}},{"type":"text","value":" to your load balancer.","position":{"start":{"line":70,"column":81,"offset":3498},"end":{"line":70,"column":104,"offset":3521},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":3418},"end":{"line":70,"column":104,"offset":3521},"indent":[]}},{"type":"jsx","value":"<Aside type=\"note\" header=\"Note\">","position":{"start":{"line":72,"column":1,"offset":3523},"end":{"line":72,"column":34,"offset":3556},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Deleting a Load Balancer does not delete associated pools and monitors.  To delete pools and monitors in the Cloudflare dashboard, use the ","position":{"start":{"line":74,"column":1,"offset":3558},"end":{"line":74,"column":140,"offset":3697},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Manage Pools","position":{"start":{"line":74,"column":142,"offset":3699},"end":{"line":74,"column":154,"offset":3711},"indent":[]}}],"position":{"start":{"line":74,"column":140,"offset":3697},"end":{"line":74,"column":156,"offset":3713},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":74,"column":156,"offset":3713},"end":{"line":74,"column":161,"offset":3718},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Manage Monitors","position":{"start":{"line":74,"column":163,"offset":3720},"end":{"line":74,"column":178,"offset":3735},"indent":[]}}],"position":{"start":{"line":74,"column":161,"offset":3718},"end":{"line":74,"column":180,"offset":3737},"indent":[]}},{"type":"text","value":" buttons within the ","position":{"start":{"line":74,"column":180,"offset":3737},"end":{"line":74,"column":200,"offset":3757},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Traffic","position":{"start":{"line":74,"column":202,"offset":3759},"end":{"line":74,"column":209,"offset":3766},"indent":[]}}],"position":{"start":{"line":74,"column":200,"offset":3757},"end":{"line":74,"column":211,"offset":3768},"indent":[]}},{"type":"text","value":" app, in the ","position":{"start":{"line":74,"column":211,"offset":3768},"end":{"line":74,"column":224,"offset":3781},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Load Balancing","position":{"start":{"line":74,"column":226,"offset":3783},"end":{"line":74,"column":240,"offset":3797},"indent":[]}}],"position":{"start":{"line":74,"column":224,"offset":3781},"end":{"line":74,"column":242,"offset":3799},"indent":[]}},{"type":"text","value":" tab.","position":{"start":{"line":74,"column":242,"offset":3799},"end":{"line":74,"column":247,"offset":3804},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":3558},"end":{"line":74,"column":247,"offset":3804},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":76,"column":1,"offset":3806},"end":{"line":76,"column":9,"offset":3814},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":78,"column":1,"offset":3816},"end":{"line":78,"column":4,"offset":3819},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Create and add origin pools","position":{"start":{"line":80,"column":4,"offset":3824},"end":{"line":80,"column":31,"offset":3851},"indent":[]}}],"position":{"start":{"line":80,"column":1,"offset":3821},"end":{"line":80,"column":31,"offset":3851},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This example creates two origin pools—the primary pool and a secondary, backup pool that serves traffic when the primary fails. (To set up an ","position":{"start":{"line":82,"column":1,"offset":3853},"end":{"line":82,"column":143,"offset":3995},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"active-active failover","position":{"start":{"line":82,"column":145,"offset":3997},"end":{"line":82,"column":167,"offset":4019},"indent":[]}}],"position":{"start":{"line":82,"column":143,"offset":3995},"end":{"line":82,"column":169,"offset":4021},"indent":[]}},{"type":"text","value":" configuration, where all servers receive traffic at once, create only a single pool.)","position":{"start":{"line":82,"column":169,"offset":4021},"end":{"line":82,"column":255,"offset":4107},"indent":[]}}],"position":{"start":{"line":82,"column":1,"offset":3853},"end":{"line":82,"column":255,"offset":4107},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"In the ","position":{"start":{"line":84,"column":4,"offset":4112},"end":{"line":84,"column":11,"offset":4119},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Add an Origin Pool","position":{"start":{"line":84,"column":13,"offset":4121},"end":{"line":84,"column":31,"offset":4139},"indent":[]}}],"position":{"start":{"line":84,"column":11,"offset":4119},"end":{"line":84,"column":33,"offset":4141},"indent":[]}},{"type":"text","value":" page, click ","position":{"start":{"line":84,"column":33,"offset":4141},"end":{"line":84,"column":46,"offset":4154},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create an origin pool","position":{"start":{"line":84,"column":48,"offset":4156},"end":{"line":84,"column":69,"offset":4177},"indent":[]}}],"position":{"start":{"line":84,"column":46,"offset":4154},"end":{"line":84,"column":71,"offset":4179},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":84,"column":71,"offset":4179},"end":{"line":84,"column":72,"offset":4180},"indent":[]}}],"position":{"start":{"line":84,"column":4,"offset":4112},"end":{"line":84,"column":72,"offset":4180},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/create-load-balancer-add-origin.png","alt":"Add origin pool page in Create Load Balancer workflow","position":{"start":{"line":86,"column":3,"offset":4187},"end":{"line":86,"column":113,"offset":4297},"indent":[]}}],"position":{"start":{"line":86,"column":3,"offset":4187},"end":{"line":86,"column":113,"offset":4297},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":4109},"end":{"line":87,"column":1,"offset":4298},"indent":[1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Enter a name and origin server address for the first pool (this must be unique). When the origin server has a hostname, you can enter that as well. To add existing origins, click ","position":{"start":{"line":88,"column":4,"offset":4302},"end":{"line":88,"column":183,"offset":4481},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Add Origin","position":{"start":{"line":88,"column":185,"offset":4483},"end":{"line":88,"column":195,"offset":4493},"indent":[]}}],"position":{"start":{"line":88,"column":183,"offset":4481},"end":{"line":88,"column":197,"offset":4495},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":88,"column":197,"offset":4495},"end":{"line":88,"column":198,"offset":4496},"indent":[]}}],"position":{"start":{"line":88,"column":4,"offset":4302},"end":{"line":88,"column":198,"offset":4496},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/create-load-balancer-create-origin.png","alt":"Create origin pool page in Create Load Balancer workflow","position":{"start":{"line":90,"column":3,"offset":4502},"end":{"line":90,"column":119,"offset":4618},"indent":[]}}],"position":{"start":{"line":90,"column":3,"offset":4502},"end":{"line":90,"column":119,"offset":4618},"indent":[]}}],"position":{"start":{"line":88,"column":1,"offset":4299},"end":{"line":91,"column":1,"offset":4619},"indent":[1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"You must also enter a ","position":{"start":{"line":92,"column":4,"offset":4623},"end":{"line":92,"column":26,"offset":4645},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Weight","position":{"start":{"line":92,"column":28,"offset":4647},"end":{"line":92,"column":34,"offset":4653},"indent":[]}}],"position":{"start":{"line":92,"column":26,"offset":4645},"end":{"line":92,"column":36,"offset":4655},"indent":[]}},{"type":"text","value":" for your origin. The weight of the origin (0.01–1.00) is relative to other origins in the same pool, so an origin with a weight of 1 will receive twice as much traffic as one with a weight of 0.5. A weight of 0 means traffic will not be sent to this origin, but health is still checked.","position":{"start":{"line":92,"column":36,"offset":4655},"end":{"line":92,"column":323,"offset":4942},"indent":[]}}],"position":{"start":{"line":92,"column":4,"offset":4623},"end":{"line":92,"column":323,"offset":4942},"indent":[]}}],"position":{"start":{"line":92,"column":1,"offset":4620},"end":{"line":93,"column":1,"offset":4943},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Leave the heath and notification settings at their defaults for now and click ","position":{"start":{"line":94,"column":4,"offset":4947},"end":{"line":94,"column":82,"offset":5025},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Save","position":{"start":{"line":94,"column":84,"offset":5027},"end":{"line":94,"column":88,"offset":5031},"indent":[]}}],"position":{"start":{"line":94,"column":82,"offset":5025},"end":{"line":94,"column":90,"offset":5033},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":94,"column":90,"offset":5033},"end":{"line":94,"column":91,"offset":5034},"indent":[]}}],"position":{"start":{"line":94,"column":4,"offset":4947},"end":{"line":94,"column":91,"offset":5034},"indent":[]}}],"position":{"start":{"line":94,"column":1,"offset":4944},"end":{"line":95,"column":1,"offset":5035},"indent":[1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Add a second pool, similar to first, repeating the previous steps, and click ","position":{"start":{"line":96,"column":4,"offset":5039},"end":{"line":96,"column":81,"offset":5116},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Save","position":{"start":{"line":96,"column":83,"offset":5118},"end":{"line":96,"column":87,"offset":5122},"indent":[]}}],"position":{"start":{"line":96,"column":81,"offset":5116},"end":{"line":96,"column":89,"offset":5124},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":96,"column":89,"offset":5124},"end":{"line":96,"column":90,"offset":5125},"indent":[]}}],"position":{"start":{"line":96,"column":4,"offset":5039},"end":{"line":96,"column":90,"offset":5125},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The list of pools displays. By default, pools are ordered by date created. You can reorder them by clicking the arrows next to the numerals in the ","position":{"start":{"line":98,"column":3,"offset":5129},"end":{"line":98,"column":150,"offset":5276},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Order","position":{"start":{"line":98,"column":152,"offset":5278},"end":{"line":98,"column":157,"offset":5283},"indent":[]}}],"position":{"start":{"line":98,"column":150,"offset":5276},"end":{"line":98,"column":159,"offset":5285},"indent":[]}},{"type":"text","value":" column:","position":{"start":{"line":98,"column":159,"offset":5285},"end":{"line":98,"column":167,"offset":5293},"indent":[]}}],"position":{"start":{"line":98,"column":3,"offset":5129},"end":{"line":98,"column":167,"offset":5293},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":" ","position":{"start":{"line":100,"column":3,"offset":5297},"end":{"line":100,"column":4,"offset":5298},"indent":[]}},{"type":"image","title":null,"url":"../static/images/create-load-balancer-pools-list.png","alt":null,"position":{"start":{"line":100,"column":4,"offset":5298},"end":{"line":100,"column":61,"offset":5355},"indent":[]}}],"position":{"start":{"line":100,"column":3,"offset":5297},"end":{"line":100,"column":61,"offset":5355},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":" For now, leave the order as it is.","position":{"start":{"line":102,"column":3,"offset":5362},"end":{"line":102,"column":38,"offset":5397},"indent":[]}}],"position":{"start":{"line":102,"column":3,"offset":5362},"end":{"line":102,"column":38,"offset":5397},"indent":[]}}],"position":{"start":{"line":96,"column":1,"offset":5036},"end":{"line":103,"column":1,"offset":5398},"indent":[1,1,1,1,1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":104,"column":4,"offset":5402},"end":{"line":104,"column":10,"offset":5408},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Next","position":{"start":{"line":104,"column":12,"offset":5410},"end":{"line":104,"column":16,"offset":5414},"indent":[]}}],"position":{"start":{"line":104,"column":10,"offset":5408},"end":{"line":104,"column":18,"offset":5416},"indent":[]}},{"type":"text","value":" to continue.","position":{"start":{"line":104,"column":18,"offset":5416},"end":{"line":104,"column":31,"offset":5429},"indent":[]}}],"position":{"start":{"line":104,"column":4,"offset":5402},"end":{"line":104,"column":31,"offset":5429},"indent":[]}}],"position":{"start":{"line":104,"column":1,"offset":5399},"end":{"line":104,"column":31,"offset":5429},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":4109},"end":{"line":104,"column":31,"offset":5429},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You are now ready to ","position":{"start":{"line":106,"column":1,"offset":5431},"end":{"line":106,"column":22,"offset":5452},"indent":[]}},{"type":"link","title":null,"url":"#create-attack-and-configure-health-checks","children":[{"type":"text","value":"configure health checks","position":{"start":{"line":106,"column":23,"offset":5453},"end":{"line":106,"column":46,"offset":5476},"indent":[]}}],"position":{"start":{"line":106,"column":22,"offset":5452},"end":{"line":106,"column":91,"offset":5521},"indent":[]}},{"type":"text","value":" for your load balancer.","position":{"start":{"line":106,"column":91,"offset":5521},"end":{"line":106,"column":115,"offset":5545},"indent":[]}}],"position":{"start":{"line":106,"column":1,"offset":5431},"end":{"line":106,"column":115,"offset":5545},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":108,"column":1,"offset":5547},"end":{"line":108,"column":4,"offset":5550},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Create, attach, and configure monitors","position":{"start":{"line":110,"column":4,"offset":5555},"end":{"line":110,"column":42,"offset":5593},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":5552},"end":{"line":110,"column":42,"offset":5593},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Create ","position":{"start":{"line":112,"column":1,"offset":5595},"end":{"line":112,"column":8,"offset":5602},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/monitors","children":[{"type":"text","value":"monitors","position":{"start":{"line":112,"column":9,"offset":5603},"end":{"line":112,"column":17,"offset":5611},"indent":[]}}],"position":{"start":{"line":112,"column":8,"offset":5602},"end":{"line":112,"column":47,"offset":5641},"indent":[]}},{"type":"text","value":" to run health checks that track the status of your origin servers.","position":{"start":{"line":112,"column":47,"offset":5641},"end":{"line":112,"column":114,"offset":5708},"indent":[]}}],"position":{"start":{"line":112,"column":1,"offset":5595},"end":{"line":112,"column":114,"offset":5708},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Create a monitor to attach to an origin pool","position":{"start":{"line":114,"column":5,"offset":5714},"end":{"line":114,"column":49,"offset":5758},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":5710},"end":{"line":114,"column":49,"offset":5758},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Select the pool to which you want to configure health checks, and click ","position":{"start":{"line":116,"column":5,"offset":5764},"end":{"line":116,"column":77,"offset":5836},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Attach monitor","position":{"start":{"line":116,"column":79,"offset":5838},"end":{"line":116,"column":93,"offset":5852},"indent":[]}}],"position":{"start":{"line":116,"column":77,"offset":5836},"end":{"line":116,"column":95,"offset":5854},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":116,"column":95,"offset":5854},"end":{"line":116,"column":96,"offset":5855},"indent":[]}}],"position":{"start":{"line":116,"column":5,"offset":5764},"end":{"line":116,"column":96,"offset":5855},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/attach-monitor-0.png","alt":"Monitors view in Edit Load Balancer","position":{"start":{"line":118,"column":3,"offset":5859},"end":{"line":118,"column":80,"offset":5936},"indent":[]}}],"position":{"start":{"line":118,"column":3,"offset":5859},"end":{"line":118,"column":80,"offset":5936},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":120,"column":3,"offset":5940},"end":{"line":120,"column":7,"offset":5944},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Add Monitor","position":{"start":{"line":120,"column":9,"offset":5946},"end":{"line":120,"column":20,"offset":5957},"indent":[]}}],"position":{"start":{"line":120,"column":7,"offset":5944},"end":{"line":120,"column":22,"offset":5959},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":120,"column":22,"offset":5959},"end":{"line":120,"column":27,"offset":5964},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create a Monitor","position":{"start":{"line":120,"column":29,"offset":5966},"end":{"line":120,"column":45,"offset":5982},"indent":[]}}],"position":{"start":{"line":120,"column":27,"offset":5964},"end":{"line":120,"column":47,"offset":5984},"indent":[]}},{"type":"text","value":" controls display.","position":{"start":{"line":120,"column":47,"offset":5984},"end":{"line":120,"column":65,"offset":6002},"indent":[]}}],"position":{"start":{"line":120,"column":3,"offset":5940},"end":{"line":120,"column":65,"offset":6002},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/create-monitor-link.png","alt":"Create a Monitor link","position":{"start":{"line":122,"column":3,"offset":6006},"end":{"line":122,"column":69,"offset":6072},"indent":[]}}],"position":{"start":{"line":122,"column":3,"offset":6006},"end":{"line":122,"column":69,"offset":6072},"indent":[]}}],"position":{"start":{"line":116,"column":1,"offset":5760},"end":{"line":123,"column":1,"offset":6073},"indent":[1,1,1,1,1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":124,"column":4,"offset":6077},"end":{"line":124,"column":10,"offset":6083},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create a Monitor","position":{"start":{"line":124,"column":12,"offset":6085},"end":{"line":124,"column":28,"offset":6101},"indent":[]}}],"position":{"start":{"line":124,"column":10,"offset":6083},"end":{"line":124,"column":30,"offset":6103},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":124,"column":30,"offset":6103},"end":{"line":124,"column":31,"offset":6104},"indent":[]}}],"position":{"start":{"line":124,"column":4,"offset":6077},"end":{"line":124,"column":31,"offset":6104},"indent":[]}}],"position":{"start":{"line":124,"column":1,"offset":6074},"end":{"line":125,"column":1,"offset":6105},"indent":[1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Supply an informative name for your monitor in the ","position":{"start":{"line":126,"column":4,"offset":6109},"end":{"line":126,"column":55,"offset":6160},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Name","position":{"start":{"line":126,"column":57,"offset":6162},"end":{"line":126,"column":61,"offset":6166},"indent":[]}}],"position":{"start":{"line":126,"column":55,"offset":6160},"end":{"line":126,"column":63,"offset":6168},"indent":[]}},{"type":"text","value":" input.","position":{"start":{"line":126,"column":63,"offset":6168},"end":{"line":126,"column":70,"offset":6175},"indent":[]}}],"position":{"start":{"line":126,"column":4,"offset":6109},"end":{"line":126,"column":70,"offset":6175},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/create-monitor-example.png","alt":"Create a monitor in Edit Load Balancer page","position":{"start":{"line":128,"column":3,"offset":6179},"end":{"line":128,"column":94,"offset":6270},"indent":[]}}],"position":{"start":{"line":128,"column":3,"offset":6179},"end":{"line":128,"column":94,"offset":6270},"indent":[]}}],"position":{"start":{"line":126,"column":1,"offset":6106},"end":{"line":129,"column":1,"offset":6271},"indent":[1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Supply settings for each of the following:","position":{"start":{"line":130,"column":4,"offset":6275},"end":{"line":130,"column":46,"offset":6317},"indent":[]}}],"position":{"start":{"line":130,"column":4,"offset":6275},"end":{"line":130,"column":46,"offset":6317},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Type:","position":{"start":{"line":132,"column":9,"offset":6327},"end":{"line":132,"column":14,"offset":6332},"indent":[]}}],"position":{"start":{"line":132,"column":7,"offset":6325},"end":{"line":132,"column":16,"offset":6334},"indent":[]}},{"type":"text","value":" The protocol to use for health checks. Click the drop-down list and choose ","position":{"start":{"line":132,"column":16,"offset":6334},"end":{"line":132,"column":92,"offset":6410},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"HTTP","position":{"start":{"line":132,"column":93,"offset":6411},"end":{"line":132,"column":97,"offset":6415},"indent":[]}}],"position":{"start":{"line":132,"column":92,"offset":6410},"end":{"line":132,"column":98,"offset":6416},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":132,"column":98,"offset":6416},"end":{"line":132,"column":100,"offset":6418},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"HTTPS","position":{"start":{"line":132,"column":101,"offset":6419},"end":{"line":132,"column":106,"offset":6424},"indent":[]}}],"position":{"start":{"line":132,"column":100,"offset":6418},"end":{"line":132,"column":107,"offset":6425},"indent":[]}},{"type":"text","value":", or ","position":{"start":{"line":132,"column":107,"offset":6425},"end":{"line":132,"column":112,"offset":6430},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"TCP","position":{"start":{"line":132,"column":113,"offset":6431},"end":{"line":132,"column":116,"offset":6434},"indent":[]}}],"position":{"start":{"line":132,"column":112,"offset":6430},"end":{"line":132,"column":117,"offset":6435},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":132,"column":117,"offset":6435},"end":{"line":132,"column":118,"offset":6436},"indent":[]}}],"position":{"start":{"line":132,"column":7,"offset":6325},"end":{"line":132,"column":118,"offset":6436},"indent":[]}}],"position":{"start":{"line":132,"column":5,"offset":6323},"end":{"line":133,"column":1,"offset":6437},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Path:","position":{"start":{"line":134,"column":9,"offset":6446},"end":{"line":134,"column":14,"offset":6451},"indent":[]}}],"position":{"start":{"line":134,"column":7,"offset":6444},"end":{"line":134,"column":16,"offset":6453},"indent":[]}},{"type":"text","value":" The endpoint path to run health checks against.","position":{"start":{"line":134,"column":16,"offset":6453},"end":{"line":134,"column":64,"offset":6501},"indent":[]}}],"position":{"start":{"line":134,"column":7,"offset":6444},"end":{"line":134,"column":64,"offset":6501},"indent":[]}}],"position":{"start":{"line":134,"column":5,"offset":6442},"end":{"line":135,"column":1,"offset":6502},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Port:","position":{"start":{"line":136,"column":9,"offset":6511},"end":{"line":136,"column":14,"offset":6516},"indent":[]}}],"position":{"start":{"line":136,"column":7,"offset":6509},"end":{"line":136,"column":16,"offset":6518},"indent":[]}},{"type":"text","value":" The destination port for health checks.","position":{"start":{"line":136,"column":16,"offset":6518},"end":{"line":136,"column":56,"offset":6558},"indent":[]}}],"position":{"start":{"line":136,"column":7,"offset":6509},"end":{"line":136,"column":56,"offset":6558},"indent":[]}}],"position":{"start":{"line":136,"column":5,"offset":6507},"end":{"line":136,"column":56,"offset":6558},"indent":[]}}],"position":{"start":{"line":132,"column":5,"offset":6323},"end":{"line":136,"column":56,"offset":6558},"indent":[1,5,1,5]}}],"position":{"start":{"line":130,"column":1,"offset":6272},"end":{"line":137,"column":1,"offset":6559},"indent":[1,1,1,1,1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"linkReference","identifier":"optional","label":"Optional","referenceType":"shortcut","children":[{"type":"text","value":"Optional","position":{"start":{"line":138,"column":5,"offset":6564},"end":{"line":138,"column":13,"offset":6572},"indent":[]}}],"position":{"start":{"line":138,"column":4,"offset":6563},"end":{"line":138,"column":14,"offset":6573},"indent":[]}},{"type":"text","value":" For additional settings, click ","position":{"start":{"line":138,"column":14,"offset":6573},"end":{"line":138,"column":46,"offset":6605},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Advanced health check settings","position":{"start":{"line":138,"column":48,"offset":6607},"end":{"line":138,"column":78,"offset":6637},"indent":[]}}],"position":{"start":{"line":138,"column":46,"offset":6605},"end":{"line":138,"column":80,"offset":6639},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":138,"column":80,"offset":6639},"end":{"line":138,"column":81,"offset":6640},"indent":[]}}],"position":{"start":{"line":138,"column":4,"offset":6563},"end":{"line":138,"column":81,"offset":6640},"indent":[]}},{"type":"jsx","value":"<Aside type='note' header='Tip'>","position":{"start":{"line":140,"column":3,"offset":6644},"end":{"line":140,"column":35,"offset":6676},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Simulate Zone","position":{"start":{"line":142,"column":5,"offset":6682},"end":{"line":142,"column":18,"offset":6695},"indent":[]}}],"position":{"start":{"line":142,"column":3,"offset":6680},"end":{"line":142,"column":20,"offset":6697},"indent":[]}},{"type":"text","value":" allows you to emulate the specified zone while probing. It pushes a request from Cloudflare Health Monitors through the Cloudflare stack as if it were a real visitor request to help analyze behavior or validate a configuration.","position":{"start":{"line":142,"column":20,"offset":6697},"end":{"line":142,"column":248,"offset":6925},"indent":[]}}],"position":{"start":{"line":142,"column":3,"offset":6680},"end":{"line":142,"column":248,"offset":6925},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Monitors support authenticated origin pulls by entering the appropriate zone in the ","position":{"start":{"line":144,"column":3,"offset":6929},"end":{"line":144,"column":87,"offset":7013},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Simulate Zone","position":{"start":{"line":144,"column":89,"offset":7015},"end":{"line":144,"column":102,"offset":7028},"indent":[]}}],"position":{"start":{"line":144,"column":87,"offset":7013},"end":{"line":144,"column":104,"offset":7030},"indent":[]}},{"type":"text","value":" field of the UI.","position":{"start":{"line":144,"column":104,"offset":7030},"end":{"line":144,"column":121,"offset":7047},"indent":[]}}],"position":{"start":{"line":144,"column":3,"offset":6929},"end":{"line":144,"column":121,"offset":7047},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":145,"column":3,"offset":7050},"end":{"line":145,"column":11,"offset":7058},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/create-monitor-advanced.png","alt":"Advanced health check settings","position":{"start":{"line":147,"column":3,"offset":7062},"end":{"line":147,"column":82,"offset":7141},"indent":[]}}],"position":{"start":{"line":147,"column":3,"offset":7062},"end":{"line":147,"column":82,"offset":7141},"indent":[]}}],"position":{"start":{"line":138,"column":1,"offset":6560},"end":{"line":148,"column":1,"offset":7142},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":149,"column":4,"offset":7146},"end":{"line":149,"column":10,"offset":7152},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Save","position":{"start":{"line":149,"column":12,"offset":7154},"end":{"line":149,"column":16,"offset":7158},"indent":[]}}],"position":{"start":{"line":149,"column":10,"offset":7152},"end":{"line":149,"column":18,"offset":7160},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":149,"column":18,"offset":7160},"end":{"line":149,"column":19,"offset":7161},"indent":[]}}],"position":{"start":{"line":149,"column":4,"offset":7146},"end":{"line":149,"column":19,"offset":7161},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Configure Monitor page displays:","position":{"start":{"line":151,"column":3,"offset":7165},"end":{"line":151,"column":39,"offset":7201},"indent":[]}}],"position":{"start":{"line":151,"column":3,"offset":7165},"end":{"line":151,"column":39,"offset":7201},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/configure-monitor.png","alt":"Configure Monitors in Edit Load Balancer","position":{"start":{"line":153,"column":3,"offset":7205},"end":{"line":153,"column":86,"offset":7288},"indent":[]}},{"type":"text","value":"  ","position":{"start":{"line":153,"column":86,"offset":7288},"end":{"line":153,"column":88,"offset":7290},"indent":[]}}],"position":{"start":{"line":153,"column":3,"offset":7205},"end":{"line":153,"column":88,"offset":7290},"indent":[]}}],"position":{"start":{"line":149,"column":1,"offset":7143},"end":{"line":153,"column":88,"offset":7290},"indent":[1,1,1,1]}}],"position":{"start":{"line":116,"column":1,"offset":5760},"end":{"line":153,"column":88,"offset":7290},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Configure the monitor","position":{"start":{"line":155,"column":5,"offset":7296},"end":{"line":155,"column":26,"offset":7317},"indent":[]}}],"position":{"start":{"line":155,"column":1,"offset":7292},"end":{"line":155,"column":26,"offset":7317},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"To configure the monitor, supply these values:","position":{"start":{"line":157,"column":5,"offset":7323},"end":{"line":157,"column":51,"offset":7369},"indent":[]}}],"position":{"start":{"line":157,"column":5,"offset":7323},"end":{"line":157,"column":51,"offset":7369},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/configure-monitor-values.png","alt":null,"position":{"start":{"line":159,"column":5,"offset":7379},"end":{"line":159,"column":55,"offset":7429},"indent":[]}}],"position":{"start":{"line":159,"column":5,"offset":7379},"end":{"line":159,"column":55,"offset":7429},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Health Threshold:","position":{"start":{"line":161,"column":9,"offset":7439},"end":{"line":161,"column":26,"offset":7456},"indent":[]}}],"position":{"start":{"line":161,"column":7,"offset":7437},"end":{"line":161,"column":28,"offset":7458},"indent":[]}},{"type":"text","value":" Defines the number of healthy origin servers required to consider the pool healthy. When the number of healthy origin servers drops below the threshold, the pool will be marked unhealthy. There is only one origin server in this pool, so leave this value at 1.","position":{"start":{"line":161,"column":28,"offset":7458},"end":{"line":161,"column":288,"offset":7718},"indent":[]}}],"position":{"start":{"line":161,"column":7,"offset":7437},"end":{"line":161,"column":288,"offset":7718},"indent":[]}}],"position":{"start":{"line":161,"column":5,"offset":7435},"end":{"line":162,"column":5,"offset":7723},"indent":[5]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Health Check Regions:","position":{"start":{"line":163,"column":9,"offset":7732},"end":{"line":163,"column":30,"offset":7753},"indent":[]}}],"position":{"start":{"line":163,"column":7,"offset":7730},"end":{"line":163,"column":32,"offset":7755},"indent":[]}},{"type":"text","value":" Specify geographic regions from which Cloudflare should send health check requests. To select a region, use the drop-down list.","position":{"start":{"line":163,"column":32,"offset":7755},"end":{"line":163,"column":160,"offset":7883},"indent":[]}}],"position":{"start":{"line":163,"column":7,"offset":7730},"end":{"line":163,"column":160,"offset":7883},"indent":[]}}],"position":{"start":{"line":163,"column":5,"offset":7728},"end":{"line":164,"column":1,"offset":7884},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Notification E-mail:","position":{"start":{"line":165,"column":9,"offset":7893},"end":{"line":165,"column":29,"offset":7913},"indent":[]}}],"position":{"start":{"line":165,"column":7,"offset":7891},"end":{"line":165,"column":31,"offset":7915},"indent":[]}},{"type":"text","value":" Enter an email address to receive notifications in the ","position":{"start":{"line":165,"column":31,"offset":7915},"end":{"line":165,"column":87,"offset":7971},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Notifications E-mail","position":{"start":{"line":165,"column":89,"offset":7973},"end":{"line":165,"column":109,"offset":7993},"indent":[]}}],"position":{"start":{"line":165,"column":87,"offset":7971},"end":{"line":165,"column":111,"offset":7995},"indent":[]}},{"type":"text","value":" field. You can use a mailing list address or a PagerDuty address to share the notifications with a group.","position":{"start":{"line":165,"column":111,"offset":7995},"end":{"line":165,"column":217,"offset":8101},"indent":[]}}],"position":{"start":{"line":165,"column":7,"offset":7891},"end":{"line":165,"column":217,"offset":8101},"indent":[]}}],"position":{"start":{"line":165,"column":5,"offset":7889},"end":{"line":165,"column":217,"offset":8101},"indent":[]}}],"position":{"start":{"line":161,"column":5,"offset":7435},"end":{"line":165,"column":217,"offset":8101},"indent":[5,5,1,5]}}],"position":{"start":{"line":157,"column":1,"offset":7319},"end":{"line":166,"column":1,"offset":8102},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"To save your monitor and attach it to your pool, click ","position":{"start":{"line":167,"column":4,"offset":8106},"end":{"line":167,"column":59,"offset":8161},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Save","position":{"start":{"line":167,"column":61,"offset":8163},"end":{"line":167,"column":65,"offset":8167},"indent":[]}}],"position":{"start":{"line":167,"column":59,"offset":8161},"end":{"line":167,"column":67,"offset":8169},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":167,"column":67,"offset":8169},"end":{"line":167,"column":68,"offset":8170},"indent":[]}}],"position":{"start":{"line":167,"column":4,"offset":8106},"end":{"line":167,"column":68,"offset":8170},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The configuration page closes and your monitor is displayed in the pools list:","position":{"start":{"line":169,"column":3,"offset":8174},"end":{"line":169,"column":81,"offset":8252},"indent":[]}}],"position":{"start":{"line":169,"column":3,"offset":8174},"end":{"line":169,"column":81,"offset":8252},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/attach-origin-pools-list.png","alt":"Origin pools list in Attach a Health Check page","position":{"start":{"line":171,"column":3,"offset":8256},"end":{"line":171,"column":100,"offset":8353},"indent":[]}}],"position":{"start":{"line":171,"column":3,"offset":8256},"end":{"line":171,"column":100,"offset":8353},"indent":[]}}],"position":{"start":{"line":167,"column":1,"offset":8103},"end":{"line":172,"column":3,"offset":8356},"indent":[1,1,1,1,1]}}],"position":{"start":{"line":157,"column":1,"offset":7319},"end":{"line":172,"column":3,"offset":8356},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The status of your health check will be ","position":{"start":{"line":173,"column":1,"offset":8357},"end":{"line":173,"column":41,"offset":8397},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"unknown","position":{"start":{"line":173,"column":42,"offset":8398},"end":{"line":173,"column":49,"offset":8405},"indent":[]}}],"position":{"start":{"line":173,"column":41,"offset":8397},"end":{"line":173,"column":50,"offset":8406},"indent":[]}},{"type":"text","value":" until the results of the first check are available.","position":{"start":{"line":173,"column":50,"offset":8406},"end":{"line":173,"column":102,"offset":8458},"indent":[]}}],"position":{"start":{"line":173,"column":1,"offset":8357},"end":{"line":173,"column":102,"offset":8458},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Attach a monitor to your secondary pool","position":{"start":{"line":175,"column":5,"offset":8464},"end":{"line":175,"column":44,"offset":8503},"indent":[]}}],"position":{"start":{"line":175,"column":1,"offset":8460},"end":{"line":175,"column":44,"offset":8503},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To attach a monitor to your secondary pool, repeat the steps in ","position":{"start":{"line":177,"column":1,"offset":8505},"end":{"line":177,"column":65,"offset":8569},"indent":[]}},{"type":"link","title":null,"url":"#create-a-monitor-to-attach-to-an-origin-pool","children":[{"type":"emphasis","children":[{"type":"text","value":"Create a monitor to attach to an origin pool","position":{"start":{"line":177,"column":67,"offset":8571},"end":{"line":177,"column":111,"offset":8615},"indent":[]}}],"position":{"start":{"line":177,"column":66,"offset":8570},"end":{"line":177,"column":112,"offset":8616},"indent":[]}}],"position":{"start":{"line":177,"column":65,"offset":8569},"end":{"line":177,"column":160,"offset":8664},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":177,"column":160,"offset":8664},"end":{"line":177,"column":165,"offset":8669},"indent":[]}},{"type":"link","title":null,"url":"#configure-the-monitor","children":[{"type":"emphasis","children":[{"type":"text","value":"Configure the monitor","position":{"start":{"line":177,"column":167,"offset":8671},"end":{"line":177,"column":188,"offset":8692},"indent":[]}}],"position":{"start":{"line":177,"column":166,"offset":8670},"end":{"line":177,"column":189,"offset":8693},"indent":[]}}],"position":{"start":{"line":177,"column":165,"offset":8669},"end":{"line":177,"column":214,"offset":8718},"indent":[]}},{"type":"text","value":"l:","position":{"start":{"line":177,"column":214,"offset":8718},"end":{"line":177,"column":216,"offset":8720},"indent":[]}}],"position":{"start":{"line":177,"column":1,"offset":8505},"end":{"line":177,"column":216,"offset":8720},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/attach-health-check-complete.png","alt":"Attach health check pools list with two monitors attached","position":{"start":{"line":179,"column":1,"offset":8722},"end":{"line":179,"column":112,"offset":8833},"indent":[]}}],"position":{"start":{"line":179,"column":1,"offset":8722},"end":{"line":179,"column":112,"offset":8833},"indent":[]}},{"type":"jsx","value":"<Aside type='note' header='Note'>","position":{"start":{"line":181,"column":1,"offset":8835},"end":{"line":181,"column":34,"offset":8868},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare polls for health status every 60 seconds. A green indicator represents a healthy status; red indicates a failed health check. Move the mouse over the indicator to display a tooltip with the reason for the failure (see ","position":{"start":{"line":183,"column":1,"offset":8870},"end":{"line":183,"column":230,"offset":9099},"indent":[]}},{"type":"link","title":null,"url":"/troubleshooting/","children":[{"type":"emphasis","children":[{"type":"text","value":"Troubleshooting","position":{"start":{"line":183,"column":232,"offset":9101},"end":{"line":183,"column":247,"offset":9116},"indent":[]}}],"position":{"start":{"line":183,"column":231,"offset":9100},"end":{"line":183,"column":248,"offset":9117},"indent":[]}}],"position":{"start":{"line":183,"column":230,"offset":9099},"end":{"line":183,"column":268,"offset":9137},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":183,"column":268,"offset":9137},"end":{"line":183,"column":270,"offset":9139},"indent":[]}}],"position":{"start":{"line":183,"column":1,"offset":8870},"end":{"line":183,"column":270,"offset":9139},"indent":[]}},{"type":"jsx","value":"</Aside>","position":{"start":{"line":184,"column":1,"offset":9140},"end":{"line":184,"column":9,"offset":9148},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now that you have set up health checks for your load balancer, click ","position":{"start":{"line":186,"column":1,"offset":9150},"end":{"line":186,"column":70,"offset":9219},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Next","position":{"start":{"line":186,"column":72,"offset":9221},"end":{"line":186,"column":76,"offset":9225},"indent":[]}}],"position":{"start":{"line":186,"column":70,"offset":9219},"end":{"line":186,"column":78,"offset":9227},"indent":[]}},{"type":"text","value":" to continue and ","position":{"start":{"line":186,"column":78,"offset":9227},"end":{"line":186,"column":95,"offset":9244},"indent":[]}},{"type":"link","title":null,"url":"#configure-traffic-steering","children":[{"type":"text","value":"configure Traffic Steering","position":{"start":{"line":186,"column":96,"offset":9245},"end":{"line":186,"column":122,"offset":9271},"indent":[]}}],"position":{"start":{"line":186,"column":95,"offset":9244},"end":{"line":186,"column":152,"offset":9301},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":186,"column":152,"offset":9301},"end":{"line":186,"column":153,"offset":9302},"indent":[]}}],"position":{"start":{"line":186,"column":1,"offset":9150},"end":{"line":186,"column":153,"offset":9302},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":188,"column":1,"offset":9304},"end":{"line":188,"column":4,"offset":9307},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Configure Traffic Steering","position":{"start":{"line":190,"column":4,"offset":9312},"end":{"line":190,"column":30,"offset":9338},"indent":[]}}],"position":{"start":{"line":190,"column":1,"offset":9309},"end":{"line":190,"column":30,"offset":9338},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Use Geo Routing to configure traffic policies and failover priority by geographic region. This is extremely useful when you want site visitors to access the origin server closest to them, which improves page-loading performance.","position":{"start":{"line":192,"column":1,"offset":9340},"end":{"line":192,"column":229,"offset":9568},"indent":[]}}],"position":{"start":{"line":192,"column":1,"offset":9340},"end":{"line":192,"column":229,"offset":9568},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/add-traffic-steering.png","alt":null,"position":{"start":{"line":194,"column":1,"offset":9570},"end":{"line":194,"column":47,"offset":9616},"indent":[]}}],"position":{"start":{"line":194,"column":1,"offset":9570},"end":{"line":194,"column":47,"offset":9616},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For this exercise, don’t add new regions. For more on Geo Routing, see ","position":{"start":{"line":196,"column":1,"offset":9618},"end":{"line":196,"column":72,"offset":9689},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"/understand-basics/traffic-steering/","children":[{"type":"text","value":"Traffic steering","position":{"start":{"line":196,"column":74,"offset":9691},"end":{"line":196,"column":90,"offset":9707},"indent":[]}}],"position":{"start":{"line":196,"column":73,"offset":9690},"end":{"line":196,"column":129,"offset":9746},"indent":[]}}],"position":{"start":{"line":196,"column":72,"offset":9689},"end":{"line":196,"column":130,"offset":9747},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":196,"column":130,"offset":9747},"end":{"line":196,"column":131,"offset":9748},"indent":[]}}],"position":{"start":{"line":196,"column":1,"offset":9618},"end":{"line":196,"column":131,"offset":9748},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":198,"column":1,"offset":9750},"end":{"line":198,"column":7,"offset":9756},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Next","position":{"start":{"line":198,"column":9,"offset":9758},"end":{"line":198,"column":13,"offset":9762},"indent":[]}}],"position":{"start":{"line":198,"column":7,"offset":9756},"end":{"line":198,"column":15,"offset":9764},"indent":[]}},{"type":"text","value":" to continue and ","position":{"start":{"line":198,"column":15,"offset":9764},"end":{"line":198,"column":32,"offset":9781},"indent":[]}},{"type":"link","title":null,"url":"#create-custom-load-balancing-rules","children":[{"type":"text","value":"create custom Load Balancing rules","position":{"start":{"line":198,"column":33,"offset":9782},"end":{"line":198,"column":67,"offset":9816},"indent":[]}}],"position":{"start":{"line":198,"column":32,"offset":9781},"end":{"line":198,"column":105,"offset":9854},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":198,"column":105,"offset":9854},"end":{"line":198,"column":106,"offset":9855},"indent":[]}}],"position":{"start":{"line":198,"column":1,"offset":9750},"end":{"line":198,"column":106,"offset":9855},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":200,"column":1,"offset":9857},"end":{"line":200,"column":4,"offset":9860},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Create custom Load Balancing rules","position":{"start":{"line":202,"column":4,"offset":9865},"end":{"line":202,"column":38,"offset":9899},"indent":[]}}],"position":{"start":{"line":202,"column":1,"offset":9862},"end":{"line":202,"column":38,"offset":9899},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Load Balancing rules allow you to customize the behavior of your Cloudflare ","position":{"start":{"line":204,"column":1,"offset":9901},"end":{"line":204,"column":77,"offset":9977},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/load-balancers","children":[{"type":"text","value":"load balancer","position":{"start":{"line":204,"column":78,"offset":9978},"end":{"line":204,"column":91,"offset":9991},"indent":[]}}],"position":{"start":{"line":204,"column":77,"offset":9977},"end":{"line":204,"column":127,"offset":10027},"indent":[]}},{"type":"text","value":". For example, use Load Balancing rules to select an ","position":{"start":{"line":204,"column":127,"offset":10027},"end":{"line":204,"column":180,"offset":10080},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/pools","children":[{"type":"text","value":"origin pool","position":{"start":{"line":204,"column":181,"offset":10081},"end":{"line":204,"column":192,"offset":10092},"indent":[]}}],"position":{"start":{"line":204,"column":180,"offset":10080},"end":{"line":204,"column":219,"offset":10119},"indent":[]}},{"type":"text","value":" based on the URI path of an HTTP request.","position":{"start":{"line":204,"column":219,"offset":10119},"end":{"line":204,"column":261,"offset":10161},"indent":[]}}],"position":{"start":{"line":204,"column":1,"offset":9901},"end":{"line":204,"column":261,"offset":10161},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/create-load-balancer-custom-rules.png","alt":"Custom rules page in Create Load Balancer workflow","position":{"start":{"line":207,"column":1,"offset":10164},"end":{"line":207,"column":110,"offset":10273},"indent":[]}}],"position":{"start":{"line":207,"column":1,"offset":10164},"end":{"line":207,"column":110,"offset":10273},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For a walkthrough, see ","position":{"start":{"line":209,"column":1,"offset":10275},"end":{"line":209,"column":24,"offset":10298},"indent":[]}},{"type":"link","title":null,"url":"/understand-basics/load-balancing-rules/create-rules","children":[{"type":"emphasis","children":[{"type":"text","value":"Creating Load Balancing rules","position":{"start":{"line":209,"column":26,"offset":10300},"end":{"line":209,"column":55,"offset":10329},"indent":[]}}],"position":{"start":{"line":209,"column":25,"offset":10299},"end":{"line":209,"column":56,"offset":10330},"indent":[]}}],"position":{"start":{"line":209,"column":24,"offset":10298},"end":{"line":209,"column":111,"offset":10385},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":209,"column":111,"offset":10385},"end":{"line":209,"column":112,"offset":10386},"indent":[]}}],"position":{"start":{"line":209,"column":1,"offset":10275},"end":{"line":209,"column":112,"offset":10386},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":211,"column":1,"offset":10388},"end":{"line":211,"column":4,"offset":10391},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Review your load balancer configuration","position":{"start":{"line":213,"column":4,"offset":10396},"end":{"line":213,"column":43,"offset":10435},"indent":[]}}],"position":{"start":{"line":213,"column":1,"offset":10393},"end":{"line":213,"column":43,"offset":10435},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Before creating your load balancer, the creation wizard presents your a summary of your configuration so that you can review and make changes.","position":{"start":{"line":215,"column":1,"offset":10437},"end":{"line":215,"column":143,"offset":10579},"indent":[]}}],"position":{"start":{"line":215,"column":1,"offset":10437},"end":{"line":215,"column":143,"offset":10579},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/create-load-balancer-review.png","alt":"Review page in Create Load Balancer workflow","position":{"start":{"line":217,"column":1,"offset":10581},"end":{"line":217,"column":98,"offset":10678},"indent":[]}}],"position":{"start":{"line":217,"column":1,"offset":10581},"end":{"line":217,"column":98,"offset":10678},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Once you approve the configuration, click ","position":{"start":{"line":219,"column":1,"offset":10680},"end":{"line":219,"column":43,"offset":10722},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Save and Deploy","position":{"start":{"line":219,"column":45,"offset":10724},"end":{"line":219,"column":60,"offset":10739},"indent":[]}}],"position":{"start":{"line":219,"column":43,"offset":10722},"end":{"line":219,"column":62,"offset":10741},"indent":[]}},{"type":"text","value":" to commit the configuration and immediately start your load balancer. Clicking ","position":{"start":{"line":219,"column":62,"offset":10741},"end":{"line":219,"column":142,"offset":10821},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Save as Draft","position":{"start":{"line":219,"column":144,"offset":10823},"end":{"line":219,"column":157,"offset":10836},"indent":[]}}],"position":{"start":{"line":219,"column":142,"offset":10821},"end":{"line":219,"column":159,"offset":10838},"indent":[]}},{"type":"text","value":" will commit your configuration without starting the load balancer.","position":{"start":{"line":219,"column":159,"offset":10838},"end":{"line":219,"column":226,"offset":10905},"indent":[]}}],"position":{"start":{"line":219,"column":1,"offset":10680},"end":{"line":219,"column":226,"offset":10905},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Once you have saved your load balancer configuration, you will be returned to the ","position":{"start":{"line":221,"column":1,"offset":10907},"end":{"line":221,"column":83,"offset":10989},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Load Balancing","position":{"start":{"line":221,"column":85,"offset":10991},"end":{"line":221,"column":99,"offset":11005},"indent":[]}}],"position":{"start":{"line":221,"column":83,"offset":10989},"end":{"line":221,"column":101,"offset":11007},"indent":[]}},{"type":"text","value":" card. The card provides quick access to common actions.","position":{"start":{"line":221,"column":101,"offset":11007},"end":{"line":221,"column":157,"offset":11063},"indent":[]}}],"position":{"start":{"line":221,"column":1,"offset":10907},"end":{"line":221,"column":157,"offset":11063},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can monitor your load balancers on the ","position":{"start":{"line":223,"column":1,"offset":11065},"end":{"line":223,"column":44,"offset":11108},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Manage Load Balancers","position":{"start":{"line":223,"column":46,"offset":11110},"end":{"line":223,"column":67,"offset":11131},"indent":[]}}],"position":{"start":{"line":223,"column":44,"offset":11108},"end":{"line":223,"column":69,"offset":11133},"indent":[]}},{"type":"text","value":" card.","position":{"start":{"line":223,"column":69,"offset":11133},"end":{"line":223,"column":75,"offset":11139},"indent":[]}}],"position":{"start":{"line":223,"column":1,"offset":11065},"end":{"line":223,"column":75,"offset":11139},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"../static/images/load-balancing-cards.png","alt":"Load Balancing card","position":{"start":{"line":225,"column":1,"offset":11141},"end":{"line":225,"column":66,"offset":11206},"indent":[]}}],"position":{"start":{"line":225,"column":1,"offset":11141},"end":{"line":225,"column":66,"offset":11206},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":227,"column":1,"offset":11208},"end":{"line":227,"column":4,"offset":11211},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Share your load balancer with other sites","position":{"start":{"line":229,"column":4,"offset":11216},"end":{"line":229,"column":45,"offset":11257},"indent":[]}}],"position":{"start":{"line":229,"column":1,"offset":11213},"end":{"line":229,"column":45,"offset":11257},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can share your load balancer with other sites in your account by creating a canonical name (CNAME) record in the Cloudflare ","position":{"start":{"line":231,"column":1,"offset":11259},"end":{"line":231,"column":129,"offset":11387},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"DNS","position":{"start":{"line":231,"column":131,"offset":11389},"end":{"line":231,"column":134,"offset":11392},"indent":[]}}],"position":{"start":{"line":231,"column":129,"offset":11387},"end":{"line":231,"column":136,"offset":11394},"indent":[]}},{"type":"text","value":" app. This is useful for sharing configurations with multiple other domains, and you do not have to create new load balancers for each site.","position":{"start":{"line":231,"column":136,"offset":11394},"end":{"line":231,"column":276,"offset":11534},"indent":[]}}],"position":{"start":{"line":231,"column":1,"offset":11259},"end":{"line":231,"column":276,"offset":11534},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For more, see ","position":{"start":{"line":233,"column":1,"offset":11536},"end":{"line":233,"column":15,"offset":11550},"indent":[]}},{"type":"link","title":null,"url":"https://support.cloudflare.com/hc/en-us/articles/360020615111-Configuring-a-CNAME-setup/#h_836723523521544131668686","children":[{"type":"emphasis","children":[{"type":"text","value":"Configuring a CNAME setup","position":{"start":{"line":233,"column":17,"offset":11552},"end":{"line":233,"column":42,"offset":11577},"indent":[]}}],"position":{"start":{"line":233,"column":16,"offset":11551},"end":{"line":233,"column":43,"offset":11578},"indent":[]}}],"position":{"start":{"line":233,"column":15,"offset":11550},"end":{"line":233,"column":161,"offset":11696},"indent":[]}},{"type":"text","value":" in the Cloudflare Support knowledge base.","position":{"start":{"line":233,"column":161,"offset":11696},"end":{"line":233,"column":203,"offset":11738},"indent":[]}}],"position":{"start":{"line":233,"column":1,"offset":11536},"end":{"line":233,"column":203,"offset":11738},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can also configure separate load balancers for each domain and reuse monitors and pools. This is especially useful for changing the failover order for different domains, such as when your ","position":{"start":{"line":235,"column":1,"offset":11740},"end":{"line":235,"column":193,"offset":11932},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"example.co.uk","position":{"start":{"line":235,"column":194,"offset":11933},"end":{"line":235,"column":207,"offset":11946},"indent":[]}}],"position":{"start":{"line":235,"column":193,"offset":11932},"end":{"line":235,"column":208,"offset":11947},"indent":[]}},{"type":"text","value":" server has a different failover priority from ","position":{"start":{"line":235,"column":208,"offset":11947},"end":{"line":235,"column":255,"offset":11994},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"example.com","position":{"start":{"line":235,"column":256,"offset":11995},"end":{"line":235,"column":267,"offset":12006},"indent":[]}}],"position":{"start":{"line":235,"column":255,"offset":11994},"end":{"line":235,"column":268,"offset":12007},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":235,"column":268,"offset":12007},"end":{"line":235,"column":272,"offset":12011},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"example.com.au","position":{"start":{"line":235,"column":273,"offset":12012},"end":{"line":235,"column":287,"offset":12026},"indent":[]}}],"position":{"start":{"line":235,"column":272,"offset":12011},"end":{"line":235,"column":288,"offset":12027},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":235,"column":288,"offset":12027},"end":{"line":235,"column":289,"offset":12028},"indent":[]}}],"position":{"start":{"line":235,"column":1,"offset":11740},"end":{"line":235,"column":289,"offset":12028},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Create via Cloudflare dashboard\",\"order\":20}","position":{"start":{"line":238,"column":1,"offset":12031},"end":{"line":238,"column":83,"offset":12113},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":238,"column":83,"offset":12113}}}}}]}}}